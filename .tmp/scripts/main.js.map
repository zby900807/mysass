{"version":3,"sources":["main.js"],"names":["$","hide","urls","areaUrl","callbacks","searchCallback","data","html","areaCallback","city_json","temp_html","node","attr","result","messages","arealist","length","removeClass","each","i","obj","areaName","areaId","level","addClass","shopInfo","init","btn","shopInfoTd","tdLineHeighgt","css","tdHeighgt","height","tdHeighgt_4","parseInt","styleShowType","show","remove","buttonBind","_this","click","indexRankFn","userJson","find","self","val","searchKey","searchVal","on","id","parentId","packajax","ajax_url","user","succ","call","JAVASCRIPT","exportMerchantDateUrl","merchantPurchaseQueryUrl","userInfoCallback","window","location","href","url","console","log","venderInfoCallback","alert","forDataCallback","showPopupCallback","popup","onPopupReload","thisPopup","parents","reload","onPopupCallback1","delegate","msg","onPopupCallback2","searchKeyFn","searchItem","tabItem","tabKeyFn","state","sValue","sData","pageKetFn","dataItemFn","dataItem","pageDataFn","userArray","dataKey","dataVal","thisNode","beChecked","eq","push","join","popupTxtFn","popupNode","dataValArr","batchDataFn","siblings","batchDataFn2","userTr","userInput","eachUserJson","j","k","saveTxtFn","parentCard","parentNode","toEditFn","editArea","$this","nowVal","editKind","text","optionList","split","valueList","temHtml","toSaveFn","isAjax","editingArea","nowShow","thisVal","inputList","toCopyFn","copyType","toPasteFn","singleBtnFn","index","ids","myProductLibUrl","myProductSKULibUrl","editPageUrl","productUpShelfUrl","productDownShelfUrl","batchIngressShelfUrl","importUpShelfUrl","importDownShelfUrl","editAreaCatUrl","itemDelUrl","areaDelUrl","areaPriceSearchUrl","areaPriceSaveUrl","agreementPriceSearchUrl","agreementPriceDeleteUrl","agreementPriceDModifyUrl","agreementPriceUpdataUrl","settleAccountSearchUrl","channelSetAccount","standingBookSearch","scopeSearch","paymentSearch","bSellerManageSellersUrl","bSellerManageDetailUserStatusOnUrl","bSellerManageDetailUserStatusOffUrl","bSellerManageSaveAccountUrl","bSellerFirstSearchUrl","bSellerManageDetailAuditPassUrl","bSellerManageDetailToAuditDenyUrl","bSellerManageDetailAuditDenyUrl","bSellerWareRelationshipSellersSearchUrl","bSellerWareRelationshipEditBtnUrl","bSellerWareRelationshipSingleDeleteUrl","bSellerWareRelationshipBatchDeleteUrl","bSellerWareRelationshipUpdateUrl","bSellerWareRelationshipAddSearchBtnUrl","bSellerWareRelationshipSingleSaveUrl","bSellerWareRelationshipBatchSaveUrl","bSellerCategoryIndexQueryUrl","venderBPurchaseQueryUrl","venderBAuditPurchaseUrl","venderBOrderQueryUrl","venderBDisagreePurchaseUrl","venderBRejectPurchaseUrl","venderBModifyPurchseOrderUrl","venderBSavePurchseSkuUrl","venderBDelPurchseSkuUrl","venderBShowProductUrl","venderBQueryProductUrl","venderBStockoutUrl","bSellerDetailSellersUrl","importSkus","importResult","importImgs","importImgsResult","importStatus","skuStatus","imgStatus","intervals","skuInterval","imgInterval","showPopup","closeClass","popupContent","uploadSuccessAllCallback","isImg","clearIntervalIfNotNull","source","template","Handlebars","compile","uploadImgsSuccessPartCallback","openResult","totalNum","successNum","failNum","fails","map","item","append","ajax","type","timeout","success","uploadFailedCallback","parent","error","uploadSuccessPartCallback","repeatRows","failRows","parseFailRows","uploadLoadingDisplay","uploadLoadingCallback","setInterval","importImgsStatusFn","importStatusFn","uploadStatusCallback","showResult","uploadImgsStatusCallback","importCallback","title","trim","searchKeyPopupFn","nowName","editType","importImgsStatus","interval","clearInterval","changeTabButtonStatesFn","wareStatus","batchBtn","importBtn","delBtn","Number","thisUrl","thisPin","thisPurchaseId","userJsonStr","skuids","nowRow","size","thisRow","confirm","next","JSON","stringify","category","select","nodata","sort3","userJson1","userJsonLine","extend","userJsonArr","wareIds","r","tempObjects","templates","fileLink","change","hasClass","fn","ajaxSubmit","getScript","submit","parseJSON","isSuccess","err","canDelete","wareState","allInput","checkForm","errorTips","skuNumDom","discountDom","totalNumDom","eachPriceDom","skuNum","eachPrice","discount","flag","num","parseFloat","toFixed","thisTr","amountJson","amountArray","prop","dataVal2","validErr","dataVa2","amoungtScopeId","undefined","w","addGoodsProperty","opts","defaultOpts","propertyBox","imgBox","propertyIndex","propertyKey","propertyVal","_init","prototype","proItem","goodsTotal","_addEvent","_setIndex","_propertyManageBind","_renderProduct","_attributeManage","eachValObj","beCheckedLength","propertyName","_goodsTotal","_newSkuImg","_delSkuImg","skuDatas","_getPropertys","_adapterSkuData","_renderPropertyTable","_addTotal","thisImgArea","_moveImgArea","uploadData","format","lisLi","prev","_uploadImg","imgSrc","lis","_uploadQual","pcDes","_commitData","imgFlag","imgLen","spuState","isStand","typeStand","str","failfun","$li","$liIndex","thisSrc","$list","mainHtml","maxLen","thisLen","leftLen","leftLenInt","lentips","catId","getScopeList","scopeObj","resultParent","scopeName","scopeId","warePoolId","keyword","packTypeHtml","splitType","popupCard","cloneTr","lastTr","newBtn","lastIndex","isNaN","clone","not","thisName","updataIndex","removeAttr","stockTotal","datas","$item","property","checkboxs","checkbox","checkboxData","checkboxObj","attrId","value","propertys","headData","skuListData","nowTableTr","nowTableArr","obj1","obj2","_renderData","headTd","nl","trEach","nowTableObj","nowKey","nowPrice","nowWholesalePrice","nowstock","nowPackageNum","nowskuAlias","newTrData","m","nowTrData","key","price","wholesalePrice","stock","packageNum","skuAlias","list","saleAttr","check1","tds","td2","rowspan","saleAttrs","children","color","check2","saleAttrs1","concat","saleAttr2","td1","unshift","showWholesale","tmp","name","imgAreaNode","imgHtml","_getPropertysTableData","trs","el","tr","imgData","imgDataColor","skuImages","skuImagesObj","imgSrcIndex","imagePath","imageIndex","colorId","_getAddTableData","$table","priceList","a","$t","priceLevel","levelName","priceValue","_getWareQualifiesData","after","ajaxFileUpload","secureuri","fileElementId","dataType","status","eval","images","code","imgName","e","_spuData","spuJson","spuKey","spuVal","spuImages","spuImagesObj","_attrData","attrs","attrData","thisKey","_scopeData","scopeNeeded","commitData","commitDataResult","bWare","scopeVOs","skuList","qualifyList","products","scopesList","categoryId","scopeList","newScopeList","filter","scope","indexOf","renderScopeList","scopeHtml","scopeItem","jQuery","$thisIndex","nodeName","showBigImg","src","showPopupHtml","placeholderSupport","blur","input","document","createElement","mok","stopPropagation","chooseLiFn","renderLiFn","comName","goodsName","newDataWare","newDataUser","thisWareId","thisUserPin","discountSearchCallback","eachTrJson","$thisTr","inputKey","inputVal","isEmptyObject","thisData","wareList","listLen","listHtml","eachlist","wareName","wareId","userPin","tableBox","event","laydate","fromNow","min","now","trData","isEdit","freightEditCity","$thisName","newName","check_all_list","area","areaList","cityId","shopIdList","shopIdObj","nowTr","shopIdJson","$that","nowShopId","splitOrder","btnBox","splitActiveBtn","splitDoneBtn","orderTable","_render","unitPrice","_splitActiveFn","_splitDoneFn","_changeCheckFn","_pageDataFn","_showPopupCallback","is","_changeNumFn","spilt_num","newTotalNum","orderIndex","nowSize","checkedHtml","nowHtml","spiltNumDom","spiltNum","spiltNumStr","unitTotalPrice","thisSize","checkedDom","_checkOrder","_newOrderTable","replace","_divideNewOrder","leftSize","checkeDays","checkePrice","inputNum","ilen","payType","strHtml","newClass","_renderTable","group","eachOrder","skuIdList","eachSku","yaoOrderDeliver","shipmentTypeSelect","deliverBtn","_selectShipmentType","_errorClass","_needOrNot","tagName","_getExpressSelectHtml","expressList","companyInfo","companyId","companyName","_deliver","_expressCompanySelect","expressNumberInput","expressCompanySelect","shipmentType","cache","customerCodeInput","customerCode","expressNum","expressCompanyNum","expressCompanyName","purchaseId","yaoPurchaseDetailJS","wareSearchResultInfo","wareInfo","yaoPurchaseDetail","wareTable","updateAndApproveBtn","updateAndApproveBtn1","auditApproveBtn","auditRejectPopupBtn","_getWarePriceInfo","_toEdit","_popAddWareWindow","_deleteSelectWare","_deleteWare","_saveWarePriceAndNum","_popupSearchWare","_addWareToPurcahseWareList","_checkCoupons","_updateAndApprove","_auditApprove","_auditRejectPopup","_auditReject","_updateDisplay","wareInfoList","skuName","editHtml","disabled","cat3Id","guid","skuId","isLimitArea","skuPrice","purchasePrice","purchaseNum","money","shouldPay","skuArray","_getWareSkus","trNode","_removeWareFromObj","selectBoxes","_addWare","wareInfoFromTable","skuItems","skuItem","wareForAdd","deleteWareInfo","wareInfoMap","cat3","totalMoney","shopSkuId","_self","_isPositiveNum","_jdmoney","_updatePriceInfoAfterEdit","s","re","test","t","warePriceInfo","warePrice","popWindowHtml","_searchWare","_getChooseWare","chooseRadio","spuname","spuName","tbody","callback","totalDiscount","purchaseWareArray","purchaseWareInfo","traditional","wareInfos","async","confirmAgain","limitAreaItems","guId","packageFailed","textArea","comment","yaoPurchaseList","searchBtn","searchOrderBtn","exportBtn","_searchPurchaseList","_searchOrderList","_exportOrderList","param","_getSearchParam","form","attrName","hasOwnProperty"],"mappings":"AAAA;;;AAGA;;;;;AAKAA,EAAE,YAAY;AACVA,MAAE,4BAAF,EAAgCC,IAAhC;AACA;;;AAGA,QAAIC,OAAO;AACP;AACAC,iBAAS;AAFF,KAAX;AAIA;;;AAGA,QAAIC,YAAY;AACZ;AACAC,wBAAgB,UAAUC,IAAV,EAAgB;AAC5BN,cAAE,cAAF,EAAkBO,IAAlB,CAAuBD,IAAvB;AACH,SAJW;AAKZ;AACAE,sBAAc,UAAUF,IAAV,EAAgB;AAC1B,gBAAIG,YAAY,EAAhB;AACA,gBAAIC,YAAY,sEAAhB;AACA,gBAAIC,OAAOX,EAAE,IAAF,EAAQY,IAAR,CAAa,OAAb,KAAyB,MAAzB,GAAkCZ,EAAE,OAAF,CAAlC,GAA+CA,EAAE,OAAF,CAA1D;AACA,gBAAIM,KAAKO,MAAL,IAAe,IAAnB,EAAyB;AACrBJ,4BAAYH,KAAKQ,QAAL,CAAcC,QAA1B;AACA,oBAAIN,aAAaA,UAAUO,MAAV,GAAmB,CAApC,EAAuC;AACnCL,yBAAKM,WAAL,CAAiB,MAAjB;AACAjB,sBAAEkB,IAAF,CAAOT,SAAP,EAAkB,UAAUU,CAAV,EAAaC,GAAb,EAAkB;AAChCV,qCAAa,mBAAmBU,IAAIC,QAAvB,GAAkC,gBAAlC,GAAqDD,IAAIE,MAAzD,GAAkE,cAAlE,GAAmFF,IAAIG,KAAvF,GAA+F,GAA/F,GAAqGH,IAAIC,QAAzG,GAAoH,WAAjI;AACH,qBAFD;AAGAV,yBAAKJ,IAAL,CAAUG,SAAV;AACH,iBAND,MAMO;AACHC,yBAAKa,QAAL,CAAc,MAAd;AAEH;AACJ;AACJ;;AAvBW,KAAhB;AA0BA;;AAEA,QAAIC,WAAW;;AAEXC,cAAM,YAAY;AACd,iBAAKC,GAAL,GAAW3B,EAAE,WAAF,CAAX;AACA,iBAAK4B,UAAL,GAAkB5B,EAAE,cAAF,CAAlB;AACA,iBAAK6B,aAAL,GAAqB,KAAKD,UAAL,CAAgBE,GAAhB,CAAoB,YAApB,CAArB;AACA,iBAAKC,SAAL,GAAiB,KAAKH,UAAL,CAAgBI,MAAhB,EAAjB;AACA,iBAAKC,WAAL,GAAmBC,SAAS,KAAKL,aAAd,IAA+B,CAAlD;AACA,iBAAKM,aAAL,GAAqB,KAArB;AACA,gBAAID,SAAS,KAAKH,SAAd,IAA2BG,SAAS,KAAKD,WAAd,CAA/B,EAA2D;AACvD,qBAAKL,UAAL,CAAgBE,GAAhB,CAAoB,QAApB,EAA8B,OAA9B;AACA,qBAAKH,GAAL,CAASS,IAAT;AACH,aAHD,MAGO;AACH,qBAAKR,UAAL,CAAgBE,GAAhB,CAAoB,QAApB,EAA8B,MAA9B;AACA,qBAAKH,GAAL,CAASU,MAAT;AACH;AACJ,SAhBU;AAiBXC,oBAAY,YAAY;AACpB,gBAAIC,QAAQ,IAAZ;AACA,iBAAKZ,GAAL,CAASa,KAAT,CAAe,YAAY;AACvBD,sBAAMX,UAAN,CAAiBE,GAAjB,CAAqB;AACjB,8BAAU;AADO,iBAArB;AAGAS,sBAAMZ,GAAN,CAAUU,MAAV;AAEH,aAND;AAOH;;AAGL;;;AA7Be,KAAf,CAgCA,IAAII,cAAc,UAAU9B,IAAV,EAAgB;AAC9B,YAAI+B,WAAW,EAAf;AACA/B,aAAKgC,IAAL,CAAU,OAAV,EAAmBzB,IAAnB,CAAwB,YAAY;AAChC,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA,gBAAI4C,KAAKC,GAAL,EAAJ,EAAgB;AACZ,oBAAIC,YAAY9C,EAAE,IAAF,EAAQY,IAAR,CAAa,MAAb,CAAhB;AACA,oBAAImC,YAAY/C,EAAE,IAAF,EAAQ6C,GAAR,EAAhB;AACAH,yBAASI,SAAT,IAAsBC,SAAtB;AACH;AACJ,SAPD;AAQA,eAAOL,QAAP;AACH,KAXD;;AAaA;;;;;;;;;;AAUA1C,MAAE,OAAF,EAAWgD,EAAX,CAAc,QAAd,EAAwB,YAAY;AAChC,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACAA,UAAE,OAAF,EAAWwB,QAAX,CAAoB,MAApB;AACAxB,UAAE,OAAF,EAAWwB,QAAX,CAAoB,MAApB;AACA,YAAIyB,KAAKjD,EAAE,IAAF,EAAQ2C,IAAR,CAAa,iBAAb,EAAgC/B,IAAhC,CAAqC,cAArC,CAAT;AACA,YAAIW,QAAQW,SAASlC,EAAE,IAAF,EAAQ2C,IAAR,CAAa,iBAAb,EAAgC/B,IAAhC,CAAqC,YAArC,CAAT,IAA+D,CAA3E;AACA8B,mBAAW;AACPQ,sBAAUD,EADH;AAEP1B,mBAAOA;AAFA,SAAX;AAIAqB,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKC,OADL;AAEVkD,kBAAMX,QAFI;AAGVY,kBAAM,UAAUhD,IAAV,EAAgB;AAClBF,0BAAUI,YAAV,CAAuB+C,IAAvB,CAA4BX,IAA5B,EAAkCtC,IAAlC;AACH;;AALS,SAAd;AAQH,KAlBD;AAmBAN,MAAE,OAAF,EAAWgD,EAAX,CAAc,QAAd,EAAwB,YAAY;AAChChD,UAAE,OAAF,EAAWwB,QAAX,CAAoB,MAApB;AACA,YAAIyB,KAAKjD,EAAE,IAAF,EAAQ2C,IAAR,CAAa,iBAAb,EAAgC/B,IAAhC,CAAqC,cAArC,CAAT;AACA,YAAIW,QAAQW,SAASlC,EAAE,IAAF,EAAQ2C,IAAR,CAAa,iBAAb,EAAgC/B,IAAhC,CAAqC,YAArC,CAAT,IAA+D,CAA3E;AACA8B,mBAAW;AACPO,gBAAIA,EADG;AAEP1B,mBAAOA;AAFA,SAAX;AAIAvB,UAAE,IAAF,EAAQmD,QAAR,CAAiB;AACbC,sBAAUlD,KAAKC,OADF;AAEbkD,kBAAMX,QAFO;AAGbY,kBAAM,UAAUhD,IAAV,EAAgB;AAClBF,0BAAUI,YAAV,CAAuB+C,IAAvB,CAA4BX,IAA5B,EAAkCtC,IAAlC;AACH;AALY,SAAjB;AAOH,KAfD;;AAiBAmB,aAASC,IAAT;AACAD,aAASa,UAAT;AAEH,CAtID;;AA0IA;;;AAGAtC,EAAE,YAAY;AACV;;;AAGA,QAAIE,OAAO;AACPsD,oBAAY,cADL;AAEP;AACAC,+BAAuB,mCAHhB;AAIPC,kCAA0B;;AAJnB,KAAX;AAOA;;;AAGA,QAAItD,YAAY;AACZ;AACAuD,0BAAkB,UAAUrD,IAAV,EAAgB;AAC9B,gBAAIA,KAAKO,MAAT,EAAiB;AACb+C,uBAAOC,QAAP,CAAgBC,IAAhB,GAAuBxD,KAAKQ,QAAL,CAAciD,GAArC;AACH,aAFD,MAEO;AACHC,wBAAQC,GAAR,CAAY3D,KAAKQ,QAAjB;AACH;AACJ,SARW;AASZ;AACAoD,4BAAoB,UAAU5D,IAAV,EAAgB;AAChC,gBAAIA,KAAKO,MAAT,EAAiB;AACbsD,sBAAM,MAAN;AACH,aAFD,MAEO;AACHA,sBAAM,MAAN;AACH;AACJ,SAhBW;AAiBZ;AACA9D,wBAAgB,UAAUC,IAAV,EAAgB;AAC5BN,cAAE,cAAF,EAAkBO,IAAlB,CAAuBD,IAAvB;AACH,SApBW;AAqBZ;AACA8D,yBAAiB,UAAU9D,IAAV,EAAgB;AAC7BN,cAAE,kBAAF,EAAsBO,IAAtB,CAA2BD,IAA3B;AACH,SAxBW;AAyBZ;AACA+D,2BAAmB,UAAU/D,IAAV,EAAgB;AAC/BN,cAAE,QAAF,EAAYO,IAAZ,CAAiBD,KAAKQ,QAAL,CAAcwD,KAA/B,EAAsClC,IAAtC;AACH,SA5BW;AA6BZ;AACAmC,uBAAe,UAAUjE,IAAV,EAAgB;AAC3B,gBAAIsC,OAAO5C,EAAE,IAAF,CAAX;AACA,gBAAIM,KAAKO,MAAT,EAAiB;AACb,oBAAI2D,YAAY5B,KAAK6B,OAAL,CAAa,QAAb,CAAhB;AACAD,0BAAUvE,IAAV;AACA2D,uBAAOC,QAAP,CAAgBa,MAAhB;AACH;AACJ,SArCW;AAsCZ;AACAC,0BAAkB,UAAUrE,IAAV,EAAgB;AAC9B,gBAAIsC,OAAO5C,EAAE,IAAF,CAAX;AACA,gBAAIM,KAAKO,MAAT,EAAiB;AACb;AACA,oBAAI2D,YAAY5B,KAAK6B,OAAL,CAAa,QAAb,CAAhB;AACAD,0BAAUjE,IAAV,CAAeD,KAAKQ,QAAL,CAAcwD,KAA7B;AACAE,0BAAUI,QAAV,CAAmB,UAAnB,EAA+B,OAA/B,EAAwC,YAAY;AAChDJ,8BAAUvE,IAAV;AACA2D,2BAAOC,QAAP,CAAgBa,MAAhB;AACH,iBAHD;AAIH,aARD,MAQO;AACH,oBAAIF,YAAY5B,KAAK6B,OAAL,CAAa,QAAb,CAAhB;AACAD,0BAAUjE,IAAV,CAAeD,KAAKQ,QAAL,CAAcwD,KAA7B;AACAE,0BAAUI,QAAV,CAAmB,UAAnB,EAA+B,OAA/B,EAAwC,YAAY;AAChDJ,8BAAUvE,IAAV;AACA2D,2BAAOC,QAAP,CAAgBa,MAAhB;AACH,iBAHD;AAIAV,wBAAQC,GAAR,CAAY3D,KAAKQ,QAAL,CAAc+D,GAA1B;AACH;AACJ,SA1DW;AA2DZ;AACAC,0BAAkB,UAAUxE,IAAV,EAAgB;AAC9B,gBAAIsC,OAAO5C,EAAE,IAAF,CAAX;AACA,gBAAIM,KAAKO,MAAT,EAAiB;AACb;AACA,oBAAI2D,YAAY5B,KAAK6B,OAAL,CAAa,QAAb,CAAhB;AACAD,0BAAUjE,IAAV,CAAeD,KAAKQ,QAAL,CAAcwD,KAA7B;AACAE,0BAAUI,QAAV,CAAmB,UAAnB,EAA+B,OAA/B,EAAwC,YAAY;AAChDJ,8BAAUvE,IAAV;AACA2D,2BAAOC,QAAP,CAAgBC,IAAhB,GAAuBxD,KAAKQ,QAA5B,EAAsCiD,GAAtC;AACH,iBAHD;AAIH,aARD,MAQO;AACHC,wBAAQC,GAAR,CAAY3D,KAAKQ,QAAL,CAAc+D,GAA1B;AACH;AACJ;;AAzEW,KAAhB;;AAgFA;;;;;AAKA,QAAIE,cAAc,UAAUpE,IAAV,EAAgB;AAC9B,YAAIqE,aAAarE,KAAK8D,OAAL,CAAa,UAAb,EAAyB9B,IAAzB,CAA8B,gBAA9B,CAAjB;AACA,YAAIsC,UAAUD,WAAWP,OAAX,CAAmB,UAAnB,EAA+B9B,IAA/B,CAAoC,WAApC,CAAd;AACA;AACA;AACA;AACA;AACA;AACA;AACAqC,mBAAWrC,IAAX,CAAgB,OAAhB,EAAyBzB,IAAzB,CAA8B,YAAY;AACtC,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA,gBAAI4C,KAAKC,GAAL,EAAJ,EAAgB;AACZ,oBAAIC,YAAYF,KAAKhC,IAAL,CAAU,MAAV,CAAhB;AACA,oBAAImC,YAAYH,KAAKC,GAAL,EAAhB;AACAH,yBAASI,SAAT,IAAsBC,SAAtB;AACH;AACJ,SAPD;AAQA;AACAiC,mBAAWrC,IAAX,CAAgB,QAAhB,EAA0BA,IAA1B,CAA+B,iBAA/B,EAAkDzB,IAAlD,CAAuD,YAAY;AAC/D,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA,gBAAI4C,KAAKC,GAAL,EAAJ,EAAgB;AACZ,oBAAIC,YAAYF,KAAKtC,IAAL,EAAhB;AACA,qBAAK,IAAIa,CAAT,IAAc2B,SAAd,EAAyB;AACrBJ,6BAASvB,CAAT,IAAc2B,UAAU3B,CAAV,CAAd;AACH;AACJ;AACJ,SARD;AASA,eAAOuB,QAAP;AACH,KA5BD;AA6BA,QAAID,cAAc,UAAU9B,IAAV,EAAgB;AAC9B,YAAI+B,WAAW,EAAf;AACA/B,aAAKgC,IAAL,CAAU,OAAV,EAAmBzB,IAAnB,CAAwB,YAAY;AAChC,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA,gBAAI4C,KAAKC,GAAL,EAAJ,EAAgB;AACZ,oBAAIC,YAAY9C,EAAE,IAAF,EAAQY,IAAR,CAAa,MAAb,CAAhB;AACA,oBAAImC,YAAY/C,EAAE,IAAF,EAAQ6C,GAAR,EAAhB;AACAH,yBAASI,SAAT,IAAsBC,SAAtB;AACH;AACJ,SAPD;AAQA,eAAOL,QAAP;AACH,KAXD;AAYA;;;AAGA,QAAIwC,WAAW,UAAUvE,IAAV,EAAgB;AAC3B,YAAIiC,OAAOjC,IAAX;AACA,YAAI+B,WAAW,EAAf;AACA,YAAIyC,QAAQvC,KAAK6B,OAAL,CAAa,WAAb,EAA0B7D,IAA1B,CAA+B,MAA/B,CAAZ;AACA,YAAIwE,SAASxC,KAAKhC,IAAL,CAAU,OAAV,CAAb;AACA,YAAIyE,QAAQzC,KAAK6B,OAAL,CAAa,WAAb,EAA0BnE,IAA1B,EAAZ;AACAoC,mBAAWqC,YAAYpE,KAAK8D,OAAL,CAAa,UAAb,EAAyB9B,IAAzB,CAA8B,aAA9B,CAAZ,CAAX;AACAD,mBAAW2C,KAAX;AACA3C,iBAASyC,KAAT,IAAkBC,MAAlB;AACA,eAAO1C,QAAP;AACH,KAVD;;AAYA,QAAI4C,YAAY,UAAU3E,IAAV,EAAgB;AAC5B,YAAIiC,OAAOjC,IAAX;AACA,YAAI+B,WAAW,EAAf;AACA,YAAIyC,QAAQvC,KAAK6B,OAAL,CAAa,WAAb,EAA0B7D,IAA1B,CAA+B,MAA/B,CAAZ;AACA,YAAIwE,SAASxC,KAAKhC,IAAL,CAAU,OAAV,CAAb;AACA8B,mBAAWqC,YAAYpE,KAAK8D,OAAL,CAAa,UAAb,EAAyB9B,IAAzB,CAA8B,aAA9B,CAAZ,CAAX;AACAD,iBAASyC,KAAT,IAAkBC,MAAlB;AACA,eAAO1C,QAAP;AACH,KARD;AASA;;;AAGA,QAAI6C,aAAa,UAAU5E,IAAV,EAAgB;AAC7B,YAAI6E,WAAW,IAAf;;AAEA,YAAI7E,KAAK8D,OAAL,CAAa,IAAb,EAAmBzD,MAAnB,IAA6B,CAAjC,EAAoC;AAChCwE,uBAAW7E,KAAK8D,OAAL,CAAa,IAAb,EAAmBnE,IAAnB,EAAX;AACH,SAFD,MAEO,IAAIK,KAAK8D,OAAL,CAAa,IAAb,EAAmBzD,MAAnB,IAA6B,CAAjC,EAAoC;AACvCwE,uBAAW7E,KAAK8D,OAAL,CAAa,IAAb,EAAmBnE,IAAnB,EAAX;AACH;AACD,YAAIkF,QAAJ,EAAc;AACV,mBAAOA,QAAP;AACH;AAEJ,KAZD;AAaA;;;AAGA,QAAIC,aAAa,UAAU9E,IAAV,EAAgB;AAC7B,YAAI+B,WAAW,EAAf;AACA,YAAI8C,WAAW,EAAf;AACA,YAAIE,YAAY,EAAhB;AACA,YAAIC,UAAU,IAAd;AACA,YAAIC,UAAU,IAAd;AACAC,mBAAWlF,KAAK8D,OAAL,CAAa,eAAb,CAAX;AACA,YAAIqB,YAAYD,SAASlD,IAAT,CAAc,kBAAd,EAAkCA,IAAlC,CAAuC,IAAvC,CAAhB;AACA,YAAImD,UAAU9E,MAAV,IAAoB,CAAxB,EAA2B;AACvBhB,cAAEkB,IAAF,CAAO4E,SAAP,EAAkB,UAAU3E,CAAV,EAAa;AAC3BuB,2BAAWoD,UAAUC,EAAV,CAAa5E,CAAb,EAAgBb,IAAhB,CAAqB,KAArB,CAAX;AACA,oBAAIoC,QAAJ,EAAc;AACVgD,8BAAUM,IAAV,CAAetD,QAAf;AACH;AACJ,aALD;AAMAkD,sBAAUF,UAAUO,IAAV,CAAe,GAAf,CAAV;AACAN,sBAAU,KAAV;AACAH,qBAASG,OAAT,IAAoBC,OAApB;AAEH;AACDC,iBAASlD,IAAT,CAAc,kBAAd,EAAkCzB,IAAlC,CAAuC,YAAY;AAC/CyE,sBAAUE,SAASlD,IAAT,CAAc,kBAAd,EAAkC/B,IAAlC,CAAuC,MAAvC,CAAV;AACAgF,sBAAUC,SAASlD,IAAT,CAAc,kBAAd,EAAkCE,GAAlC,EAAV;AACA2C,qBAASG,OAAT,IAAoBC,OAApB;AACH,SAJD;AAKAC,iBAASlD,IAAT,CAAc,UAAd,EAA0BzB,IAA1B,CAA+B,YAAY;AACvCyE,sBAAUE,SAASlD,IAAT,CAAc,UAAd,EAA0B/B,IAA1B,CAA+B,MAA/B,CAAV;AACAgF,sBAAUC,SAASlD,IAAT,CAAc,UAAd,EAA0BE,GAA1B,EAAV;AACA2C,qBAASG,OAAT,IAAoBC,OAApB;AACH,SAJD;AAKAC,iBAASlD,IAAT,CAAc,QAAd,EAAwBA,IAAxB,CAA6B,iBAA7B,EAAgDzB,IAAhD,CAAqD,YAAY;AAC7D,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA,gBAAI4C,KAAKC,GAAL,EAAJ,EAAgB;AACZ,oBAAI+C,UAAUhD,KAAKtC,IAAL,EAAd;AACA,qBAAK,IAAIa,CAAT,IAAcyE,OAAd,EAAuB;AACnBJ,6BAASrE,CAAT,IAAcyE,QAAQzE,CAAR,CAAd;AACH;AACJ;AACJ,SARD;;AAUA,eAAOqE,QAAP;AAEH,KA1CD;AA2CA;;;AAGA,QAAIU,aAAa,UAAUvF,IAAV,EAAgB;AAC7B,YAAIwF,YAAYxF,KAAK8D,OAAL,CAAa,QAAb,CAAhB;AACA,YAAIkB,UAAU,IAAd;AACA,YAAIC,UAAU,IAAd;AACA,YAAIQ,aAAa,EAAjB;AACA,YAAIZ,WAAW7E,KAAKL,IAAL,EAAf;AACA6F,kBAAUxD,IAAV,CAAe,kBAAf,EAAmCzB,IAAnC,CAAwC,YAAY;AAChDyE,sBAAU3F,EAAE,IAAF,EAAQY,IAAR,CAAa,MAAb,CAAV;AACAgF,sBAAU5F,EAAE,IAAF,EAAQ6C,GAAR,EAAV;AACA2C,qBAASG,OAAT,IAAoBC,OAApB;AACH,SAJD;AAKAO,kBAAUxD,IAAV,CAAe,8BAAf,EAA+CzB,IAA/C,CAAoD,YAAY;AAC5D,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA2F,sBAAU/C,KAAKhC,IAAL,CAAU,MAAV,CAAV;AACAgF,sBAAUhD,KAAKC,GAAL,EAAV;AACAuD,uBAAWJ,IAAX,CAAgBJ,OAAhB;AACAJ,qBAASG,OAAT,IAAoBS,WAAWH,IAAX,CAAgB,GAAhB,CAApB;AACH,SAND;AAOAE,kBAAUxD,IAAV,CAAe,2BAAf,EAA4CzB,IAA5C,CAAiD,YAAY;AACzD,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA2F,sBAAU/C,KAAKhC,IAAL,CAAU,MAAV,CAAV;AACAgF,sBAAUhD,KAAKC,GAAL,EAAV;AACA2C,qBAASG,OAAT,IAAoBC,OAApB;AACH,SALD;AAMAO,kBAAUxD,IAAV,CAAe,UAAf,EAA2BzB,IAA3B,CAAgC,YAAY;AACxCyE,sBAAU3F,EAAE,IAAF,EAAQY,IAAR,CAAa,MAAb,CAAV;AACAgF,sBAAU5F,EAAE,IAAF,EAAQ6C,GAAR,EAAV;AACA2C,qBAASG,OAAT,IAAoBC,OAApB;AACH,SAJD;AAKAO,kBAAUxD,IAAV,CAAe,QAAf,EAAyBA,IAAzB,CAA8B,iBAA9B,EAAiDzB,IAAjD,CAAsD,YAAY;AAC9D,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA,gBAAI4C,KAAKC,GAAL,EAAJ,EAAgB;AACZ,oBAAI+C,UAAUhD,KAAKtC,IAAL,EAAd;AACA,qBAAK,IAAIa,CAAT,IAAcyE,OAAd,EAAuB;AACnBJ,6BAASrE,CAAT,IAAcyE,QAAQzE,CAAR,CAAd;AACH;AACJ;AACJ,SARD;AASA,eAAOqE,QAAP;AACH,KAvCD;AAwCA;;;;AAIA,QAAIa,cAAc,UAAU1F,IAAV,EAAgB;AAC9B,YAAI+B,QAAJ;AACA,YAAIgD,YAAY,EAAhB;AACA,YAAII,YAAYnF,KAAK8D,OAAL,CAAa,gCAAb,EAA+C6B,QAA/C,CAAwD,cAAxD,EAAwE3D,IAAxE,CAA6E,kBAA7E,EAAiGA,IAAjG,CAAsG,8BAAtG,CAAhB;AACA3C,UAAEkB,IAAF,CAAO4E,SAAP,EAAkB,UAAU3E,CAAV,EAAa;AAC3BuB,uBAAWoD,UAAUC,EAAV,CAAa5E,CAAb,EAAgBsD,OAAhB,CAAwB,IAAxB,EAA8BnE,IAA9B,CAAmC,KAAnC,CAAX;AACA,gBAAIoC,QAAJ,EAAc;AACVgD,0BAAUM,IAAV,CAAetD,QAAf;AACH;AACJ,SALD;AAMA,eAAOgD,SAAP;AACH,KAXD;;AAaA;;;;;;AAMA,QAAIa,eAAe,UAAU5F,IAAV,EAAgB;AAC/B,YAAI6F,SAAS,IAAb;AACA,YAAIC,YAAY,IAAhB;AACA,YAAIC,eAAe,IAAnB;AACA,YAAIhE,WAAW,IAAf;AACA,YAAIgD,YAAY,EAAhB;AACA,YAAII,YAAYnF,KAAK8D,OAAL,CAAa,gCAAb,EAA+C6B,QAA/C,CAAwD,cAAxD,EAAwE3D,IAAxE,CAA6E,kBAA7E,EAAiGA,IAAjG,CAAsG,gDAAtG,CAAhB;AACA3C,UAAEkB,IAAF,CAAO4E,SAAP,EAAkB,UAAU3E,CAAV,EAAa;AAC3BuF,2BAAe,EAAf;AACAF,qBAASV,UAAUC,EAAV,CAAa5E,CAAb,EAAgBsD,OAAhB,CAAwB,IAAxB,EAA8BnE,IAA9B,EAAT;AACAmG,wBAAYX,UAAUC,EAAV,CAAa5E,CAAb,EAAgBsD,OAAhB,CAAwB,IAAxB,EAA8B9B,IAA9B,CAAmC,QAAnC,EAA6CA,IAA7C,CAAkD,iBAAlD,EAAqErC,IAArE,EAAZ;AACA,iBAAK,IAAIqG,CAAT,IAAcH,MAAd,EAAsB;AAClBE,6BAAaC,CAAb,IAAkBH,OAAOG,CAAP,CAAlB;AACH;AACD,iBAAK,IAAIC,CAAT,IAAcH,SAAd,EAAyB;AACrBC,6BAAaE,CAAb,IAAkBH,UAAUG,CAAV,CAAlB;AACH;AACDlB,sBAAUM,IAAV,CAAeU,YAAf;AACH,SAXD;;AAaA,eAAOhB,SAAP;AACH,KArBD;;AAuBA;;;;;AAKA,QAAImB,YAAY,UAAUlG,IAAV,EAAgBmG,UAAhB,EAA4B;AACxC,YAAIC,aAAaD,UAAjB;AACA,YAAInB,UAAU,IAAd;AACA,YAAIC,UAAU,IAAd;AACA,YAAIQ,aAAa,EAAjB;AACA,YAAIZ,WAAW7E,KAAKL,IAAL,EAAf;AACAyG,mBAAWpE,IAAX,CAAgB,kBAAhB,EAAoCzB,IAApC,CAAyC,YAAY;AACjDyE,sBAAU3F,EAAE,IAAF,EAAQY,IAAR,CAAa,MAAb,CAAV;AACAgF,sBAAU5F,EAAE,IAAF,EAAQ6C,GAAR,EAAV;AACA2C,qBAASG,OAAT,IAAoBC,OAApB;AACH,SAJD;AAKAmB,mBAAWpE,IAAX,CAAgB,8BAAhB,EAAgDzB,IAAhD,CAAqD,YAAY;AAC7D,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA2F,sBAAU/C,KAAKhC,IAAL,CAAU,MAAV,CAAV;AACAgF,sBAAUhD,KAAKC,GAAL,EAAV;AACAuD,uBAAWJ,IAAX,CAAgBJ,OAAhB;AACAJ,qBAASG,OAAT,IAAoBS,WAAWH,IAAX,CAAgB,GAAhB,CAApB;AACH,SAND;AAOAc,mBAAWpE,IAAX,CAAgB,2BAAhB,EAA6CzB,IAA7C,CAAkD,YAAY;AAC1D,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA2F,sBAAU/C,KAAKhC,IAAL,CAAU,MAAV,CAAV;AACAgF,sBAAUhD,KAAKC,GAAL,EAAV;AACA2C,qBAASG,OAAT,IAAoBC,OAApB;AACH,SALD;AAMAmB,mBAAWpE,IAAX,CAAgB,UAAhB,EAA4BzB,IAA5B,CAAiC,YAAY;AACzCyE,sBAAU3F,EAAE,IAAF,EAAQY,IAAR,CAAa,MAAb,CAAV;AACAgF,sBAAU5F,EAAE,IAAF,EAAQ6C,GAAR,EAAV;AACA2C,qBAASG,OAAT,IAAoBC,OAApB;AACH,SAJD;AAKAmB,mBAAWpE,IAAX,CAAgB,QAAhB,EAA0BA,IAA1B,CAA+B,iBAA/B,EAAkDzB,IAAlD,CAAuD,YAAY;AAC/D,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA,gBAAI4C,KAAKC,GAAL,EAAJ,EAAgB;AACZ,oBAAI+C,UAAUhD,KAAKtC,IAAL,EAAd;AACA,qBAAK,IAAIa,CAAT,IAAcyE,OAAd,EAAuB;AACnBJ,6BAASrE,CAAT,IAAcyE,QAAQzE,CAAR,CAAd;AACH;AACJ;AACJ,SARD;AASA,eAAOqE,QAAP;AACH,KAvCD;;AA2CA;;;;;AAKA,QAAIwB,WAAW,UAAUrG,IAAV,EAAgB;AAC3B,YAAIsG,WAAWtG,KAAK8D,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,SAAxB,CAAf;AACAsE,iBAAS/F,IAAT,CAAc,YAAY;AACtB,gBAAIgG,QAAQlH,EAAE,IAAF,CAAZ;AACA,gBAAImH,SAAS,IAAb;AACA,gBAAIC,WAAWF,MAAM5G,IAAN,CAAW,MAAX,CAAf;AACA,oBAAQ8G,QAAR;AACI,qBAAK,OAAL;AACID,6BAASD,MAAMG,IAAN,EAAT;AACAH,0BAAMjG,WAAN,CAAkB,QAAlB,EAA4BO,QAA5B,CAAqC,WAArC,EAAkDjB,IAAlD,CAAuD,+BAA+B4G,MAA/B,GAAwC,IAA/F;AACA;AACJ,qBAAK,QAAL;AACIA,6BAASD,MAAM5G,IAAN,CAAW,MAAX,CAAT;AACA,wBAAIgH,aAAaJ,MAAM5G,IAAN,CAAW,QAAX,EAAqBiH,KAArB,CAA2B,GAA3B,CAAjB;AACA,wBAAIC,YAAYN,MAAM5G,IAAN,CAAW,OAAX,EAAoBiH,KAApB,CAA0B,GAA1B,CAAhB;AACA,wBAAIE,UAAU,UAAd;AACA,yBAAK,IAAItG,CAAT,IAAcmG,UAAd,EAA0B;AACtBG,mCAAW,oBAAoBD,UAAUrG,CAAV,CAApB,GAAmC,aAAnC,GAAmDmG,WAAWnG,CAAX,CAAnD,GAAmE,GAAnE,GAAyEmG,WAAWnG,CAAX,CAAzE,GAAyF,WAApG;AACH;AACDsG,+BAAW,WAAX;AACAP,0BAAMjG,WAAN,CAAkB,QAAlB,EAA4BO,QAA5B,CAAqC,WAArC,EAAkDjB,IAAlD,CAAuDkH,OAAvD,EAAgE9E,IAAhE,CAAqE,QAArE,EAA+EE,GAA/E,CAAmFsE,MAAnF;AACA;AACJ;AACI;AAjBR;AAmBH,SAvBD;AAwBH,KA1BD;;AA6BA;;;;;;;;AAQA,QAAIO,WAAW,UAAU/G,IAAV,EAAgBgH,MAAhB,EAAwB5D,GAAxB,EAA6BrB,QAA7B,EAAuCY,IAAvC,EAA6C;AACxD,YAAIsE,cAAcjH,KAAK8D,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,YAAxB,CAAlB;AACAiF,oBAAY1G,IAAZ,CAAiB,YAAY;AACzB,gBAAIgG,QAAQlH,EAAE,IAAF,CAAZ;AACA,gBAAI6H,UAAU,IAAd;AACA,gBAAIC,UAAU,IAAd;AACA,gBAAIV,WAAWF,MAAM5G,IAAN,CAAW,MAAX,CAAf;AACA,oBAAQ8G,QAAR;AACI,qBAAK,OAAL;AACIS,8BAAUX,MAAMvE,IAAN,CAAW,OAAX,EAAoBE,GAApB,EAAV;AACAqE,0BAAM3G,IAAN,CAAWsH,OAAX,EAAoB5G,WAApB,CAAgC,WAAhC,EAA6CO,QAA7C,CAAsD,QAAtD;AACA;AACJ,qBAAK,QAAL;AACIqG,8BAAUX,MAAMvE,IAAN,CAAW,iBAAX,EAA8BrC,IAA9B,CAAmC,MAAnC,CAAV;AACAwH,8BAAUZ,MAAMvE,IAAN,CAAW,iBAAX,EAA8BE,GAA9B,EAAV;AACAqE,0BAAM3G,IAAN,CAAWsH,OAAX,EAAoBvH,IAApB,CAAyB,MAAzB,EAAiCwH,OAAjC,EAA0C7G,WAA1C,CAAsD,WAAtD,EAAmEO,QAAnE,CAA4E,QAA5E;AACA;AACJ;AACI;AAXR;AAaH,SAlBD;AAmBA,YAAImG,MAAJ,EAAY;AACRhH,iBAAKwC,QAAL,CAAc;AACVC,0BAAUW,GADA;AAEVV,sBAAMX,QAFI;AAGVY,sBAAMA;AAHI,aAAd;AAKH;AAEJ,KA7BD;AA8BA;;;;AAIA,QAAIyE,YAAY,EAAhB;AACA;;;;;AAKA,QAAIC,WAAW,UAAUrH,IAAV,EAAgBsH,QAAhB,EAA0B;AACrCF,oBAAY,EAAZ;AACA,YAAIE,YAAY,OAAhB,EAAyB;AACrBtH,iBAAK8D,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,eAAxB,EAAyCzB,IAAzC,CAA8C,YAAY;AACtD6G,0BAAU/B,IAAV,CAAehG,EAAE,IAAF,EAAQqH,IAAR,EAAf;AACH,aAFD;AAGH,SAJD,MAIO,IAAIY,YAAY,OAAhB,EAAyB;AAC5BtH,iBAAK8D,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,eAAxB,EAAyCzB,IAAzC,CAA8C,YAAY;AACtD6G,0BAAU/B,IAAV,CAAehG,EAAE,IAAF,EAAQ2C,IAAR,CAAa,OAAb,EAAsBE,GAAtB,EAAf;AACH,aAFD;AAGH;AACJ,KAXD;AAYA;;;;AAIA,QAAIqF,YAAY,UAAUvH,IAAV,EAAgB;AAC5BqD,gBAAQC,GAAR,CAAY8D,SAAZ;AACApH,aAAK8D,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,eAAxB,EAAyCzB,IAAzC,CAA8C,UAAUC,CAAV,EAAa;AACvDnB,cAAE,IAAF,EAAQ2C,IAAR,CAAa,OAAb,EAAsBE,GAAtB,CAA0BkF,UAAU5G,CAAV,CAA1B;AACH,SAFD;AAIH,KAND;;AAQA;;;;;;AAMA,QAAIgH,cAAc,UAAUxH,IAAV,EAAgBoG,UAAhB,EAA4B;AAC1C,YAAIvB,WAAW7E,KAAKL,IAAL,EAAf;AACAyG,mBAAWpE,IAAX,CAAgB,UAAhB,EAA4BzB,IAA5B,CAAiC,YAAY;AACzCyE,sBAAU3F,EAAE,IAAF,EAAQY,IAAR,CAAa,MAAb,CAAV;AACAgF,sBAAU5F,EAAE,IAAF,EAAQ6C,GAAR,EAAV;AACA2C,qBAASG,OAAT,IAAoBC,OAApB;AACH,SAJD;AAKAmB,mBAAWpE,IAAX,CAAgB,kBAAhB,EAAoCzB,IAApC,CAAyC,YAAY;AACjDyE,sBAAU3F,EAAE,IAAF,EAAQY,IAAR,CAAa,MAAb,CAAV;AACAgF,sBAAU5F,EAAE,IAAF,EAAQ6C,GAAR,EAAV;AACA2C,qBAASG,OAAT,IAAoBC,OAApB;AACH,SAJD;AAKAmB,mBAAWpE,IAAX,CAAgB,8BAAhB,EAAgDzB,IAAhD,CAAqD,YAAY;AAC7D,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA2F,sBAAU/C,KAAKhC,IAAL,CAAU,MAAV,CAAV;AACAgF,sBAAUhD,KAAKC,GAAL,EAAV;AACAuD,uBAAWJ,IAAX,CAAgBJ,OAAhB;AACAJ,qBAASG,OAAT,IAAoBS,WAAWH,IAAX,CAAgB,GAAhB,CAApB;AACH,SAND;AAOAc,mBAAWpE,IAAX,CAAgB,2BAAhB,EAA6CzB,IAA7C,CAAkD,YAAY;AAC1D,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA2F,sBAAU/C,KAAKhC,IAAL,CAAU,MAAV,CAAV;AACAgF,sBAAUhD,KAAKC,GAAL,EAAV;AACA2C,qBAASG,OAAT,IAAoBC,OAApB;AACH,SALD;AAMAmB,mBAAWpE,IAAX,CAAgB,QAAhB,EAA0BA,IAA1B,CAA+B,iBAA/B,EAAkDzB,IAAlD,CAAuD,YAAY;AAC/D,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA,gBAAI4C,KAAKC,GAAL,EAAJ,EAAgB;AACZ,oBAAI+C,UAAUhD,KAAKtC,IAAL,EAAd;AACA,qBAAK,IAAIa,CAAT,IAAcyE,OAAd,EAAuB;AACnBJ,6BAASrE,CAAT,IAAcyE,QAAQzE,CAAR,CAAd;AACH;AACJ;AACJ,SARD;AASA,eAAOqE,QAAP;AACH,KAnCD;;AAyCA;;AAMA;AACAxF,MAAE,oBAAF,EAAwBgD,EAAxB,CAA2B,OAA3B,EAAoC,YAAY;AAC5C,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACAA,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKwD,wBADL;AAEVL,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KARD;AASA;AACAL,MAAE,uBAAF,EAA2BgD,EAA3B,CAA8B,OAA9B,EAAuC,YAAY;AAC/C,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWwC,SAAStC,IAAT,CAAf;AACAA,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKwD,wBADL;AAEVL,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KARD;AASA;AACAL,MAAE,UAAF,EAAc4E,QAAd,CAAuB,sCAAvB,EAA+D,OAA/D,EAAwE,YAAY;AAChF,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACA,YAAIwF,QAAQ,OAAZ;AACA1F,iBAAS0F,KAAT,IAAkBxF,KAAK0D,QAAL,CAAc,YAAd,EAA4B3D,IAA5B,CAAiC,OAAjC,EAA0CE,GAA1C,EAAlB;AACAD,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKwD,wBADL;AAEVL,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KAVD;AAWA;AACAL,MAAE,UAAF,EAAc4E,QAAd,CAAuB,0CAAvB,EAAmE,OAAnE,EAA4E,YAAY;AACpF,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACA,YAAIwF,QAAQ,OAAZ;AACA1F,iBAAS0F,KAAT,IAAkBxF,KAAKyE,IAAL,EAAlB;AACAzE,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKwD,wBADL;AAEVL,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KAVD;AAWA;AACAL,MAAE,UAAF,EAAc4E,QAAd,CAAuB,4CAAvB,EAAqE,OAArE,EAA8E,YAAY;AACtF,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACA,YAAIwF,QAAQ,OAAZ;AACA1F,iBAAS0F,KAAT,IAAkBlG,SAASU,KAAK6B,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,UAAxB,EAAoC0E,IAApC,EAAT,IAAuD,CAAzE;AACAzE,aAAK6B,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,UAAxB,EAAoC1B,WAApC,CAAgD,SAAhD;AACA2B,aAAK6B,OAAL,CAAa,4BAAb,EAA2C9B,IAA3C,CAAgD,IAAhD,EAAsDoD,EAAtD,CAAyDrD,SAAS0F,KAAT,CAAzD,EAA0E5G,QAA1E,CAAmF,SAAnF;AACAoB,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKwD,wBADL;AAEVL,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KAZD;AAaA;AACAL,MAAE,UAAF,EAAc4E,QAAd,CAAuB,2CAAvB,EAAoE,OAApE,EAA6E,YAAY;AACrF,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACA,YAAIwF,QAAQ,OAAZ;AACA1F,iBAAS0F,KAAT,IAAkBlG,SAASU,KAAK6B,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,UAAxB,EAAoC0E,IAApC,EAAT,IAAuD,CAAzE;AACAzE,aAAK6B,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,UAAxB,EAAoC1B,WAApC,CAAgD,SAAhD;AACA2B,aAAK6B,OAAL,CAAa,4BAAb,EAA2C9B,IAA3C,CAAgD,IAAhD,EAAsDoD,EAAtD,CAAyDrD,SAAS0F,KAAT,CAAzD,EAA0E5G,QAA1E,CAAmF,SAAnF;AACAoB,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKwD,wBADL;AAEVL,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KAZD;AAaA;AACAL,MAAE,WAAF,EAAe4E,QAAf,CAAwB,qBAAxB,EAA+C,OAA/C,EAAwD,YAAY;AAChE,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0F,YAAYW,YAAYzD,IAAZ,CAAhB;AACA,YAAIyF,MAAM3C,UAAUO,IAAV,CAAe,GAAf,CAAV;AACA,YAAIoC,IAAIrH,MAAJ,GAAa,CAAjB,EAAoB;AAChB4C,mBAAOC,QAAP,CAAgBC,IAAhB,GAAuB5D,KAAKuD,qBAAL,GAA6B,eAA7B,GAA+C4E,GAAtE;AACH,SAFD,MAEO;AACHlE,kBAAM,WAAN;AACH;AAEJ,KAVD;AAWH,CA9lBD;;AAkmBA;;;AAGA;;;;AAIAnE,EAAE,YAAY;AACV;;;AAGA,QAAIE,OAAO;AACPsD,oBAAY,cADL;;AAIP;AACA8E,yBAAiB,gBALV;AAMPC,4BAAoB,wBANb;AAOPC,qBAAa,WAPN;;AASPC,2BAAmB,qBATZ;AAUPC,6BAAqB,qBAVd;AAWPC,8BAAsB,6BAXf;AAYPC,0BAAkB,iCAZX;AAaPC,4BAAoB,mCAbb;AAcPC,wBAAgB,kBAdT;AAePC,oBAAY,8BAfL;AAgBPC,oBAAY,+BAhBL;AAiBP;AACAC,4BAAoB,qCAlBb;AAmBPC,0BAAkB,qCAnBX;AAoBP;AACAC,iCAAyB,oCArBlB;AAsBPC,iCAAyB,8BAtBlB;AAuBPC,kCAA0B,8BAvBnB;AAwBPC,iCAAyB,uCAxBlB;AAyBP;AACAC,gCAAwB,8BA1BjB;AA2BP;AACA;AACA;AACA;AACAC,2BAAmB,SA/BZ;AAgCP;AACAC,4BAAoB,6BAjCb;AAkCPC,qBAAa,kCAlCN;AAmCPC,uBAAe,oCAnCR;;AAsCP;AACAC,iCAAyB,4DAvClB;AAwCP;AACAC,4CAAoC,0DAzC7B;AA0CP;AACAC,6CAAqC,2DA3C9B;AA4CP;AACAC,qCAA6B,6DA7CtB;AA8CP;AACAC,+BAAuB,2DA/ChB;AAgDP;AACAC,yCAAiC,0DAjD1B;AAkDP;AACAC,2CAAmC,4DAnD5B;AAoDP;AACAC,yCAAiC,0DArD1B;AAsDP;AACAC,iDAAyC,uEAvDlC;AAwDP;AACAC,2CAAmC,sEAzD5B;AA0DP;AACAC,gDAAwC,yEA3DjC;AA4DP;AACAC,+CAAuC,wEA7DhC;AA8DP;AACAC,0CAAkC,mEA/D3B;AAgEP;AACAC,gDAAwC,qEAjEjC;AAkEP;AACAC,8CAAsC,uEAnE/B;AAoEP;AACAC,6CAAqC,sEArE9B;AAsEP;AACAC,sCAA8B,8DAvEvB;;AAyEP;AACAC,iCAAyB,8BA1ElB;AA2EPC,iCAAyB,qCA3ElB;AA4EPC,8BAAsB,2BA5Ef;AA6EPC,oCAA4B,wCA7ErB;AA8EPC,kCAA0B,sCA9EnB;AA+EPC,sCAA8B,8CA/EvB;AAgFPC,kCAA0B,+CAhFnB;AAiFPC,iCAAyB,8CAjFlB;AAkFPC,+BAAuB,2CAlFhB;AAmFPC,gCAAwB,sCAnFjB;AAoFPC,4BAAoB,qCApFb;;AAsFP;AACAC,iCAAyB,4BAvFlB;;AAyFP;AACAC,oBAAY,8BA1FL;;AA4FP;AACAC,sBAAc,kCA7FP;;AA+FP;AACAC,oBAAY,kCAhGL;AAiGP;AACAC,0BAAkB;AAlGX,KAAX;;AAqGA,QAAIC,eAAe;AACfC,mBAAW,CAAC,GADG;AAEfC,mBAAW,CAAC;AAFG,KAAnB;;AAKA,QAAIC,YAAY;AACZ;AACAC,qBAAa,IAFD;AAGZ;AACAC,qBAAa;;AAGjB;;;AAPgB,KAAhB,CAUA,IAAI9L,YAAY;AACZ;AACAuD,0BAAkB,UAAUrD,IAAV,EAAgB;AAC9B,gBAAIA,KAAKO,MAAT,EAAiB;AACb+C,uBAAOC,QAAP,CAAgBC,IAAhB,GAAuBxD,KAAKQ,QAAL,CAAciD,GAArC;AACH,aAFD,MAEO;AACHC,wBAAQC,GAAR,CAAY3D,KAAKQ,QAAjB;AACH;AACJ,SARW;AASZ;AACAoD,4BAAoB,UAAU5D,IAAV,EAAgB;AAChC,gBAAIA,KAAKO,MAAT,EAAiB;AACbsD,sBAAM,MAAN;AACH,aAFD,MAEO;AACHA,sBAAM,MAAN;AACH;AACJ,SAhBW;AAiBZ;AACA9D,wBAAgB,UAAUC,IAAV,EAAgB;AAC5BN,cAAE,cAAF,EAAkBO,IAAlB,CAAuBD,IAAvB;AACH,SApBW;AAqBZ;AACA8D,yBAAiB,UAAU9D,IAAV,EAAgB;AAC7BN,cAAE,kBAAF,EAAsBO,IAAtB,CAA2BD,IAA3B;AACH,SAxBW;AAyBZ;AACA+D,2BAAmB,UAAU/D,IAAV,EAAgB;AAC/BN,cAAE,UAAF,EAAcqC,MAAd;AACArC,cAAE,QAAF,EAAYO,IAAZ,CAAiBD,KAAKQ,QAAL,CAAcwD,KAA/B,EAAsClC,IAAtC;AACH,SA7BW;AA8BZ+J,mBAAW,UAAU9E,IAAV,EAAgB3C,MAAhB,EAAwB;AAC/B,gBAAI0H,aAAa1H,SAAS,UAAT,GAAsB,YAAvC;AACA,gBAAI2H,eAAe;;;;;qDAAA,GAKyBhF,IALzB,GAKgC;4EALhC,GAMgD+E,UANhD,GAM6D;;;mBANhF;AAUApM,cAAE,QAAF,EAAYO,IAAZ,CAAiB8L,YAAjB,EAA+BjK,IAA/B;AACH,SA3CW;AA4CZ;AACAmC,uBAAe,UAAUjE,IAAV,EAAgB;AAC3B,gBAAIsC,OAAO5C,EAAE,IAAF,CAAX;AACA,gBAAIM,KAAKO,MAAT,EAAiB;AACb,oBAAI2D,YAAY5B,KAAK6B,OAAL,CAAa,QAAb,CAAhB;AACAD,0BAAUvE,IAAV;AACA2D,uBAAOC,QAAP,CAAgBa,MAAhB;AACH;AACJ,SApDW;AAqDZ;AACAC,0BAAkB,UAAUrE,IAAV,EAAgB;AAC9B,gBAAIsC,OAAO5C,EAAE,IAAF,CAAX;AACA,gBAAIM,KAAKO,MAAT,EAAiB;AACb;AACA,oBAAI2D,YAAY5B,KAAK6B,OAAL,CAAa,QAAb,CAAhB;AACAD,0BAAUjE,IAAV,CAAeD,KAAKQ,QAAL,CAAcwD,KAA7B;AACAE,0BAAUI,QAAV,CAAmB,UAAnB,EAA+B,OAA/B,EAAwC,YAAY;AAChDJ,8BAAUvE,IAAV;AACA2D,2BAAOC,QAAP,CAAgBa,MAAhB;AACH,iBAHD;AAIH,aARD,MAQO;AACH,oBAAIF,YAAY5B,KAAK6B,OAAL,CAAa,QAAb,CAAhB;AACAD,0BAAUjE,IAAV,CAAeD,KAAKQ,QAAL,CAAcwD,KAA7B;AACAE,0BAAUI,QAAV,CAAmB,UAAnB,EAA+B,OAA/B,EAAwC,YAAY;AAChDJ,8BAAUvE,IAAV;AACA2D,2BAAOC,QAAP,CAAgBa,MAAhB;AACH,iBAHD;AAIAV,wBAAQC,GAAR,CAAY3D,KAAKQ,QAAL,CAAc+D,GAA1B;AACH;AACJ,SAzEW;AA0EZ;AACAC,0BAAkB,UAAUxE,IAAV,EAAgB;AAC9B,gBAAIsC,OAAO5C,EAAE,IAAF,CAAX;AACA,gBAAIM,KAAKO,MAAT,EAAiB;AACb;AACA,oBAAI2D,YAAY5B,KAAK6B,OAAL,CAAa,QAAb,CAAhB;AACAD,0BAAUjE,IAAV,CAAeD,KAAKQ,QAAL,CAAcwD,KAA7B;AACAE,0BAAUI,QAAV,CAAmB,UAAnB,EAA+B,OAA/B,EAAwC,YAAY;AAChDJ,8BAAUvE,IAAV;AACA2D,2BAAOC,QAAP,CAAgBC,IAAhB,GAAuBxD,KAAKQ,QAA5B,EAAsCiD,GAAtC;AACH,iBAHD;AAIH,aARD,MAQO;AACHC,wBAAQC,GAAR,CAAY3D,KAAKQ,QAAL,CAAc+D,GAA1B;AACH;AACJ,SAxFW;AAyFZ;AACAyH,kCAA0B,UAAUhM,IAAV,EAAgBiM,KAAhB,EAAuB;AAC7C,gBAAIA,KAAJ,EAAW;AACPC,uCAAuBR,UAAUE,WAAjC;AACH,aAFD,MAEO;AACHM,uCAAuBR,UAAUC,WAAjC;AACH;AACD,gBAAIQ,SAASzM,EAAE,wBAAF,EAA4BO,IAA5B,EAAb;AACA,gBAAImM,WAAWC,WAAWC,OAAX,CAAmBH,MAAnB,CAAf;AACA,gBAAIlM,OAAOmM,SAASpM,IAAT,CAAX;AACAN,cAAE,QAAF,EAAYO,IAAZ,CAAiBA,IAAjB,EAAuB6B,IAAvB;AACH,SApGW;AAqGZ;AACAyK,uCAA+B,UAAUvM,IAAV,EAAgBwM,UAAhB,EAA4B;AACvDN,mCAAuBR,UAAUE,WAAjC;AACA,gBAAI,OAAO5L,IAAP,KAAgB,WAAhB,IAA+BA,IAAnC,EAAyC;AACrC;AACA,oBAAImM,SAASzM,EAAE,wBAAF,EAA4BO,IAA5B,EAAb;AACA,oBAAImM,WAAWC,WAAWC,OAAX,CAAmBH,MAAnB,CAAf;AACA,oBAAIlM,OAAOmM,SAASpM,IAAT,CAAX;AACAN,kBAAE,QAAF,EAAYO,IAAZ,CAAiBA,IAAjB;AACAP,kBAAE,QAAF,EAAY2C,IAAZ,CAAiB,cAAjB,EAAiCpC,IAAjC,CAAsC,MAAtC;AACAP,kBAAE,QAAF,EAAY2C,IAAZ,CAAiB,oBAAjB,EAAuCpC,IAAvC,CAA4C,MAAMD,KAAKyM,QAAX,GAAsB,QAAtB,GAAiCzM,KAAK0M,UAAtC,GAAmD,MAAnD,GAA4D1M,KAAK2M,OAAjE,GAA2E,UAAvH;AACA3M,qBAAK4M,KAAL,CAAWC,GAAX,CAAe,UAAUC,IAAV,EAAgB;AAC3BpN,sBAAE,aAAF,EAAiBqN,MAAjB,CAAwB,WAAWD,IAAX,GAAkB,SAA1C;AACH,iBAFD;AAGApN,kBAAE,iBAAF,EAAqBqN,MAArB,CAA4B,sLAA5B;AACArN,kBAAE,QAAF,EAAYoC,IAAZ;AACH,aAbD,MAaO;AACH;AACApC,kBAAEsN,IAAF,CAAO;AACHC,0BAAM,KADH;AAEHxJ,yBAAK7D,KAAK0L,gBAFP;AAGH4B,6BAAS,IAHN;AAIHC,6BAAS,UAAUnN,IAAV,EAAgB;AACrB,4BAAIA,QAAQA,KAAKyM,QAAL,KAAkBzM,KAAK0M,UAAnC,EAA+C;AAC3C,gCAAIF,UAAJ,EAAgB;AACZ1M,0CAAUyM,6BAAV,CAAwCvM,IAAxC,EAA8C,IAA9C;AACH;AACJ,yBAJD,MAIO,IAAIA,QAAQA,KAAKyM,QAAL,IAAiBzM,KAAK0M,UAA9B,IAA4CF,UAA5C,IAA0DxM,KAAKyM,QAAnE,EAA6E;AAChF;AACA3M,sCAAUkM,wBAAV,CAAmChM,IAAnC,EAAyC,IAAzC;AACH,yBAHM,MAGA,IAAIwM,UAAJ,EAAgB;AACnB;AACA1M,sCAAUsN,oBAAV,CAA+B,EAA/B,EAAmC,IAAnC;AACH;AACD1N,0BAAE,kBAAF,EAAsB2N,MAAtB,GAA+BhL,IAA/B,CAAoC,WAApC,EAAiDP,IAAjD;AACApC,0BAAE,kBAAF,EAAsBiB,WAAtB,CAAkC,WAAlC,EAA+CV,IAA/C,CAAoD,MAApD;AACH,qBAlBE;AAmBHqN,2BAAO,YAAY;AACf5J,gCAAQC,GAAR,CAAY,YAAZ;AACH;AArBE,iBAAP;AAuBH;AAEJ,SAhJW;AAiJZ;AACA4J,mCAA2B,UAAUvN,IAAV,EAAgBwM,UAAhB,EAA4B;AACnDN,mCAAuBR,UAAUC,WAAjC;AACA,gBAAI,OAAO3L,IAAP,KAAgB,WAAhB,IAA+BA,IAAnC,EAAyC;AACrC;AACA,oBAAImM,SAASzM,EAAE,wBAAF,EAA4BO,IAA5B,EAAb;AACA,oBAAImM,WAAWC,WAAWC,OAAX,CAAmBH,MAAnB,CAAf;AACA,oBAAIlM,OAAOmM,SAASpM,IAAT,CAAX;AACAN,kBAAE,QAAF,EAAYO,IAAZ,CAAiBA,IAAjB;AACAD,qBAAKwN,UAAL,CAAgBX,GAAhB,CAAoB,UAAUC,IAAV,EAAgB;AAChCpN,sBAAE,aAAF,EAAiBqN,MAAjB,CAAwB,WAAWD,IAAX,GAAkB,SAA1C;AACH,iBAFD;AAGA9M,qBAAKyN,QAAL,CAAcZ,GAAd,CAAkB,UAAUC,IAAV,EAAgB;AAC9BpN,sBAAE,aAAF,EAAiBqN,MAAjB,CAAwB,WAAWD,IAAX,GAAkB,SAA1C;AACH,iBAFD;AAGA9M,qBAAK0N,aAAL,CAAmBb,GAAnB,CAAuB,UAAUC,IAAV,EAAgB;AACnCpN,sBAAE,aAAF,EAAiBqN,MAAjB,CAAwB,UAAUD,IAAV,GAAiB,YAAzC;AACH,iBAFD;AAGApN,kBAAE,QAAF,EAAYoC,IAAZ;AACH,aAhBD,MAgBO;AACH;AACApC,kBAAEsN,IAAF,CAAO;AACHC,0BAAM,KADH;AAEHxJ,yBAAK7D,KAAKwL,YAFP;AAGH8B,6BAAS,IAHN;AAIHC,6BAAS,UAAUnN,IAAV,EAAgB;AACrB,4BAAIA,QAAQA,KAAKyM,QAAL,KAAkBzM,KAAK0M,UAAnC,EAA+C;AAC3C;AACA,gCAAIF,UAAJ,EAAgB;AACZ1M,0CAAUyN,yBAAV,CAAoCvN,IAApC,EAA0C,IAA1C;AACH;AACJ,yBALD,MAKO,IAAIA,QAAQA,KAAKyM,QAAL,IAAiBzM,KAAK0M,UAA9B,IAA4CF,UAA5C,IAA0DxM,KAAKyM,QAAnE,EAA6E;AAChF;AACA3M,sCAAUkM,wBAAV,CAAmChM,IAAnC,EAAyC,KAAzC;AACH,yBAHM,MAGA,IAAIwM,UAAJ,EAAgB;AACnB;AACA1M,sCAAUsN,oBAAV,CAA+B,EAA/B,EAAmC,KAAnC;AACH;AACD1N,0BAAE,kBAAF,EAAsB2N,MAAtB,GAA+BhL,IAA/B,CAAoC,WAApC,EAAiDP,IAAjD;AACApC,0BAAE,kBAAF,EAAsBiB,WAAtB,CAAkC,WAAlC,EAA+CV,IAA/C,CAAoD,MAApD;AACH,qBAnBE;AAoBHqN,2BAAO,YAAY;AACf5J,gCAAQC,GAAR,CAAY,YAAZ;AACH;AAtBE,iBAAP;AAwBH;AAEJ,SAhMW;AAiMZ;AACAyJ,8BAAsB,UAAU7I,GAAV,EAAe0H,KAAf,EAAsB;AACxC,gBAAIE,SAASzM,EAAE,wBAAF,EAA4BO,IAA5B,EAAb;AACA,gBAAImM,WAAWC,WAAWC,OAAX,CAAmBH,MAAnB,CAAf;AACA,gBAAIlM,OAAOmM,UAAX;AACA1M,cAAE,QAAF,EAAYO,IAAZ,CAAiBA,IAAjB;AACAP,cAAE,WAAF,EAAeO,IAAf,CAAoB,OAApB;AACA,gBAAI,OAAOsE,GAAP,KAAe,WAAf,IAA8BA,IAAI7D,MAAtC,EAA8C;AAC1ChB,kBAAE,iBAAF,EAAqBqN,MAArB,CAA4B,oCAAoCxI,GAApC,GAA0C,QAAtE;AACH;AACD,gBAAI,OAAO0H,KAAP,KAAiB,WAAjB,IAAgCA,KAApC,EAA2C;AACvCvM,kBAAE,QAAF,EAAY2C,IAAZ,CAAiB,cAAjB,EAAiCpC,IAAjC,CAAsC,MAAtC;AACAP,kBAAE,iBAAF,EAAqBqN,MAArB,CAA4B,sLAA5B;AACAb,uCAAuBR,UAAUE,WAAjC;AACH,aAJD,MAIO;AACHM,uCAAuBR,UAAUC,WAAjC;AACH;AACDjM,cAAE,QAAF,EAAYoC,IAAZ;AACH,SAnNW;AAoNZ;AACA6L,8BAAsB,UAAU1B,KAAV,EAAiB;AACnC,gBAAIE,SAASzM,EAAE,wBAAF,EAA4BO,IAA5B,EAAb;AACA,gBAAImM,WAAWC,WAAWC,OAAX,CAAmBH,MAAnB,CAAf;AACA,gBAAIlM,OAAOmM,UAAX;AACA1M,cAAE,QAAF,EAAYO,IAAZ,CAAiBA,IAAjB;AACAP,cAAE,QAAF,EAAY2C,IAAZ,CAAiB,YAAjB,EAA+BpC,IAA/B,CAAoC,QAApC,EAA8CiB,QAA9C,CAAuD,aAAvD;AACA,gBAAI,OAAO+K,KAAP,KAAiB,WAAjB,IAAgCA,KAApC,EAA2C;AACvCvM,kBAAE,QAAF,EAAY2C,IAAZ,CAAiB,cAAjB,EAAiCpC,IAAjC,CAAsC,MAAtC;AACAP,kBAAE,QAAF,EAAY2C,IAAZ,CAAiB,oBAAjB,EAAuCpC,IAAvC,CAA4C,yCAA5C;AACH,aAHD,MAGO;AACHP,kBAAE,QAAF,EAAY2C,IAAZ,CAAiB,oBAAjB,EAAuCpC,IAAvC,CAA4C,yCAA5C;AACH;AACDP,cAAE,QAAF,EAAYoC,IAAZ;AACH,SAlOW;AAmOZ;AACA8L,+BAAuB,UAAU3B,KAAV,EAAiB;AACpC,gBAAI,OAAOA,KAAP,KAAiB,WAAjB,IAAgCA,KAApC,EAA2C;AACvCP,0BAAUE,WAAV,GAAwBiC,YAAY,YAAY;AAC5CC,uCAAmB,IAAnB;AACH,iBAFuB,EAErB,IAFqB,CAAxB;AAGH,aAJD,MAIO;AACHpC,0BAAUC,WAAV,GAAwBkC,YAAY,YAAY;AAC5CE,mCAAe,IAAf;AACH,iBAFuB,EAErB,IAFqB,CAAxB;AAGH;AACJ,SA9OW;AA+OZ;AACAC,8BAAsB,UAAUhO,IAAV,EAAgBiO,UAAhB,EAA4B;AAC9C,gBAAIjO,QAAQ,CAAZ,EAAe;AACX;AACAuL,6BAAaC,SAAb,GAAyB,CAAzB;AACA9L,kBAAE,kBAAF,EAAsBwB,QAAtB,CAA+B,WAA/B,EAA4CjB,IAA5C,CAAiD,QAAjD;AACAP,kBAAE,kBAAF,EAAsB2N,MAAtB,GAA+BhL,IAA/B,CAAoC,UAApC,EAAgD1C,IAAhD;AACH,aALD,MAKO,IAAIK,QAAQ,CAAZ,EAAe;AAClB;AACA;AACAuL,6BAAaC,SAAb,GAAyB,CAAzB;AACA9L,kBAAE,kBAAF,EAAsBiB,WAAtB,CAAkC,WAAlC,EAA+CV,IAA/C,CAAoD,MAApD;AACA;AACA;AACA,oBAAI,OAAOgO,UAAP,KAAsB,WAAtB,IAAqCA,UAAzC,EAAqD;AACjDnO,8BAAUyN,yBAAV,CAAoC,IAApC,EAA0CU,UAA1C;AACH,iBAFD,MAEO;AACHnO,8BAAUyN,yBAAV;AACH;AACJ,aAZM,MAYA;AACHhC,6BAAaC,SAAb,GAAyB,CAAC,GAA1B;AACH;AAEJ,SAtQW;AAuQZ;AACA0C,kCAA0B,UAAUlO,IAAV,EAAgBiO,UAAhB,EAA4B;AAClD,gBAAIjO,QAAQ,CAAZ,EAAe;AACX;AACAuL,6BAAaE,SAAb,GAAyB,CAAzB;AACA/L,kBAAE,kBAAF,EAAsBwB,QAAtB,CAA+B,WAA/B,EAA4CjB,IAA5C,CAAiD,QAAjD;AACAP,kBAAE,kBAAF,EAAsB2N,MAAtB,GAA+BhL,IAA/B,CAAoC,UAApC,EAAgD1C,IAAhD;AACH,aALD,MAKO,IAAIK,QAAQ,CAAZ,EAAe;AAClB;AACA;AACAuL,6BAAaE,SAAb,GAAyB,CAAzB;AACA/L,kBAAE,kBAAF,EAAsBiB,WAAtB,CAAkC,WAAlC,EAA+CV,IAA/C,CAAoD,MAApD;AACA;AACA;AACA,oBAAI,OAAOgO,UAAP,KAAsB,WAAtB,IAAqCA,UAAzC,EAAqD;AACjDnO,8BAAUyM,6BAAV,CAAwC,IAAxC,EAA8C0B,UAA9C;AACH,iBAFD,MAEO;AACHnO,8BAAUyM,6BAAV;AACH;AACJ,aAZM,MAYA;AACHhB,6BAAaE,SAAb,GAAyB,CAAC,GAA1B;AACH;AAEJ,SA9RW;AA+RZ0C,wBAAgB,UAAUC,KAAV,EAAiB7J,GAAjB,EAAsB;AAClC,gBAAI4H,SAASzM,EAAE,wBAAF,EAA4BO,IAA5B,EAAb;AACA,gBAAImM,WAAWC,WAAWC,OAAX,CAAmBH,MAAnB,CAAf;AACA,gBAAIlM,OAAOmM,UAAX;AACA1M,cAAE,QAAF,EAAYO,IAAZ,CAAiBA,IAAjB;AACAP,cAAE,QAAF,EAAY2C,IAAZ,CAAiB,cAAjB,EAAiCpC,IAAjC,CAAsCmO,KAAtC;AACA1O,cAAE,QAAF,EAAY2C,IAAZ,CAAiB,WAAjB,EAA8BpC,IAA9B,CAAmCsE,GAAnC;AACH;;AAtSW,KAAhB;;AA2SA;;;;;AAKA,QAAIE,cAAc,UAAUpE,IAAV,EAAgB;AAC9B,YAAIqE,aAAarE,KAAK8D,OAAL,CAAa,UAAb,EAAyB9B,IAAzB,CAA8B,gBAA9B,CAAjB;AACA,YAAIsC,UAAUD,WAAWP,OAAX,CAAmB,UAAnB,EAA+B9B,IAA/B,CAAoC,WAApC,CAAd;AACA,YAAID,WAAW,EAAf;AACA;AACA;AACA;AACA;AACA;AACAsC,mBAAWrC,IAAX,CAAgB,OAAhB,EAAyBzB,IAAzB,CAA8B,YAAY;AACtC,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA,gBAAI4C,KAAKC,GAAL,EAAJ,EAAgB;AACZ,oBAAIC,YAAYF,KAAKhC,IAAL,CAAU,MAAV,CAAhB;AACA,oBAAImC,YAAY/C,EAAE2O,IAAF,CAAO/L,KAAKC,GAAL,EAAP,CAAhB;AACAH,yBAASI,SAAT,IAAsBC,SAAtB;AACH;AACJ,SAPD;AAQA;AACAiC,mBAAWrC,IAAX,CAAgB,QAAhB,EAA0BA,IAA1B,CAA+B,iBAA/B,EAAkDzB,IAAlD,CAAuD,YAAY;AAC/D,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA,gBAAI4C,KAAKC,GAAL,EAAJ,EAAgB;AACZ,oBAAIC,YAAYF,KAAKtC,IAAL,EAAhB;AACA,qBAAK,IAAIa,CAAT,IAAc2B,SAAd,EAAyB;AACrBJ,6BAASvB,CAAT,IAAc2B,UAAU3B,CAAV,CAAd;AACH;AACJ;AACJ,SARD;AASA,eAAOuB,QAAP;AACH,KA5BD;AA6BA;;;;;AAKA,QAAIkM,mBAAmB,UAAUjO,IAAV,EAAgB;AACnC,YAAIqE,aAAarE,KAAK8D,OAAL,CAAa,QAAb,EAAuB9B,IAAvB,CAA4B,gBAA5B,CAAjB;AACA,YAAID,WAAW,EAAf;AACA;AACAsC,mBAAWrC,IAAX,CAAgB,OAAhB,EAAyBzB,IAAzB,CAA8B,YAAY;AACtC,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA,gBAAI4C,KAAKC,GAAL,EAAJ,EAAgB;AACZ,oBAAIC,YAAYF,KAAKhC,IAAL,CAAU,MAAV,CAAhB;AACA,oBAAImC,YAAY/C,EAAE2O,IAAF,CAAO/L,KAAKC,GAAL,EAAP,CAAhB;AACAH,yBAASI,SAAT,IAAsBC,SAAtB;AACH;AACJ,SAPD;AAQA;AACAiC,mBAAWrC,IAAX,CAAgB,QAAhB,EAA0BA,IAA1B,CAA+B,iBAA/B,EAAkDzB,IAAlD,CAAuD,YAAY;AAC/D,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA,gBAAI4C,KAAKC,GAAL,EAAJ,EAAgB;AACZ,oBAAIC,YAAYF,KAAKtC,IAAL,EAAhB;AACA,qBAAK,IAAIa,CAAT,IAAc2B,SAAd,EAAyB;AACrBJ,6BAASvB,CAAT,IAAc2B,UAAU3B,CAAV,CAAd;AACH;AACJ;AACJ,SARD;AASA,eAAOuB,QAAP;AACH,KAvBD;AAwBA,QAAID,cAAc,UAAU9B,IAAV,EAAgB;AAC9B,YAAI+B,WAAW,EAAf;AACA/B,aAAKgC,IAAL,CAAU,OAAV,EAAmBzB,IAAnB,CAAwB,YAAY;AAChC,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA,gBAAI4C,KAAKC,GAAL,EAAJ,EAAgB;AACZ,oBAAIC,YAAY9C,EAAE,IAAF,EAAQY,IAAR,CAAa,MAAb,CAAhB;AACA,oBAAImC,YAAY/C,EAAE,IAAF,EAAQ6C,GAAR,EAAhB;AACAH,yBAASI,SAAT,IAAsBC,SAAtB;AACH;AACJ,SAPD;AAQA,eAAOL,QAAP;AACH,KAXD;AAYA;;;AAGA,QAAIwC,WAAW,UAAUvE,IAAV,EAAgB;AAC3B,YAAIiC,OAAOjC,IAAX;AACA,YAAI+B,WAAW,EAAf;AACA,YAAIyC,QAAQvC,KAAK6B,OAAL,CAAa,WAAb,EAA0B7D,IAA1B,CAA+B,MAA/B,CAAZ;AACA,YAAIwE,SAASxC,KAAKhC,IAAL,CAAU,OAAV,CAAb;AACA,YAAIyE,QAAQzC,KAAK6B,OAAL,CAAa,WAAb,EAA0BnE,IAA1B,EAAZ;AACAoC,mBAAWqC,YAAYpE,KAAK8D,OAAL,CAAa,UAAb,EAAyB9B,IAAzB,CAA8B,aAA9B,CAAZ,CAAX;AACAD,mBAAW2C,KAAX;AACA3C,iBAASyC,KAAT,IAAkBC,MAAlB;AACA,eAAO1C,QAAP;AACH,KAVD;;AAYA,QAAI4C,YAAY,UAAU3E,IAAV,EAAgB;AAC5B,YAAIiC,OAAOjC,IAAX;AACA,YAAI+B,WAAW,EAAf;AACA,YAAIyC,QAAQvC,KAAK6B,OAAL,CAAa,WAAb,EAA0B7D,IAA1B,CAA+B,MAA/B,CAAZ;AACA,YAAIwE,SAASxC,KAAKhC,IAAL,CAAU,OAAV,CAAb;AACA8B,mBAAWqC,YAAYpE,KAAK8D,OAAL,CAAa,UAAb,EAAyB9B,IAAzB,CAA8B,aAA9B,CAAZ,CAAX;AACAD,iBAASyC,KAAT,IAAkBC,MAAlB;AACA,eAAO1C,QAAP;AACH,KARD;AASA;;;AAGA,QAAI6C,aAAa,UAAU5E,IAAV,EAAgB;AAC7B,YAAI6E,WAAW,IAAf;;AAEA,YAAI7E,KAAK8D,OAAL,CAAa,IAAb,EAAmBzD,MAAnB,IAA6B,CAAjC,EAAoC;AAChCwE,uBAAW7E,KAAK8D,OAAL,CAAa,IAAb,EAAmBnE,IAAnB,EAAX;AACH,SAFD,MAEO,IAAIK,KAAK8D,OAAL,CAAa,IAAb,EAAmBzD,MAAnB,IAA6B,CAAjC,EAAoC;AACvCwE,uBAAW7E,KAAK8D,OAAL,CAAa,IAAb,EAAmBnE,IAAnB,EAAX;AACH;AACD,YAAIkF,QAAJ,EAAc;AACV,mBAAOA,QAAP;AACH;AAEJ,KAZD;AAaA;;;AAGA,QAAIC,aAAa,UAAU9E,IAAV,EAAgB;AAC7B,YAAI+B,WAAW,EAAf;AACA,YAAI8C,WAAW,EAAf;AACA,YAAIE,YAAY,EAAhB;AACA,YAAIC,UAAU,IAAd;AACA,YAAIC,UAAU,IAAd;AACAC,mBAAWlF,KAAK8D,OAAL,CAAa,eAAb,CAAX;AACA,YAAIqB,YAAYD,SAASlD,IAAT,CAAc,kBAAd,EAAkCA,IAAlC,CAAuC,IAAvC,CAAhB;AACA,YAAImD,UAAU9E,MAAV,IAAoB,CAAxB,EAA2B;AACvBhB,cAAEkB,IAAF,CAAO4E,SAAP,EAAkB,UAAU3E,CAAV,EAAa;AAC3BuB,2BAAWoD,UAAUC,EAAV,CAAa5E,CAAb,EAAgBb,IAAhB,CAAqB,KAArB,CAAX;AACA,oBAAIoC,QAAJ,EAAc;AACVgD,8BAAUM,IAAV,CAAetD,QAAf;AACH;AACJ,aALD;AAMAkD,sBAAUF,UAAUO,IAAV,CAAe,GAAf,CAAV;AACAN,sBAAU,KAAV;AACAH,qBAASG,OAAT,IAAoBC,OAApB;AAEH;AACDC,iBAASlD,IAAT,CAAc,kBAAd,EAAkCzB,IAAlC,CAAuC,YAAY;AAC/CyE,sBAAUE,SAASlD,IAAT,CAAc,kBAAd,EAAkC/B,IAAlC,CAAuC,MAAvC,CAAV;AACAgF,sBAAUC,SAASlD,IAAT,CAAc,kBAAd,EAAkCE,GAAlC,EAAV;AACA2C,qBAASG,OAAT,IAAoBC,OAApB;AACH,SAJD;AAKAC,iBAASlD,IAAT,CAAc,UAAd,EAA0BzB,IAA1B,CAA+B,YAAY;AACvCyE,sBAAUE,SAASlD,IAAT,CAAc,UAAd,EAA0B/B,IAA1B,CAA+B,MAA/B,CAAV;AACAgF,sBAAUC,SAASlD,IAAT,CAAc,UAAd,EAA0BE,GAA1B,EAAV;AACA2C,qBAASG,OAAT,IAAoBC,OAApB;AACH,SAJD;AAKAC,iBAASlD,IAAT,CAAc,QAAd,EAAwBA,IAAxB,CAA6B,iBAA7B,EAAgDzB,IAAhD,CAAqD,YAAY;AAC7D,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA,gBAAI4C,KAAKC,GAAL,EAAJ,EAAgB;AACZ,oBAAI+C,UAAUhD,KAAKtC,IAAL,EAAd;AACA,qBAAK,IAAIa,CAAT,IAAcyE,OAAd,EAAuB;AACnBJ,6BAASrE,CAAT,IAAcyE,QAAQzE,CAAR,CAAd;AACH;AACJ;AACJ,SARD;;AAUA,eAAOqE,QAAP;AAEH,KA1CD;AA2CA;;;AAGA,QAAIU,aAAa,UAAUvF,IAAV,EAAgB;AAC7B,YAAIwF,YAAYxF,KAAK8D,OAAL,CAAa,QAAb,CAAhB;AACA,YAAIkB,UAAU,IAAd;AACA,YAAIC,UAAU,IAAd;AACA,YAAIQ,aAAa,EAAjB;AACA,YAAIZ,WAAW7E,KAAKL,IAAL,EAAf;AACA6F,kBAAUxD,IAAV,CAAe,kBAAf,EAAmCzB,IAAnC,CAAwC,YAAY;AAChDyE,sBAAU3F,EAAE,IAAF,EAAQY,IAAR,CAAa,MAAb,CAAV;AACAgF,sBAAU5F,EAAE,IAAF,EAAQ6C,GAAR,EAAV;AACA2C,qBAASG,OAAT,IAAoBC,OAApB;AACH,SAJD;AAKAO,kBAAUxD,IAAV,CAAe,8BAAf,EAA+CzB,IAA/C,CAAoD,YAAY;AAC5D,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA2F,sBAAU/C,KAAKhC,IAAL,CAAU,MAAV,CAAV;AACAgF,sBAAUhD,KAAKC,GAAL,EAAV;AACAuD,uBAAWJ,IAAX,CAAgBJ,OAAhB;AACAJ,qBAASG,OAAT,IAAoBS,WAAWH,IAAX,CAAgB,GAAhB,CAApB;AACH,SAND;AAOAE,kBAAUxD,IAAV,CAAe,2BAAf,EAA4CzB,IAA5C,CAAiD,YAAY;AACzD,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA2F,sBAAU/C,KAAKhC,IAAL,CAAU,MAAV,CAAV;AACAgF,sBAAUhD,KAAKC,GAAL,EAAV;AACA2C,qBAASG,OAAT,IAAoBC,OAApB;AACH,SALD;AAMAO,kBAAUxD,IAAV,CAAe,UAAf,EAA2BzB,IAA3B,CAAgC,YAAY;AACxCyE,sBAAU3F,EAAE,IAAF,EAAQY,IAAR,CAAa,MAAb,CAAV;AACAgF,sBAAU5F,EAAE,IAAF,EAAQ6C,GAAR,EAAV;AACA2C,qBAASG,OAAT,IAAoBC,OAApB;AACH,SAJD;AAKAO,kBAAUxD,IAAV,CAAe,QAAf,EAAyBA,IAAzB,CAA8B,iBAA9B,EAAiDzB,IAAjD,CAAsD,YAAY;AAC9D,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA,gBAAI4C,KAAKC,GAAL,EAAJ,EAAgB;AACZ,oBAAI+C,UAAUhD,KAAKtC,IAAL,EAAd;AACA,qBAAK,IAAIa,CAAT,IAAcyE,OAAd,EAAuB;AACnBJ,6BAASrE,CAAT,IAAcyE,QAAQzE,CAAR,CAAd;AACH;AACJ;AACJ,SARD;AASA,eAAOqE,QAAP;AACH,KAvCD;AAwCA;;;;AAIA,QAAIa,cAAc,UAAU1F,IAAV,EAAgB;AAC9B,YAAI+B,QAAJ;AACA,YAAIgD,YAAY,EAAhB;AACA,YAAII,YAAYnF,KAAK8D,OAAL,CAAa,gCAAb,EAA+C6B,QAA/C,CAAwD,cAAxD,EAAwE3D,IAAxE,CAA6E,kBAA7E,EAAiGA,IAAjG,CAAsG,8BAAtG,CAAhB;AACA3C,UAAEkB,IAAF,CAAO4E,SAAP,EAAkB,UAAU3E,CAAV,EAAa;AAC3BuB,uBAAWoD,UAAUC,EAAV,CAAa5E,CAAb,EAAgBsD,OAAhB,CAAwB,IAAxB,EAA8BnE,IAA9B,CAAmC,KAAnC,CAAX;AACA,gBAAIoC,QAAJ,EAAc;AACVgD,0BAAUM,IAAV,CAAetD,QAAf;AACH;AACJ,SALD;AAMA,eAAOgD,SAAP;AACH,KAXD;;AAaA;;;;;;AAMA,QAAIa,eAAe,UAAU5F,IAAV,EAAgB;AAC/B,YAAI6F,SAAS,IAAb;AACA,YAAIC,YAAY,IAAhB;AACA,YAAIC,eAAe,IAAnB;AACA,YAAIhE,WAAW,IAAf;AACA,YAAIgD,YAAY,EAAhB;AACA,YAAII,YAAYnF,KAAK8D,OAAL,CAAa,gCAAb,EAA+C6B,QAA/C,CAAwD,cAAxD,EAAwE3D,IAAxE,CAA6E,kBAA7E,EAAiGA,IAAjG,CAAsG,gDAAtG,CAAhB;AACA3C,UAAEkB,IAAF,CAAO4E,SAAP,EAAkB,UAAU3E,CAAV,EAAa;AAC3BuF,2BAAe,EAAf;AACAF,qBAASV,UAAUC,EAAV,CAAa5E,CAAb,EAAgBsD,OAAhB,CAAwB,IAAxB,EAA8BnE,IAA9B,EAAT;AACAmG,wBAAYX,UAAUC,EAAV,CAAa5E,CAAb,EAAgBsD,OAAhB,CAAwB,IAAxB,EAA8B9B,IAA9B,CAAmC,QAAnC,EAA6CA,IAA7C,CAAkD,iBAAlD,EAAqErC,IAArE,EAAZ;AACA,iBAAK,IAAIqG,CAAT,IAAcH,MAAd,EAAsB;AAClBE,6BAAaC,CAAb,IAAkBH,OAAOG,CAAP,CAAlB;AACH;AACD,iBAAK,IAAIC,CAAT,IAAcH,SAAd,EAAyB;AACrBC,6BAAaE,CAAb,IAAkBH,UAAUG,CAAV,CAAlB;AACH;AACDlB,sBAAUM,IAAV,CAAeU,YAAf;AACH,SAXD;;AAaA,eAAOhB,SAAP;AACH,KArBD;;AAuBA;;;;;AAKA,QAAImB,YAAY,UAAUlG,IAAV,EAAgBmG,UAAhB,EAA4B;AACxC,YAAIC,aAAaD,UAAjB;AACA,YAAInB,UAAU,IAAd;AACA,YAAIC,UAAU,IAAd;AACA,YAAIQ,aAAa,EAAjB;AACA,YAAIZ,WAAW7E,KAAKL,IAAL,EAAf;AACAyG,mBAAWpE,IAAX,CAAgB,kBAAhB,EAAoCzB,IAApC,CAAyC,YAAY;AACjDyE,sBAAU3F,EAAE,IAAF,EAAQY,IAAR,CAAa,MAAb,CAAV;AACAgF,sBAAU5F,EAAE,IAAF,EAAQ6C,GAAR,EAAV;AACA2C,qBAASG,OAAT,IAAoBC,OAApB;AACH,SAJD;AAKAmB,mBAAWpE,IAAX,CAAgB,8BAAhB,EAAgDzB,IAAhD,CAAqD,YAAY;AAC7D,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA2F,sBAAU/C,KAAKhC,IAAL,CAAU,MAAV,CAAV;AACAgF,sBAAUhD,KAAKC,GAAL,EAAV;AACAuD,uBAAWJ,IAAX,CAAgBJ,OAAhB;AACAJ,qBAASG,OAAT,IAAoBS,WAAWH,IAAX,CAAgB,GAAhB,CAApB;AACH,SAND;AAOAc,mBAAWpE,IAAX,CAAgB,2BAAhB,EAA6CzB,IAA7C,CAAkD,YAAY;AAC1D,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA2F,sBAAU/C,KAAKhC,IAAL,CAAU,MAAV,CAAV;AACAgF,sBAAUhD,KAAKC,GAAL,EAAV;AACA2C,qBAASG,OAAT,IAAoBC,OAApB;AACH,SALD;AAMAmB,mBAAWpE,IAAX,CAAgB,UAAhB,EAA4BzB,IAA5B,CAAiC,YAAY;AACzCyE,sBAAU3F,EAAE,IAAF,EAAQY,IAAR,CAAa,MAAb,CAAV;AACAgF,sBAAU5F,EAAE,IAAF,EAAQ6C,GAAR,EAAV;AACA2C,qBAASG,OAAT,IAAoBC,OAApB;AACH,SAJD;AAKAmB,mBAAWpE,IAAX,CAAgB,QAAhB,EAA0BA,IAA1B,CAA+B,iBAA/B,EAAkDzB,IAAlD,CAAuD,YAAY;AAC/D,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA,gBAAI4C,KAAKC,GAAL,EAAJ,EAAgB;AACZ,oBAAI+C,UAAUhD,KAAKtC,IAAL,EAAd;AACA,qBAAK,IAAIa,CAAT,IAAcyE,OAAd,EAAuB;AACnBJ,6BAASrE,CAAT,IAAcyE,QAAQzE,CAAR,CAAd;AACH;AACJ;AACJ,SARD;AASA,eAAOqE,QAAP;AACH,KAvCD;;AA2CA;;;;;AAKA,QAAIwB,WAAW,UAAUrG,IAAV,EAAgB;AAC3B,YAAIsG,WAAWtG,KAAK8D,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,SAAxB,CAAf;AACAsE,iBAAS/F,IAAT,CAAc,YAAY;AACtB,gBAAIgG,QAAQlH,EAAE,IAAF,CAAZ;AACA,gBAAImH,SAAS,IAAb;AACA,gBAAI0H,UAAU,IAAd;AACA,gBAAIzH,WAAWF,MAAM5G,IAAN,CAAW,MAAX,CAAf;AACA,gBAAIwO,WAAW5H,MAAM5G,IAAN,CAAW,MAAX,CAAf;AACA,oBAAQ8G,QAAR;AACI,qBAAK,OAAL;AACID,6BAASD,MAAMG,IAAN,EAAT;AACA,wBAAIF,UAAU,IAAd,EAAoB;AAChBA,iCAAS,EAAT;AACH;AACD0H,8BAAU3H,MAAMtG,IAAN,CAAW,MAAX,CAAV;AACA,wBAAIkO,YAAY,MAAhB,EAAwB;AACpB5H,8BAAMjG,WAAN,CAAkB,QAAlB,EAA4BO,QAA5B,CAAqC,WAArC,EAAkDjB,IAAlD,CAAuD,oDAAoDsO,OAApD,GAA8D,WAA9D,GAA4E1H,MAA5E,GAAqF,IAA5I;AACH,qBAFD,MAEO;AACHD,8BAAMjG,WAAN,CAAkB,QAAlB,EAA4BO,QAA5B,CAAqC,WAArC,EAAkDjB,IAAlD,CAAuD,qDAAqDsO,OAArD,GAA+D,WAA/D,GAA6E1H,MAA7E,GAAsF,IAA7I;AACH;AACD;AACJ,qBAAK,QAAL;AACIA,6BAASD,MAAM5G,IAAN,CAAW,MAAX,CAAT;AACA,wBAAIgH,aAAaJ,MAAM5G,IAAN,CAAW,QAAX,EAAqBiH,KAArB,CAA2B,GAA3B,CAAjB;AACA,wBAAIC,YAAYN,MAAM5G,IAAN,CAAW,OAAX,EAAoBiH,KAApB,CAA0B,GAA1B,CAAhB;AACA,wBAAIE,UAAU,UAAd;AACA,yBAAK,IAAItG,CAAT,IAAcmG,UAAd,EAA0B;AACtBG,mCAAW,oBAAoBD,UAAUrG,CAAV,CAApB,GAAmC,aAAnC,GAAmDmG,WAAWnG,CAAX,CAAnD,GAAmE,GAAnE,GAAyEmG,WAAWnG,CAAX,CAAzE,GAAyF,WAApG;AACH;AACDsG,+BAAW,WAAX;AACAP,0BAAMjG,WAAN,CAAkB,QAAlB,EAA4BO,QAA5B,CAAqC,WAArC,EAAkDjB,IAAlD,CAAuDkH,OAAvD,EAAgE9E,IAAhE,CAAqE,QAArE,EAA+EE,GAA/E,CAAmFsE,MAAnF;AACA;AACJ;AACI;AAzBR;AA2BH,SAjCD;AAkCH,KApCD;;AAuCA;;;;;;;;AAQA,QAAIO,WAAW,UAAU/G,IAAV,EAAgBgH,MAAhB,EAAwB5D,GAAxB,EAA6BrB,QAA7B,EAAuCY,IAAvC,EAA6C;AACxD,YAAIsE,cAAcjH,KAAK8D,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,YAAxB,CAAlB;AACAiF,oBAAY1G,IAAZ,CAAiB,YAAY;AACzB,gBAAIgG,QAAQlH,EAAE,IAAF,CAAZ;AACA,gBAAI6H,UAAU,IAAd;AACA,gBAAIC,UAAU,IAAd;AACA,gBAAIV,WAAWF,MAAM5G,IAAN,CAAW,MAAX,CAAf;AACA,oBAAQ8G,QAAR;AACI,qBAAK,OAAL;AACIS,8BAAUX,MAAMvE,IAAN,CAAW,OAAX,EAAoBE,GAApB,EAAV;AACAqE,0BAAM3G,IAAN,CAAWsH,OAAX,EAAoB5G,WAApB,CAAgC,WAAhC,EAA6CO,QAA7C,CAAsD,QAAtD;AACA;AACJ,qBAAK,QAAL;AACIqG,8BAAUX,MAAMvE,IAAN,CAAW,iBAAX,EAA8BrC,IAA9B,CAAmC,MAAnC,CAAV;AACAwH,8BAAUZ,MAAMvE,IAAN,CAAW,iBAAX,EAA8BE,GAA9B,EAAV;AACAqE,0BAAM3G,IAAN,CAAWsH,OAAX,EAAoBvH,IAApB,CAAyB,MAAzB,EAAiCwH,OAAjC,EAA0C7G,WAA1C,CAAsD,WAAtD,EAAmEO,QAAnE,CAA4E,QAA5E;AACA;AACJ;AACI;AAXR;AAaH,SAlBD;AAmBA,YAAImG,MAAJ,EAAY;AACRhH,iBAAKwC,QAAL,CAAc;AACVC,0BAAUW,GADA;AAEVV,sBAAMX,QAFI;AAGVY,sBAAMA;AAHI,aAAd;AAKH;AAEJ,KA7BD;AA8BA;;;;AAIA,QAAIyE,YAAY,EAAhB;AACA;;;;;AAKA,QAAIC,WAAW,UAAUrH,IAAV,EAAgBsH,QAAhB,EAA0B;AACrCF,oBAAY,EAAZ;AACA,YAAIE,YAAY,OAAhB,EAAyB;AACrBtH,iBAAK8D,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,eAAxB,EAAyCzB,IAAzC,CAA8C,YAAY;AACtD6G,0BAAU/B,IAAV,CAAehG,EAAE,IAAF,EAAQqH,IAAR,EAAf;AACH,aAFD;AAGH,SAJD,MAIO,IAAIY,YAAY,OAAhB,EAAyB;AAC5BtH,iBAAK8D,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,eAAxB,EAAyCzB,IAAzC,CAA8C,YAAY;AACtD6G,0BAAU/B,IAAV,CAAehG,EAAE,IAAF,EAAQ2C,IAAR,CAAa,OAAb,EAAsBE,GAAtB,EAAf;AACH,aAFD;AAGH;AACJ,KAXD;AAYA;;;;AAIA,QAAIqF,YAAY,UAAUvH,IAAV,EAAgB;AAC5B;AACAA,aAAK8D,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,eAAxB,EAAyCzB,IAAzC,CAA8C,UAAUC,CAAV,EAAa;AACvDnB,cAAE,IAAF,EAAQ2C,IAAR,CAAa,OAAb,EAAsBE,GAAtB,CAA0BkF,UAAU5G,CAAV,CAA1B;AACH,SAFD;AAIH,KAND;;AAQA;;;;;;AAMA,QAAIgH,cAAc,UAAUxH,IAAV,EAAgBoG,UAAhB,EAA4B;AAC1C,YAAIvB,WAAW7E,KAAKL,IAAL,EAAf;AACAyG,mBAAWpE,IAAX,CAAgB,UAAhB,EAA4BzB,IAA5B,CAAiC,YAAY;AACzCyE,sBAAU3F,EAAE,IAAF,EAAQY,IAAR,CAAa,MAAb,CAAV;AACAgF,sBAAU5F,EAAE,IAAF,EAAQ6C,GAAR,EAAV;AACA2C,qBAASG,OAAT,IAAoBC,OAApB;AACH,SAJD;AAKAmB,mBAAWpE,IAAX,CAAgB,kBAAhB,EAAoCzB,IAApC,CAAyC,YAAY;AACjDyE,sBAAU3F,EAAE,IAAF,EAAQY,IAAR,CAAa,MAAb,CAAV;AACAgF,sBAAU5F,EAAE,IAAF,EAAQ6C,GAAR,EAAV;AACA2C,qBAASG,OAAT,IAAoBC,OAApB;AACH,SAJD;AAKAmB,mBAAWpE,IAAX,CAAgB,8BAAhB,EAAgDzB,IAAhD,CAAqD,YAAY;AAC7D,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA2F,sBAAU/C,KAAKhC,IAAL,CAAU,MAAV,CAAV;AACAgF,sBAAUhD,KAAKC,GAAL,EAAV;AACAuD,uBAAWJ,IAAX,CAAgBJ,OAAhB;AACAJ,qBAASG,OAAT,IAAoBS,WAAWH,IAAX,CAAgB,GAAhB,CAApB;AACH,SAND;AAOAc,mBAAWpE,IAAX,CAAgB,2BAAhB,EAA6CzB,IAA7C,CAAkD,YAAY;AAC1D,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA2F,sBAAU/C,KAAKhC,IAAL,CAAU,MAAV,CAAV;AACAgF,sBAAUhD,KAAKC,GAAL,EAAV;AACA2C,qBAASG,OAAT,IAAoBC,OAApB;AACH,SALD;AAMAmB,mBAAWpE,IAAX,CAAgB,QAAhB,EAA0BA,IAA1B,CAA+B,iBAA/B,EAAkDzB,IAAlD,CAAuD,YAAY;AAC/D,gBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA,gBAAI4C,KAAKC,GAAL,EAAJ,EAAgB;AACZ,oBAAI+C,UAAUhD,KAAKtC,IAAL,EAAd;AACA,qBAAK,IAAIa,CAAT,IAAcyE,OAAd,EAAuB;AACnBJ,6BAASrE,CAAT,IAAcyE,QAAQzE,CAAR,CAAd;AACH;AACJ;AACJ,SARD;AASA,eAAOqE,QAAP;AACH,KAnCD;;AAsCA;;;AAGA,QAAI6I,iBAAiB,UAAUE,UAAV,EAAsB;AACvCvO,UAAEsN,IAAF,CAAO;AACHvJ,iBAAK7D,KAAK2L,YADP;AAEH0B,kBAAM,KAFH;AAGHC,qBAAS,IAHN;AAIHC,qBAAS,UAAUnN,IAAV,EAAgB;AACrBF,0BAAUkO,oBAAV,CAA+BhO,IAA/B,EAAqCiO,UAArC;AACH,aANE;AAOHX,mBAAO,UAAUtN,IAAV,EAAgB;AACnBkM,uCAAuBR,UAAUC,WAAjC;AACH;AATE,SAAP;AAWH,KAZD;AAaA;;;AAGA,QAAImC,qBAAqB,UAAUG,UAAV,EAAsB;AAC3CvO,UAAEsN,IAAF,CAAO;AACHvJ,iBAAK7D,KAAK6O,gBADP;AAEHxB,kBAAM,KAFH;AAGHC,qBAAS,IAHN;AAIHC,qBAAS,UAAUnN,IAAV,EAAgB;AACrBF,0BAAUoO,wBAAV,CAAmClO,IAAnC,EAAyCiO,UAAzC;AACH,aANE;AAOHX,mBAAO,YAAY;AACfpB,uCAAuBR,UAAUE,WAAjC;AACH;AATE,SAAP;AAWH,KAZD;AAaA;;;AAGA,QAAIM,yBAAyB,UAAUwC,QAAV,EAAoB;AAC7C,YAAIA,QAAJ,EAAc;AACVC,0BAAcD,QAAd;AACH;AACJ,KAJD;;AAMA;;;AAGA,QAAIE,0BAA0B,YAAY;AACtC,YAAIC,aAAanP,EAAE,qCAAF,EAAyCY,IAAzC,CAA8C,kBAA9C,CAAjB;AACA,YAAI+M,SAAS3N,EAAE,sBAAF,CAAb;AACA,YAAIoP,WAAWzB,OAAOhL,IAAP,CAAY,oBAAZ,CAAf;AACA,YAAI0M,YAAY1B,OAAOhL,IAAP,CAAY,mBAAZ,CAAhB;AACA,YAAI2M,SAAS3B,OAAOhL,IAAP,CAAY,eAAZ,CAAb;AACA,gBAAQ4M,OAAOJ,UAAP,CAAR;AACI,iBAAK,CAAL;AACI;AACAC,yBAASnP,IAAT;AACAoP,0BAAUpP,IAAV;AACAqP,uBAAOlN,IAAP;AACA;AACJ,iBAAK,CAAL;AACI;AACAgN,yBAAShN,IAAT;AACAgN,yBAASnO,WAAT,CAAqB,SAArB,EAAgCO,QAAhC,CAAyC,SAAzC,EAAoDjB,IAApD,CAAyD,MAAzD,EAAiEK,IAAjE,CAAsE,IAAtE,EAA4E,iBAA5E,EAA+FN,IAA/F,CAAoG,QAApG,EAA8G,GAA9G;AACA+O,0BAAU9O,IAAV,CAAe,MAAf,EAAuBK,IAAvB,CAA4B,IAA5B,EAAkC,oBAAlC,EAAwDN,IAAxD,CAA6D,QAA7D,EAAuE,GAAvE,EAA4E8B,IAA5E;AACAkN,uBAAOrP,IAAP;AACA;AACJ,iBAAK,CAAL;AACI;AACAmP,yBAAShN,IAAT;AACAgN,yBAASnO,WAAT,CAAqB,SAArB,EAAgCO,QAAhC,CAAyC,SAAzC,EAAoDjB,IAApD,CAAyD,MAAzD,EAAiEK,IAAjE,CAAsE,IAAtE,EAA4E,iBAA5E,EAA+FN,IAA/F,CAAoG,QAApG,EAA8G,GAA9G;AACA+O,0BAAU9O,IAAV,CAAe,MAAf,EAAuBK,IAAvB,CAA4B,IAA5B,EAAkC,kBAAlC,EAAsDN,IAAtD,CAA2D,QAA3D,EAAqE,GAArE,EAA0E8B,IAA1E;AACAkN,uBAAOlN,IAAP;AACA;AACJ,iBAAK,CAAL;AACI;AACAgN,yBAASnP,IAAT;AACAoP,0BAAUpP,IAAV;AACAqP,uBAAOlN,IAAP;AACA;AACJ;AACI;AACAgN,yBAAShN,IAAT;AACAgN,yBAASnO,WAAT,CAAqB,SAArB,EAAgCO,QAAhC,CAAyC,SAAzC,EAAoDjB,IAApD,CAAyD,QAAzD,EAAmEK,IAAnE,CAAwE,IAAxE,EAA8E,EAA9E;AACAyO,0BAAUpP,IAAV;AACAqP,uBAAOlN,IAAP;AACA;AAjCR;AAmCH,KAzCD;;AA6CA;;AAMA;;AAEApC,MAAE,UAAF,EAAc4E,QAAd,CAAuB,0BAAvB,EAAmD,OAAnD,EAA4D,YAAY;AACpE,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACA,YAAIwF,QAAQ,OAAZ;AACA,YAAIoH,UAAU5M,KAAK6B,OAAL,CAAa,iBAAb,EAAgCnE,IAAhC,CAAqC,SAArC,CAAd;AACAoC,iBAAS0F,KAAT,IAAkBxF,KAAKyE,IAAL,EAAlB;AACAzE,aAAK6B,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,UAAxB,EAAoC1B,WAApC,CAAgD,SAAhD;AACA2B,aAAKpB,QAAL,CAAc,SAAd;AACAoB,aAAKO,QAAL,CAAc;AACVC,sBAAUoM,OADA;AAEVnM,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KAbD;AAcA;AACAL,MAAE,UAAF,EAAc4E,QAAd,CAAuB,iCAAvB,EAA0D,OAA1D,EAAmE,YAAY;AAC3E,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACA,YAAIwF,QAAQ,OAAZ;AACA,YAAIoH,UAAU5M,KAAK6B,OAAL,CAAa,iBAAb,EAAgCnE,IAAhC,CAAqC,SAArC,CAAd;AACAoC,iBAAS0F,KAAT,IAAkBlG,SAASU,KAAK6B,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,UAAxB,EAAoC0E,IAApC,EAAT,IAAuD,CAAzE;AACAzE,aAAK6B,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,UAAxB,EAAoC1B,WAApC,CAAgD,SAAhD;AACA2B,aAAK6B,OAAL,CAAa,iBAAb,EAAgC9B,IAAhC,CAAqC,IAArC,EAA2CoD,EAA3C,CAA8CrD,SAAS0F,KAAT,CAA9C,EAA+D5G,QAA/D,CAAwE,SAAxE;AACAoB,aAAKO,QAAL,CAAc;AACVC,sBAAUoM,OADA;AAEVnM,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KAbD;AAcA;AACAL,MAAE,UAAF,EAAc4E,QAAd,CAAuB,gCAAvB,EAAyD,OAAzD,EAAkE,YAAY;AAC1E,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACA,YAAIwF,QAAQ,OAAZ;AACA,YAAIoH,UAAU5M,KAAK6B,OAAL,CAAa,iBAAb,EAAgCnE,IAAhC,CAAqC,SAArC,CAAd;AACAoC,iBAAS0F,KAAT,IAAkBlG,SAASU,KAAK6B,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,UAAxB,EAAoC0E,IAApC,EAAT,IAAuD,CAAzE;AACAzE,aAAK6B,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,UAAxB,EAAoC1B,WAApC,CAAgD,SAAhD;AACA2B,aAAK6B,OAAL,CAAa,iBAAb,EAAgC9B,IAAhC,CAAqC,IAArC,EAA2CoD,EAA3C,CAA8CrD,SAAS0F,KAAT,CAA9C,EAA+D5G,QAA/D,CAAwE,SAAxE;AACAoB,aAAKO,QAAL,CAAc;AACVC,sBAAUoM,OADA;AAEVnM,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KAbD;AAcA;AACAL,MAAE,UAAF,EAAc4E,QAAd,CAAuB,2BAAvB,EAAoD,OAApD,EAA6D,YAAY;AACrE,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACA,YAAIwF,QAAQ,OAAZ;AACA,YAAIoH,UAAU5M,KAAK6B,OAAL,CAAa,iBAAb,EAAgCnE,IAAhC,CAAqC,SAArC,CAAd;AACAoC,iBAAS0F,KAAT,IAAkBxF,KAAK0D,QAAL,CAAc,YAAd,EAA4B3D,IAA5B,CAAiC,OAAjC,EAA0CE,GAA1C,EAAlB;AACAD,aAAK6B,OAAL,CAAa,iBAAb,EAAgC9B,IAAhC,CAAqC,IAArC,EAA2CA,IAA3C,CAAgD,UAAhD,EAA4D1B,WAA5D,CAAwE,SAAxE;AACA2B,aAAK6B,OAAL,CAAa,iBAAb,EAAgC9B,IAAhC,CAAqC,IAArC,EAA2CoD,EAA3C,CAA8CrD,SAAS0F,KAAT,CAA9C,EAA+D5G,QAA/D,CAAwE,SAAxE;AACAoB,aAAKO,QAAL,CAAc;AACVC,sBAAUoM,OADA;AAEVnM,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KAbD;;AAgBA;;AAEAL,MAAE,QAAF,EAAY4E,QAAZ,CAAqB,0BAArB,EAAiD,OAAjD,EAA0D,YAAY;AAClE,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWkM,iBAAiBhM,IAAjB,CAAf;AACA,YAAIwF,QAAQ,OAAZ;AACA,YAAIoH,UAAU5M,KAAK6B,OAAL,CAAa,iBAAb,EAAgCnE,IAAhC,CAAqC,SAArC,CAAd;AACA,YAAImP,UAAU7M,KAAK6B,OAAL,CAAa,iBAAb,EAAgCnE,IAAhC,CAAqC,UAArC,CAAd;AACA,YAAIoP,iBAAiB9M,KAAK6B,OAAL,CAAa,iBAAb,EAAgCnE,IAAhC,CAAqC,aAArC,CAArB;AACA,YAAImP,OAAJ,EAAa;AACT/M,qBAAS,SAAT,IAAsB+M,OAAtB;AACA/M,qBAAS,YAAT,IAAyBgN,cAAzB;AACH;AACDhN,iBAAS0F,KAAT,IAAkBxF,KAAKyE,IAAL,EAAlB;AACAzE,aAAK6B,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,UAAxB,EAAoC1B,WAApC,CAAgD,SAAhD;AACA2B,aAAKpB,QAAL,CAAc,SAAd;AACAoB,aAAKO,QAAL,CAAc;AACVC,sBAAUoM,OADA;AAEVnM,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUgE;AAHN,SAAd;AAKH,KAnBD;AAoBA;AACApE,MAAE,QAAF,EAAY4E,QAAZ,CAAqB,iCAArB,EAAwD,OAAxD,EAAiE,YAAY;AACzE,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWkM,iBAAiBhM,IAAjB,CAAf;AACA,YAAIwF,QAAQ,OAAZ;AACA,YAAIoH,UAAU5M,KAAK6B,OAAL,CAAa,iBAAb,EAAgCnE,IAAhC,CAAqC,SAArC,CAAd;AACA,YAAImP,UAAU7M,KAAK6B,OAAL,CAAa,iBAAb,EAAgCnE,IAAhC,CAAqC,UAArC,CAAd;AACA,YAAIoP,iBAAiB9M,KAAK6B,OAAL,CAAa,iBAAb,EAAgCnE,IAAhC,CAAqC,aAArC,CAArB;AACA,YAAImP,OAAJ,EAAa;AACT/M,qBAAS,SAAT,IAAsB+M,OAAtB;AACA/M,qBAAS,YAAT,IAAyBgN,cAAzB;AACH;AACDhN,iBAAS0F,KAAT,IAAkBlG,SAASU,KAAK6B,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,UAAxB,EAAoC0E,IAApC,EAAT,IAAuD,CAAzE;AACAzE,aAAK6B,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,UAAxB,EAAoC1B,WAApC,CAAgD,SAAhD;AACA2B,aAAK6B,OAAL,CAAa,iBAAb,EAAgC9B,IAAhC,CAAqC,IAArC,EAA2CoD,EAA3C,CAA8CrD,SAAS0F,KAAT,CAA9C,EAA+D5G,QAA/D,CAAwE,SAAxE;AACAoB,aAAKO,QAAL,CAAc;AACVC,sBAAUoM,OADA;AAEVnM,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUgE;AAHN,SAAd;AAKH,KAnBD;AAoBA;AACApE,MAAE,QAAF,EAAY4E,QAAZ,CAAqB,gCAArB,EAAuD,OAAvD,EAAgE,YAAY;AACxE,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWkM,iBAAiBhM,IAAjB,CAAf;AACA,YAAIwF,QAAQ,OAAZ;AACA,YAAIoH,UAAU5M,KAAK6B,OAAL,CAAa,iBAAb,EAAgCnE,IAAhC,CAAqC,SAArC,CAAd;AACA,YAAImP,UAAU7M,KAAK6B,OAAL,CAAa,iBAAb,EAAgCnE,IAAhC,CAAqC,UAArC,CAAd;AACA,YAAIoP,iBAAiB9M,KAAK6B,OAAL,CAAa,iBAAb,EAAgCnE,IAAhC,CAAqC,aAArC,CAArB;AACA,YAAImP,OAAJ,EAAa;AACT/M,qBAAS,SAAT,IAAsB+M,OAAtB;AACA/M,qBAAS,YAAT,IAAyBgN,cAAzB;AACH;AACDhN,iBAAS0F,KAAT,IAAkBlG,SAASU,KAAK6B,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,UAAxB,EAAoC0E,IAApC,EAAT,IAAuD,CAAzE;AACAzE,aAAK6B,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,UAAxB,EAAoC1B,WAApC,CAAgD,SAAhD;AACA2B,aAAK6B,OAAL,CAAa,iBAAb,EAAgC9B,IAAhC,CAAqC,IAArC,EAA2CoD,EAA3C,CAA8CrD,SAAS0F,KAAT,CAA9C,EAA+D5G,QAA/D,CAAwE,SAAxE;AACAoB,aAAKO,QAAL,CAAc;AACVC,sBAAUoM,OADA;AAEVnM,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUgE;AAHN,SAAd;AAKH,KAnBD;AAoBA;AACApE,MAAE,QAAF,EAAY4E,QAAZ,CAAqB,2BAArB,EAAkD,OAAlD,EAA2D,YAAY;AACnE,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWkM,iBAAiBhM,IAAjB,CAAf;AACA,YAAIwF,QAAQ,OAAZ;AACA,YAAIoH,UAAU5M,KAAK6B,OAAL,CAAa,iBAAb,EAAgCnE,IAAhC,CAAqC,SAArC,CAAd;AACA,YAAImP,UAAU7M,KAAK6B,OAAL,CAAa,iBAAb,EAAgCnE,IAAhC,CAAqC,UAArC,CAAd;AACA,YAAIoP,iBAAiB9M,KAAK6B,OAAL,CAAa,iBAAb,EAAgCnE,IAAhC,CAAqC,aAArC,CAArB;AACA,YAAImP,OAAJ,EAAa;AACT/M,qBAAS,SAAT,IAAsB+M,OAAtB;AACA/M,qBAAS,YAAT,IAAyBgN,cAAzB;AACH;AACDhN,iBAAS0F,KAAT,IAAkBxF,KAAK0D,QAAL,CAAc,YAAd,EAA4B3D,IAA5B,CAAiC,OAAjC,EAA0CE,GAA1C,EAAlB;AACAD,aAAK6B,OAAL,CAAa,iBAAb,EAAgC9B,IAAhC,CAAqC,IAArC,EAA2CA,IAA3C,CAAgD,UAAhD,EAA4D1B,WAA5D,CAAwE,SAAxE;AACA2B,aAAK6B,OAAL,CAAa,iBAAb,EAAgC9B,IAAhC,CAAqC,IAArC,EAA2CoD,EAA3C,CAA8CrD,SAAS0F,KAAT,CAA9C,EAA+D5G,QAA/D,CAAwE,SAAxE;AACAoB,aAAKO,QAAL,CAAc;AACVC,sBAAUoM,OADA;AAEVnM,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUgE;AAHN,SAAd;AAKH,KAnBD;;AAuBA;;;AAGApE,MAAE,wBAAF,EAA4BgD,EAA5B,CAA+B,OAA/B,EAAwC,YAAY;AAChD,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACAA,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKuJ,kBADL;AAEVpG,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KARD;;AAWA;;;AAGAL,MAAE,mBAAF,EAAuBgD,EAAvB,CAA0B,OAA1B,EAAmC,YAAY;AAC3C,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACAA,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKyJ,aADL;AAEVtG,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KARD;AASA;;;AAGAL,MAAE,iBAAF,EAAqBgD,EAArB,CAAwB,OAAxB,EAAiC,YAAY;AACzC,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACAA,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKwJ,WADL;AAEVrG,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KARD;;AAaA;AACAL,MAAE,eAAF,EAAmB4E,QAAnB,CAA4B,gBAA5B,EAA8C,OAA9C,EAAuD,YAAY;AAC/D,YAAIsC,QAAQlH,EAAE,IAAF,CAAZ;AACAgH,iBAASE,KAAT;AACAA,cAAMzC,OAAN,CAAc,IAAd,EAAoBlE,IAApB,CAAyB,6DAAzB;AACH,KAJD;AAKA;AACAP,MAAE,eAAF,EAAmB4E,QAAnB,CAA4B,gBAA5B,EAA8C,OAA9C,EAAuD,YAAY;AAC/D,YAAIsC,QAAQlH,EAAE,IAAF,CAAZ;AACA,YAAI+G,aAAaG,MAAMzC,OAAN,CAAc,IAAd,CAAjB;AACA,YAAI/B,WAAWyF,YAAYjB,KAAZ,EAAmBH,UAAnB,CAAf;AACAW,iBAASR,KAAT,EAAgB,IAAhB,EAAsBhH,KAAKmJ,wBAA3B,EAAqD3G,QAArD,EAA+DtC,UAAUiE,iBAAzE;AACA;AACH,KAND;AAOA;AACArE,MAAE,eAAF,EAAmB4E,QAAnB,CAA4B,eAA5B,EAA6C,OAA7C,EAAsD,YAAY;AAC9D,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAW,EAAf;AACA,YAAIiN,cAAc,EAAlB;AACA,YAAIC,SAAS,EAAb;AACA,YAAIC,SAAS7P,EAAE,IAAF,EAAQyE,OAAR,CAAgB,kBAAhB,EAAoC9B,IAApC,CAAyC,IAAzC,EAA+CmN,IAA/C,KAAwD,CAArE;AACA,YAAIC,UAAU7N,SAASlC,EAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsB7D,IAAtB,CAA2B,SAA3B,CAAT,CAAd;;AAEA,YAAIoP,QAAQ,OAAR,CAAJ,EAAsB;AAClBJ,mBAAO5J,IAAP,CAAYhG,EAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsBnE,IAAtB,EAAZ;AACA,iBAAK,IAAIa,IAAI,CAAb,EAAgBA,IAAI4O,UAAU,CAA9B,EAAiC5O,GAAjC,EAAsC;AAClCyO,uBAAO5J,IAAP,CAAYhG,EAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsBwL,IAAtB,GAA6B3P,IAA7B,EAAZ;AACAN,kBAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsBwL,IAAtB,GAA6B5N,MAA7B;AACH;AACDrC,cAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsBpC,MAAtB;AACAK,qBAAS,cAAT,IAA2BwN,KAAKC,SAAL,CAAeP,MAAf,CAA3B;AACAhN,iBAAKO,QAAL,CAAc;AACVC,0BAAUlD,KAAKkJ,uBADL;AAEV/F,sBAAMX,QAFI;AAGVY,sBAAMlD,UAAUiE;AAHN,aAAd;AAKH;AAEJ,KAvBD;AAwBA;;;;AAIA;AACArE,MAAE,eAAF,EAAmB4E,QAAnB,CAA4B,kBAA5B,EAAgD,OAAhD,EAAyD,YAAY;AACjE,YAAIsC,QAAQlH,EAAE,IAAF,CAAZ;AACAgH,iBAASE,KAAT;AACAA,cAAM1F,QAAN,CAAe,MAAf;AACA0F,cAAMZ,QAAN,CAAe,kBAAf,EAAmC9E,QAAnC,CAA4C,QAA5C;AACH,KALD;AAMA;AACAxB,MAAE,eAAF,EAAmB4E,QAAnB,CAA4B,yBAA5B,EAAuD,OAAvD,EAAgE,YAAY;AACxE,YAAIsC,QAAQlH,EAAE,IAAF,CAAZ;AACA,YAAIkH,MAAMZ,QAAN,CAAe,OAAf,EAAwBtF,MAAxB,GAAiC,CAArC,EAAwC;AACpCgH,qBAASd,KAAT,EAAgB,OAAhB;AACH,SAFD,MAEO;AACHc,qBAASd,KAAT,EAAgB,OAAhB;AACH;AACDA,cAAMzC,OAAN,CAAc,OAAd,EAAuB9B,IAAvB,CAA4B,mBAA5B,EAAiDnB,QAAjD,CAA0D,QAA1D;AACH,KARD;AASA;AACAxB,MAAE,eAAF,EAAmB4E,QAAnB,CAA4B,0BAA5B,EAAwD,OAAxD,EAAiE,YAAY;AACzE,YAAIsC,QAAQlH,EAAE,IAAF,CAAZ;AACAgH,iBAASE,KAAT;AACAA,cAAMZ,QAAN,CAAe,kBAAf,EAAmC9E,QAAnC,CAA4C,MAA5C;AACA0G,kBAAUhB,KAAV;AACH,KALD;AAMA;AACAlH,MAAE,eAAF,EAAmB4E,QAAnB,CAA4B,uBAA5B,EAAqD,OAArD,EAA8D,YAAY;AACtE,YAAIsC,QAAQlH,EAAE,IAAF,CAAZ;AACA,YAAI+G,aAAaG,MAAMzC,OAAN,CAAc,IAAd,CAAjB;AACA,YAAI/B,WAAWyF,YAAYjB,KAAZ,EAAmBH,UAAnB,CAAf;AACAW,iBAASR,KAAT,EAAgB,IAAhB,EAAsBhH,KAAKoJ,uBAA3B,EAAoD5G,QAApD,EAA8DtC,UAAUiE,iBAAxE;AACA6C,cAAMjG,WAAN,CAAkB,MAAlB;AACH,KAND;;AAQA;;;;;AAKA;AACAjB,MAAE,gBAAF,EAAoBoQ,QAApB,CAA6B;AACzBrM,aAAK,iCADoB;AAEzBsM,gBAAQ;AAFiB,KAA7B;AAIA;AACArQ,MAAE,cAAF,EAAkBoQ,QAAlB,CAA2B;AACvBrM,aAAK,iCADkB;AAEvBuM,gBAAQ;AAFe,KAA3B;;AAMAtQ,MAAE,eAAF,EAAmBgD,EAAnB,CAAsB,OAAtB,EAA+B,YAAY;AACvC,YAAIuN,QAAQvQ,EAAE,iBAAF,CAAZ;AACA,YAAIuQ,MAAMvP,MAAN,KAAiB,CAArB,EAAwB;AACpB4C,mBAAOC,QAAP,CAAgBC,IAAhB,GAAuB5D,KAAKsI,WAAL,GAAmB,UAAnB,GAAgCxI,EAAE,iBAAF,EAAqBY,IAArB,CAA0B,KAA1B,CAAhC,GAAmE,UAAnE,GAAgFZ,EAAE,iBAAF,EAAqBY,IAArB,CAA0B,KAA1B,CAAhF,GAAmH,UAAnH,GAAgIZ,EAAE,iBAAF,EAAqBY,IAArB,CAA0B,KAA1B,CAAvJ;AACH,SAFD,MAEO;AACHuD,kBAAM,SAAN;AACH;AACJ,KAPD;AAQA;;;;AAIA;AACA;AACAnE,MAAE,2BAAF,EAA+BgD,EAA/B,CAAkC,OAAlC,EAA2C,YAAY;AACnD,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACAkP;AACA,YAAIsB,YAAYzL,YAAYnC,IAAZ,CAAhB;AACA,YAAI6N,eAAezQ,EAAE,aAAF,EAAiB2C,IAAjB,CAAsB,cAAtB,EAAsCrC,IAAtC,EAAnB;AACA,YAAIoC,WAAW1C,EAAE0Q,MAAF,CAAS,EAAT,EAAaF,SAAb,EAAwBC,YAAxB,CAAf;AACA7N,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKoI,eADL;AAEVjF,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KAXD;AAYA;AACAL,MAAE,wBAAF,EAA4BgD,EAA5B,CAA+B,OAA/B,EAAwC,YAAY;AAChD,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAIwQ,YAAYzL,YAAYnC,IAAZ,CAAhB;AACA,YAAI6N,eAAezQ,EAAE,aAAF,EAAiB2C,IAAjB,CAAsB,cAAtB,EAAsCrC,IAAtC,EAAnB;AACA,YAAIoC,WAAW1C,EAAE0Q,MAAF,CAAS,EAAT,EAAaF,SAAb,EAAwBC,YAAxB,CAAf;AACA7N,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKqI,kBADL;AAEVlF,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KAVD;AAWA;AACAL,MAAE,aAAF,EAAiB2C,IAAjB,CAAsB,MAAtB,EAA8BK,EAA9B,CAAiC,OAAjC,EAA0C,YAAY;AAClD,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAIwQ,YAAYzL,YAAYnC,IAAZ,CAAhB;AACA,YAAI6N,eAAe7N,KAAKtC,IAAL,EAAnB;AACA,YAAIoC,WAAW1C,EAAE0Q,MAAF,CAAS,EAAT,EAAaF,SAAb,EAAwBC,YAAxB,CAAf;AACA,YAAI/N,QAAJ,EAAc;AACV1C,cAAE,aAAF,EAAiB2C,IAAjB,CAAsB,UAAtB,EAAkC1B,WAAlC,CAA8C,SAA9C;AACA2B,iBAAKpB,QAAL,CAAc,SAAd;AACAoB,iBAAKO,QAAL,CAAc;AACVC,0BAAUlD,KAAKoI,eADL;AAEVjF,sBAAMX,QAFI;AAGVY,sBAAMlD,UAAUC;AAHN,aAAd;AAKH;AAEJ,KAfD;;AAiBA;AACAL,MAAE,UAAF,EAAc4E,QAAd,CAAuB,oCAAvB,EAA6D,OAA7D,EAAsE,YAAY;AAC9E,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACA,YAAIwF,QAAQ,OAAZ;AACA1F,iBAAS0F,KAAT,IAAkBxF,KAAKyE,IAAL,EAAlB;AACAzE,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKoI,eADL;AAEVjF,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KAVD;AAWAL,MAAE,UAAF,EAAc4E,QAAd,CAAuB,wCAAvB,EAAiE,OAAjE,EAA0E,YAAY;AAClF,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACA,YAAIwF,QAAQ,OAAZ;AACA1F,iBAAS0F,KAAT,IAAkBxF,KAAK0D,QAAL,CAAc,YAAd,EAA4B3D,IAA5B,CAAiC,OAAjC,EAA0CE,GAA1C,EAAlB;AACAD,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKoI,eADL;AAEVjF,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KAVD;;AAYA;AACAL,MAAE,cAAF,EAAkB4E,QAAlB,CAA2B,yBAA3B,EAAsD,OAAtD,EAA+D,YAAY;AACvE,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAW6C,WAAW3C,IAAX,CAAf;AACAA,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKuI,iBADL;AAEVpF,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUiE;AAHN,SAAd;AAKH,KARD;AASA;AACArE,MAAE,cAAF,EAAkB4E,QAAlB,CAA2B,2BAA3B,EAAwD,OAAxD,EAAiE,YAAY;AACzE,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAW6C,WAAW3C,IAAX,CAAf;AACAA,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKwI,mBADL;AAEVrF,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUiE;AAHN,SAAd;AAKH,KARD;;AAUA;AACArE,MAAE,gBAAF,EAAoBgD,EAApB,CAAuB,OAAvB,EAAgC,YAAY;AACxC,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI2Q,cAActK,YAAYzD,IAAZ,CAAlB;AACA,YAAIgO,UAAUD,YAAY1K,IAAZ,CAAiB,GAAjB,CAAd;AACA,YAAI2K,QAAQ5P,MAAZ,EAAoB;AAChB4C,mBAAOC,QAAP,CAAgBC,IAAhB,GAAuB,wCAAwC8M,OAA/D;AACH,SAFD,MAEO;AACHxQ,sBAAU+L,SAAV,CAAoB,kBAApB,EAAwC,KAAxC;AACH;AACJ,KATD;;AAWA;AACAnM,MAAE,eAAF,EAAmBgD,EAAnB,CAAsB,OAAtB,EAA+B,YAAY;AACvC,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI2Q,cAActK,YAAYzD,IAAZ,CAAlB;AACA,YAAIgO,UAAUD,YAAY1K,IAAZ,CAAiB,GAAjB,CAAd;AACA,YAAI2K,QAAQ5P,MAAZ,EAAoB;AAChB,gBAAI0B,WAAW,EAAf;AACAA,qBAAS,SAAT,IAAsBiO,YAAY1K,IAAZ,CAAiB,GAAjB,CAAtB;AACArD,iBAAKO,QAAL,CAAc;AACVC,0BAAUlD,KAAK8I,UADL;AAEV3F,sBAAMX,QAFI;AAGVY,sBAAM,UAAUuN,CAAV,EAAa;AACf,wBAAIA,KAAKA,EAAEhQ,MAAX,EAAmB;AACfT,kCAAU+L,SAAV,CAAoB,OAApB,EAA6B,IAA7B;AACH,qBAFD,MAEO;AACH/L,kCAAU+L,SAAV,CAAoB0E,EAAE/P,QAAF,IAAc,aAAlC,EAAiD,KAAjD;AACH;AACJ,iBATS;AAUV8M,uBAAO,UAAUiD,CAAV,EAAa;AAChBzQ,8BAAU+L,SAAV,CAAoB,aAApB,EAAmC,KAAnC;AACH;AAZS,aAAd;AAcH,SAjBD,MAiBO;AACH/L,sBAAU+L,SAAV,CAAoB,kBAApB,EAAwC,KAAxC;AACH;AACJ,KAxBD;;AA0BA;;AAEAnM,MAAE,oBAAF,EAAwBgD,EAAxB,CAA2B,OAA3B,EAAoC,YAAY;AAC5C;AACA,YAAI8N,cAAc;AACdC,uBAAW,CAAC;AACJrC,uBAAO,eADH;AAEJsC,0BAAU;AAFN,aAAD,EAIP;AACItC,uBAAO,aADX;AAEIsC,0BAAU;AAFd,aAJO,EAQP;AACItC,uBAAO,gBADX;AAEIsC,0BAAU;AAFd,aARO,EAYP;AACItC,uBAAO,aADX;AAEIsC,0BAAU;AAFd,aAZO;AADG,SAAlB;AAmBA,YAAIvE,SAASzM,EAAE,yBAAF,EAA6BO,IAA7B,EAAb;AACA,YAAImM,WAAWC,WAAWC,OAAX,CAAmBH,MAAnB,CAAf;AACA,YAAIlM,OAAOmM,SAASoE,WAAT,CAAX;AACA9Q,UAAE,QAAF,EAAYO,IAAZ,CAAiBA,IAAjB,EAAuB6B,IAAvB;AACH,KAzBD;;AA2BA;;AAEA;AACAiM;AACArO,MAAE,aAAF,EAAiBiR,MAAjB,CAAwB,YAAY;AAChC;AACAjR,UAAE,6BAAF,EAAiCO,IAAjC,CAAsCP,EAAE,aAAF,EAAiB6C,GAAjB,EAAtC;AACH,KAHD;;AAKA7C,MAAE,QAAF,EAAY4E,QAAZ,CAAqB,wBAArB,EAA+C,OAA/C,EAAwD,YAAY;AAChE,YAAI5E,EAAE,IAAF,EAAQkR,QAAR,CAAiB,SAAjB,KAA+BlR,EAAE,aAAF,EAAiB6C,GAAjB,GAAuB7B,MAAvB,IAAiC,CAApE,EAAuE;AACvEhB,UAAE,IAAF,EAAQwB,QAAR,CAAiB,SAAjB;AACA;AACA,YAAI,OAAOxB,EAAEmR,EAAF,CAAKC,UAAZ,IAA0B,WAA9B,EAA2C;AACvCpR,cAAEqR,SAAF,CAAY,2CAAZ,EAAyD,YAAY;AACjErR,kBAAE,aAAF,EAAiBsR,MAAjB;AACH,aAFD;AAGH,SAJD,MAIO;AACHtR,cAAE,aAAF,EAAiBsR,MAAjB;AACH;AAEJ,KAZD;AAaAtR,MAAE,UAAF,EAAc4E,QAAd,CAAuB,WAAvB,EAAoC,OAApC,EAA6C,YAAY;AACrD,YAAI5E,EAAE,IAAF,EAAQiQ,IAAR,GAAerP,IAAf,CAAoB,IAApB,KAA6B,iBAAjC,EAAoD;AAChD;AACAR,sBAAUyN,yBAAV,CAAoC,IAApC,EAA0C,IAA1C;AACH,SAHD,MAGO;AACH;AACAzN,sBAAUyM,6BAAV,CAAwC,IAAxC,EAA8C,IAA9C;AACH;AACJ,KARD;;AAUA7M,MAAE,aAAF,EAAiBsR,MAAjB,CAAwB,YAAY;AAChC;AACAlR,kBAAU6N,oBAAV;AACAjO,UAAE,IAAF,EAAQoR,UAAR,CAAmB;AACf7D,kBAAM,MADS;AAEfxJ,iBAAK7D,KAAKuL,UAFK;AAGf+B,qBAAS,KAHM;AAIfC,qBAAS,UAAUrM,GAAV,EAAe;AACpBhB,0BAAU8N,qBAAV;AACA,oBAAI9M,GAAJ,EAAS;AACLA,0BAAMpB,EAAEuR,SAAF,CAAYnQ,GAAZ,CAAN;AACH;AACD;AACA,oBAAIA,IAAIoQ,SAAR,EAAmB;AACf3F,iCAAaC,SAAb,GAAyB,CAAzB;AACA1L,8BAAUkO,oBAAV,CAA+B,CAA/B;AACH,iBAHD,MAGO;AACH;AACAlO,8BAAUkO,oBAAV,CAA+BzC,aAAaC,SAA5C;AACA1L,8BAAUsN,oBAAV,CAA+BtM,IAAIyD,GAAnC;AACH;AACJ,aAlBc;AAmBf+I,mBAAO,YAAY;AACfxN,0BAAUkO,oBAAV,CAA+B,CAAC,GAAhC;AACA;AACAlO,0BAAUsN,oBAAV,CAA+B,aAA/B;AACH;AAvBc,SAAnB;AAyBA,eAAO,KAAP,CA5BgC,CA4BlB;AACjB,KA7BD;AA8BA1N,MAAE,kBAAF,EAAsBgD,EAAtB,CAAyB,OAAzB,EAAkC,YAAY;AAC1C,YAAI6I,aAAaC,SAAb,IAA0B,CAA9B,EAAiC;AAC7B;AACA1L,sBAAU6N,oBAAV;AACA7N,sBAAU8N,qBAAV;AACH,SAJD,MAIO;AACH;AACA,gBAAIzB,SAASzM,EAAE,wBAAF,EAA4BO,IAA5B,EAAb;AACA,gBAAImM,WAAWC,WAAWC,OAAX,CAAmBH,MAAnB,CAAf;AACA,gBAAIlM,OAAOmM,UAAX;AACA1M,cAAE,QAAF,EAAYO,IAAZ,CAAiBA,IAAjB,EAAuB6B,IAAvB;AACApC,cAAE,aAAF,EAAiB6C,GAAjB,CAAqB,EAArB;AACH;AACJ,KAbD;;AAeA;;AAEA;AACAuL;AACApO,MAAE,eAAF,EAAmBiR,MAAnB,CAA0B,YAAY;AAClC;AACAjR,UAAE,6BAAF,EAAiCO,IAAjC,CAAsCP,EAAE,eAAF,EAAmB6C,GAAnB,EAAtC;AACH,KAHD;;AAKA7C,MAAE,QAAF,EAAY4E,QAAZ,CAAqB,yBAArB,EAAgD,OAAhD,EAAyD,YAAY;AACjE,YAAI5E,EAAE,IAAF,EAAQkR,QAAR,CAAiB,SAAjB,KAA+BlR,EAAE,eAAF,EAAmB6C,GAAnB,GAAyB7B,MAAzB,IAAmC,CAAtE,EAAyE;AACzEhB,UAAE,IAAF,EAAQwB,QAAR,CAAiB,SAAjB;AACA;AACA,YAAI,OAAOxB,EAAEmR,EAAF,CAAKC,UAAZ,IAA0B,WAA9B,EAA2C;AACvCpR,cAAEqR,SAAF,CAAY,2CAAZ,EAAyD,YAAY;AACjErR,kBAAE,kBAAF,EAAsBsR,MAAtB;AACH,aAFD;AAGH,SAJD,MAIO;AACHtR,cAAE,kBAAF,EAAsBsR,MAAtB;AACH;AAEJ,KAZD;AAaAtR,MAAE,kBAAF,EAAsBsR,MAAtB,CAA6B,YAAY;AACrC;AACAlR,kBAAU6N,oBAAV,CAA+B,IAA/B;AACAjO,UAAE,IAAF,EAAQoR,UAAR,CAAmB;AACf7D,kBAAM,MADS;AAEfxJ,iBAAK7D,KAAKyL,UAFK;AAGf6B,qBAAS,KAHM;AAIfC,qBAAS,UAAUrM,GAAV,EAAe;AACpB;AACAhB,0BAAU8N,qBAAV,CAAgC,IAAhC;AACA,oBAAI9M,GAAJ,EAAS;AACLA,0BAAMpB,EAAEuR,SAAF,CAAYnQ,GAAZ,CAAN;AACH;AACD,oBAAIA,IAAIoQ,SAAR,EAAmB;AACf3F,iCAAaE,SAAb,GAAyB,CAAzB;AACA3L,8BAAUoO,wBAAV,CAAmC,CAAnC;AACH,iBAHD,MAGO;AACH;AACApO,8BAAUoO,wBAAV,CAAmC3C,aAAaC,SAAhD;AACA1L,8BAAUsN,oBAAV,CAA+BtM,IAAIyD,GAAnC,EAAwC,IAAxC;AACH;AACJ,aAlBc;AAmBf+I,mBAAO,UAAU6D,GAAV,EAAe;AAClBrR,0BAAUoO,wBAAV,CAAmC,CAAC,GAApC;AACA;AACApO,0BAAUsN,oBAAV,CAA+B,aAA/B,EAA8C,IAA9C;AACH;AAvBc,SAAnB;AAyBA,eAAO,KAAP,CA5BqC,CA4BvB;AACjB,KA7BD;AA8BA1N,MAAE,kBAAF,EAAsBgD,EAAtB,CAAyB,OAAzB,EAAkC,YAAY;AAC1C,YAAI6I,aAAaE,SAAb,IAA0B,CAA9B,EAAiC;AAC7B;AACA3L,sBAAU6N,oBAAV,CAA+B,IAA/B;AACA7N,sBAAU8N,qBAAV,CAAgC,IAAhC;AACH,SAJD,MAIO;AACH;AACA,gBAAIzB,SAASzM,EAAE,wBAAF,EAA4BO,IAA5B,EAAb;AACA,gBAAImM,WAAWC,WAAWC,OAAX,CAAmBH,MAAnB,CAAf;AACA,gBAAIlM,OAAOmM,UAAX;AACA1M,cAAE,QAAF,EAAYO,IAAZ,CAAiBA,IAAjB,EAAuB6B,IAAvB;AACApC,cAAE,eAAF,EAAmB6C,GAAnB,CAAuB,EAAvB;AACH;AACJ,KAbD;AAcA;AACA7C,MAAE,WAAF,EAAe4E,QAAf,CAAwB,aAAxB,EAAuC,OAAvC,EAAgD,YAAY;AACxD,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI2Q,cAActK,YAAYzD,IAAZ,CAAlB;AACA;AACA,YAAI8O,YAAY,IAAhB;AACA,aAAK,IAAIvQ,IAAI,CAAb,EAAgBA,IAAIwP,YAAY3P,MAAhC,EAAwCG,GAAxC,EAA6C;AACzC,gBAAIwQ,YAAYpC,OAAO3M,KAAK6B,OAAL,CAAa,WAAb,EAA0BwL,IAA1B,GAAiCtN,IAAjC,CAAsC,gBAAgBgO,YAAYxP,CAAZ,CAAhB,GAAiC,IAAvE,EAA6EP,IAA7E,CAAkF,iBAAlF,CAAP,CAAhB;AACA,gBAAI+Q,aAAa,CAAjB,EAAoB;AAChBvR,0BAAU+L,SAAV,CAAoB,uBAApB,EAA6C,KAA7C;AACA;AACH;AACJ;AACD,YAAIzJ,WAAW,EAAf;AACAA,mBAAWE,KAAKtC,IAAL,EAAX;AACAoC,iBAAS,KAAT,IAAkBiO,YAAY1K,IAAZ,CAAiB,GAAjB,CAAlB;AACArD,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAK6I,UADL;AAEV1F,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUiE;AAHN,SAAd;AAKH,KApBD;;AAsBA;AACArE,MAAE,WAAF,EAAe4E,QAAf,CAAwB,kBAAxB,EAA4C,OAA5C,EAAqD,YAAY;AAC7D,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI2Q,cAActK,YAAYzD,IAAZ,CAAlB;AACA,YAAIF,WAAW,EAAf;AACAA,mBAAWE,KAAKtC,IAAL,EAAX;AACAoC,iBAAS,KAAT,IAAkBiO,YAAY1K,IAAZ,CAAiB,GAAjB,CAAlB;AACArD,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKyI,oBADL;AAEVtF,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUiE;AAHN,SAAd;AAKH,KAXD;AAYA;AACArE,MAAE,WAAF,EAAe4E,QAAf,CAAwB,mBAAxB,EAA6C,OAA7C,EAAsD,YAAY;AAC9D,YAAI6H,SAASzM,EAAE,wBAAF,EAA4BO,IAA5B,EAAb;AACA,YAAImM,WAAWC,WAAWC,OAAX,CAAmBH,MAAnB,CAAf;AACA,YAAIlM,OAAOmM,UAAX;AACA1M,UAAE,QAAF,EAAYO,IAAZ,CAAiBA,IAAjB,EAAuB6B,IAAvB;AACApC,UAAE,eAAF,EAAmB6C,GAAnB,CAAuB,EAAvB;AACH,KAND;AAOA7C,MAAE,WAAF,EAAe4E,QAAf,CAAwB,qBAAxB,EAA+C,OAA/C,EAAwD,YAAY;AAChE,YAAI6H,SAASzM,EAAE,wBAAF,EAA4BO,IAA5B,EAAb;AACA,YAAImM,WAAWC,WAAWC,OAAX,CAAmBH,MAAnB,CAAf;AACA,YAAIlM,OAAOmM,UAAX;AACA1M,UAAE,QAAF,EAAYO,IAAZ,CAAiBA,IAAjB,EAAuB6B,IAAvB;AACApC,UAAE,iBAAF,EAAqB6C,GAArB,CAAyB,EAAzB;AACH,KAND;AAOA7C,MAAE,+BAAF,EAAmCiR,MAAnC,CAA0C,YAAY;AAClD;AACAjR,UAAE,6BAAF,EAAiCO,IAAjC,CAAsCP,EAAE,IAAF,EAAQ6C,GAAR,EAAtC;AACH,KAHD;AAIA7C,MAAE,QAAF,EAAY4E,QAAZ,CAAqB,sBAArB,EAA6C,OAA7C,EAAsD,YAAY;AAC9D;AACA,YAAI,OAAO5E,EAAEmR,EAAF,CAAKC,UAAZ,IAA0B,WAA9B,EAA2C;AACvCpR,cAAEqR,SAAF,CAAY,2CAAZ,EAAyD,YAAY;AACjErR,kBAAE,iBAAF,EAAqBsR,MAArB;AACH,aAFD;AAGH,SAJD,MAIO;AACHtR,cAAE,iBAAF,EAAqBsR,MAArB;AACH;AAEJ,KAVD;AAWAtR,MAAE,QAAF,EAAY4E,QAAZ,CAAqB,oBAArB,EAA2C,OAA3C,EAAoD,YAAY;AAC5D;AACA,YAAI,OAAO5E,EAAEmR,EAAF,CAAKC,UAAZ,IAA0B,WAA9B,EAA2C;AACvCpR,cAAEqR,SAAF,CAAY,2CAAZ,EAAyD,YAAY;AACjErR,kBAAE,eAAF,EAAmBsR,MAAnB;AACH,aAFD;AAGH,SAJD,MAIO;AACHtR,cAAE,eAAF,EAAmBsR,MAAnB;AACH;AAEJ,KAVD;AAWAtR,MAAE,eAAF,EAAmBsR,MAAnB,CAA0B,YAAY;AAClClR,kBAAUqO,cAAV,CAAyB,MAAzB,EAAiC,OAAjC;AACAzO,UAAE,kBAAF,EAAsBC,IAAtB;AACA;AACAD,UAAE,IAAF,EAAQoR,UAAR,CAAmB;AACf7D,kBAAM,MADS;AAEfxJ,iBAAK7D,KAAK0I,gBAFK;AAGf4E,qBAAS,KAHM;AAIfC,qBAAS,UAAUrM,GAAV,EAAe;AACpBA,sBAAMpB,EAAEuR,SAAF,CAAYnQ,GAAZ,CAAN;AACA,oBAAIA,OAAOA,IAAIoQ,SAAf,EAA0B;AACtB,wBAAItP,SAASd,IAAI4L,UAAb,KAA4B9K,SAASd,IAAI2L,QAAb,CAAhC,EAAwD;AACpD/M,0BAAE,QAAF,EAAY2C,IAAZ,CAAiB,WAAjB,EAA8BpC,IAA9B,CAAmC,MAAnC,EAA2CU,WAA3C,CAAuD,UAAvD,EAAmEO,QAAnE,CAA4E,WAA5E;AACH,qBAFD,MAEO;AACH,4BAAIiL,SAASzM,EAAE,wBAAF,EAA4BO,IAA5B,EAAb;AACA,4BAAImM,WAAWC,WAAWC,OAAX,CAAmBH,MAAnB,CAAf;AACA,4BAAIlM,OAAOmM,SAAStL,GAAT,CAAX;AACApB,0BAAE,QAAF,EAAYO,IAAZ,CAAiBA,IAAjB;AACAa,4BAAI0M,UAAJ,CAAeX,GAAf,CAAmB,UAAUC,IAAV,EAAgB;AAC/BpN,8BAAE,aAAF,EAAiBqN,MAAjB,CAAwB,WAAWD,IAAX,GAAkB,UAA1C;AACH,yBAFD;AAGAhM,4BAAI2M,QAAJ,CAAaZ,GAAb,CAAiB,UAAUC,IAAV,EAAgB;AAC7BpN,8BAAE,aAAF,EAAiBqN,MAAjB,CAAwB,WAAWD,IAAX,GAAkB,UAA1C;AACH,yBAFD;AAGAhM,4BAAI4M,aAAJ,CAAkBb,GAAlB,CAAsB,UAAUC,IAAV,EAAgB;AAClCpN,8BAAE,aAAF,EAAiBqN,MAAjB,CAAwB,WAAWD,IAAX,GAAkB,UAA1C;AACH,yBAFD;AAGApN,0BAAE,kBAAF,EAAsBoC,IAAtB;AACApC,0BAAE,QAAF,EAAYoC,IAAZ;AACH;AACJ,iBApBD,MAoBO;AACHpC,sBAAE,QAAF,EAAY2C,IAAZ,CAAiB,WAAjB,EAA8BpC,IAA9B,CAAmC,aAAnC;AACAP,sBAAE,kBAAF,EAAsBoC,IAAtB;AACH;AACJ,aA9Bc;AA+BfwL,mBAAO,UAAU6D,GAAV,EAAe;AAClBzR,kBAAE,QAAF,EAAY2C,IAAZ,CAAiB,WAAjB,EAA8BpC,IAA9B,CAAmC,aAAnC;AACAP,kBAAE,kBAAF,EAAsBoC,IAAtB;AACH;AAlCc,SAAnB;AAoCA,eAAO,KAAP,CAxCkC,CAwCpB;AACjB,KAzCD;AA0CApC,MAAE,iBAAF,EAAqBsR,MAArB,CAA4B,YAAY;AACpClR,kBAAUqO,cAAV,CAAyB,MAAzB,EAAiC,OAAjC;AACAzO,UAAE,kBAAF,EAAsBC,IAAtB;AACA;AACAD,UAAE,IAAF,EAAQoR,UAAR,CAAmB;AACf7D,kBAAM,MADS;AAEfxJ,iBAAK7D,KAAK2I,kBAFK;AAGf2E,qBAAS,KAHM;AAIfC,qBAAS,UAAUrM,GAAV,EAAe;AACpBA,sBAAMpB,EAAEuR,SAAF,CAAYnQ,GAAZ,CAAN;AACA,oBAAIA,OAAOA,IAAIoQ,SAAf,EAA0B;AACtB,wBAAItP,SAASd,IAAI4L,UAAb,KAA4B9K,SAASd,IAAI2L,QAAb,CAAhC,EAAwD;AACpD/M,0BAAE,QAAF,EAAY2C,IAAZ,CAAiB,WAAjB,EAA8BpC,IAA9B,CAAmC,MAAnC,EAA2CU,WAA3C,CAAuD,UAAvD,EAAmEO,QAAnE,CAA4E,WAA5E;AACH,qBAFD,MAEO;AACH,4BAAIiL,SAASzM,EAAE,wBAAF,EAA4BO,IAA5B,EAAb;AACA,4BAAImM,WAAWC,WAAWC,OAAX,CAAmBH,MAAnB,CAAf;AACA,4BAAIlM,OAAOmM,SAAStL,GAAT,CAAX;AACApB,0BAAE,QAAF,EAAYO,IAAZ,CAAiBA,IAAjB;AACAa,4BAAI0M,UAAJ,CAAeX,GAAf,CAAmB,UAAUC,IAAV,EAAgB;AAC/BpN,8BAAE,aAAF,EAAiBqN,MAAjB,CAAwB,WAAWD,IAAX,GAAkB,UAA1C;AACH,yBAFD;AAGAhM,4BAAI2M,QAAJ,CAAaZ,GAAb,CAAiB,UAAUC,IAAV,EAAgB;AAC7BpN,8BAAE,aAAF,EAAiBqN,MAAjB,CAAwB,WAAWD,IAAX,GAAkB,UAA1C;AACH,yBAFD;AAGAhM,4BAAI4M,aAAJ,CAAkBb,GAAlB,CAAsB,UAAUC,IAAV,EAAgB;AAClCpN,8BAAE,aAAF,EAAiBqN,MAAjB,CAAwB,WAAWD,IAAX,GAAkB,UAA1C;AACH,yBAFD;AAGApN,0BAAE,kBAAF,EAAsBoC,IAAtB;AACApC,0BAAE,QAAF,EAAYoC,IAAZ;AACH;AACJ,iBApBD,MAoBO;AACHpC,sBAAE,QAAF,EAAY2C,IAAZ,CAAiB,WAAjB,EAA8BpC,IAA9B,CAAmC,aAAnC;AACAP,sBAAE,kBAAF,EAAsBoC,IAAtB;AACH;AACJ,aA9Bc;AA+BfwL,mBAAO,UAAU6D,GAAV,EAAe;AAClBzR,kBAAE,QAAF,EAAY2C,IAAZ,CAAiB,WAAjB,EAA8BpC,IAA9B,CAAmC,aAAnC;AACAP,kBAAE,kBAAF,EAAsBoC,IAAtB;AACH;AAlCc,SAAnB;AAoCA,eAAO,KAAP,CAxCoC,CAwCtB;AACjB,KAzCD;AA0CA;AACApC,MAAE,cAAF,EAAkB4E,QAAlB,CAA2B,sBAA3B,EAAmD,OAAnD,EAA4D,YAAY;AACpE,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAW6C,WAAW3C,IAAX,CAAf;AACAA,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAK4I,cADL;AAEVzF,kBAAMX,QAFI;AAGVY,kBAAM,UAAUhD,IAAV,EAAgB;AAClBF,0BAAUuE,gBAAV,CAA2BpB,IAA3B,CAAgCX,IAAhC,EAAsCtC,IAAtC;AACH;AALS,SAAd;AAOH,KAVD;;AAYA;AACAN,MAAE,qBAAF,EAAyBgD,EAAzB,CAA4B,OAA5B,EAAqC,YAAY;AAC7C,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACAA,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAK+I,kBADL;AAEV5F,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KARD;;AAUA;AACAL,MAAE,oBAAF,EAAwBgD,EAAxB,CAA2B,OAA3B,EAAoC,YAAY;AAC5C,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACAA,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKiJ,uBADL;AAEV9F,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KARD;;AAWA;;;;;AAKA;;;;AAIA;AACA;AACAL,MAAE,2BAAF,EAA+BgD,EAA/B,CAAkC,OAAlC,EAA2C,YAAY;AACnD,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACAA,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAK2K,uBADL;AAEVxH,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KARD;AASA;AACAL,MAAE,UAAF,EAAc4E,QAAd,CAAuB,wBAAvB,EAAiD,OAAjD,EAA0D,YAAY;AAClE,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI+G,aAAanE,KAAK6B,OAAL,CAAa,eAAb,CAAjB;AACA,YAAI/B,WAAWyF,YAAYvF,IAAZ,EAAkBmE,UAAlB,CAAf;AACAnE,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAK8K,0BADL;AAEV3H,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUiE;AAHN,SAAd;AAKH,KATD;AAUA;AACArE,MAAE,UAAF,EAAc4E,QAAd,CAAuB,qBAAvB,EAA8C,OAA9C,EAAuD,YAAY;AAC/D,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI+G,aAAanE,KAAK6B,OAAL,CAAa,eAAb,CAAjB;AACA,YAAI/B,WAAWyF,YAAYvF,IAAZ,EAAkBmE,UAAlB,CAAf;AACAnE,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAK4K,uBADL;AAEVzH,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUiE;AAHN,SAAd;AAKH,KATD;AAUA;AACArE,MAAE,UAAF,EAAc4E,QAAd,CAAuB,6BAAvB,EAAsD,OAAtD,EAA+D,YAAY;AACvE,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI+G,aAAanE,KAAK6B,OAAL,CAAa,eAAb,CAAjB;AACA,YAAI/B,WAAWyF,YAAYvF,IAAZ,EAAkBmE,UAAlB,CAAf;AACAnE,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKmL,qBADL;AAEVhI,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUiE;AAHN,SAAd;AAKH,KATD;AAUA;AACArE,MAAE,QAAF,EAAY4E,QAAZ,CAAqB,qCAArB,EAA4D,OAA5D,EAAqE,YAAY;AAC7E,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWkM,iBAAiBhM,IAAjB,CAAf;AACAA,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKoL,sBADL;AAEVjI,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUgE;AAHN,SAAd;AAKH,KARD;;AAUApE,MAAE,QAAF,EAAY4E,QAAZ,CAAqB,sBAArB,EAA6C,OAA7C,EAAsD,YAAY;AAC9D,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWwD,WAAWtD,IAAX,CAAf;AACA,YAAIgP,WAAWhP,KAAK6B,OAAL,CAAa,QAAb,EAAuB9B,IAAvB,CAA4B,UAA5B,CAAf;AACAC,aAAKiP,SAAL,CAAe;AACXlR,kBAAMiR,QADK;AAEXE,uBAAW,QAFA;AAGXxO,kBAAM,YAAY;AACdV,qBAAKO,QAAL,CAAc;AACVC,8BAAUlD,KAAK+K,wBADL;AAEV5H,0BAAMX,QAFI;AAGVY,0BAAM,UAAUhD,IAAV,EAAgB;AAClBF,kCAAUuE,gBAAV,CAA2BpB,IAA3B,CAAgCX,IAAhC,EAAsCtC,IAAtC;AACH;AALS,iBAAd;AAOH;AAXU,SAAf;AAcH,KAlBD;;AAqBA;AACAN,MAAE,UAAF,EAAc4E,QAAd,CAAuB,4BAAvB,EAAqD,OAArD,EAA8D,YAAY;AACtE,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI+G,aAAanE,KAAK6B,OAAL,CAAa,oBAAb,CAAjB;AACA,YAAI/B,WAAWyF,YAAYvF,IAAZ,EAAkBmE,UAAlB,CAAf;AACAnE,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKgL,4BADL;AAEV7H,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUiE;AAHN,SAAd;AAKH,KATD;AAUA;AACArE,MAAE,UAAF,EAAc4E,QAAd,CAAuB,wBAAvB,EAAiD,OAAjD,EAA0D,YAAY;AAClE,YAAIsC,QAAQlH,EAAE,IAAF,CAAZ;AACAgH,iBAASE,KAAT;AACAA,cAAMzC,OAAN,CAAc,IAAd,EAAoBlE,IAApB,CAAyB,qEAAzB;AACH,KAJD;AAKA;AACAP,MAAE,UAAF,EAAc4E,QAAd,CAAuB,wBAAvB,EAAiD,OAAjD,EAA0D,YAAY;AAClE,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI+G,aAAanE,KAAK6B,OAAL,CAAa,IAAb,CAAjB,CAFkE,CAE7B;AACrC,YAAI/B,WAAWyF,YAAYvF,IAAZ,EAAkBmE,UAAlB,CAAf,CAHkE,CAGpB;AAC9C,YAAIgL,YAAYhL,WAAWpE,IAAX,CAAgB,oBAAhB,CAAhB,CAJkE,CAIX;AACvD,YAAIqP,cAAcjL,WAAWpE,IAAX,CAAgB,0BAAhB,CAAlB,CALkE,CAKH;AAC/D,YAAIsP,cAAclL,WAAWpE,IAAX,CAAgB,YAAhB,CAAlB,CANkE,CAMjB;AACjD,YAAIuP,eAAenL,WAAWpE,IAAX,CAAgB,aAAhB,EAA+BA,IAA/B,CAAoC,OAApC,CAAnB,CAPkE,CAOD;AACjE,YAAIwP,SAAS5C,OAAOwC,UAAUlP,GAAV,EAAP,CAAb,CARkE,CAQ5B;AACtC,YAAIuP,YAAY7C,OAAO2C,aAAarP,GAAb,EAAP,CAAhB,CATkE,CAStB;AAC5C,YAAIwP,WAAW9C,OAAOyC,YAAYnP,GAAZ,EAAP,CAAf,CAVkE,CAUxB;AAC1C,YAAIkK,WAAWoF,SAASC,SAAxB,CAXkE,CAW/B;AACnC,YAAIE,OAAO,IAAX;;AAEAL,oBAAY1R,IAAZ,CAAiBwM,QAAjB,EAdkE,CActC;;AAE5B,YAAIoF,SAAS,MAAb,EAAqB;AACjBhO,kBAAM,aAAN;AACAmO,mBAAO,KAAP;AACH;AACD,YAAIvF,WAAW,OAAf,EAAwB;AACpB5I,kBAAM,kBAAN;AACAmO,mBAAO,KAAP;AACH;AACD,YAAID,WAAWtF,QAAf,EAAyB;AACrB5I,kBAAM,WAAN;AACAmO,mBAAO,KAAP;AACH;AACD,YAAIA,IAAJ,EAAU;AACN1P,iBAAKO,QAAL,CAAc;AACVC,0BAAUlD,KAAKiL,wBADL;AAEV9H,sBAAMX,QAFI;AAGVY,sBAAMlD,UAAUiE;AAHN,aAAd;AAKH;AAEJ,KApCD;AAqCA;AACArE,MAAE,UAAF,EAAc4E,QAAd,CAAuB,uBAAvB,EAAgD,OAAhD,EAAyD,YAAY;AACjE,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI+G,aAAanE,KAAK6B,OAAL,CAAa,IAAb,CAAjB;AACA,YAAI/B,WAAWyF,YAAYvF,IAAZ,EAAkBmE,UAAlB,CAAf;AACA,YAAIiJ,QAAQ,MAAR,CAAJ,EAAqB;AACjBpN,iBAAKO,QAAL,CAAc;AACVC,0BAAUlD,KAAKkL,uBADL;AAEV/H,sBAAMX,QAFI;AAGVY,sBAAMlD,UAAUiE;AAHN,aAAd;AAKH;AAEJ,KAZD;;AAcA;AACArE,MAAE,wBAAF,EAA4BgD,EAA5B,CAA+B,OAA/B,EAAwC,YAAY;AAChD,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACAA,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAK6K,oBADL;AAEV1H,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KARD;AASA;AACAL,MAAE,UAAF,EAAc4E,QAAd,CAAuB,kBAAvB,EAA2C,OAA3C,EAAoD,YAAY;AAC5D,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI+G,aAAanE,KAAK6B,OAAL,CAAa,eAAb,CAAjB;AACA,YAAI/B,WAAWyF,YAAYvF,IAAZ,EAAkBmE,UAAlB,CAAf;AACAnE,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKqL,kBADL;AAEVlI,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUiE;AAHN,SAAd;AAKH,KATD;AAUA;;AAEA;;;AAGA;AACArE,MAAE,8BAAF,EAAkCgD,EAAlC,CAAqC,OAArC,EAA8C,YAAY;AACtD,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACAA,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKsL,uBADL;AAEVnI,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KARD;;AAUA;;;AAGA;AACAL,MAAE,uBAAF,EAA2BgD,EAA3B,CAA8B,OAA9B,EAAuC,YAAY;AAC/C,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACAA,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAK0J,uBADL;AAEVvG,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KARD;;AAUA;AACAL,MAAE,kCAAF,EAAsCgD,EAAtC,CAAyC,OAAzC,EAAkD,YAAY;AAC1D,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAI0C,WAAWqC,YAAY/E,EAAE,uBAAF,CAAZ,CAAf,CAT0D,CASF;AACxD4C,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAK0J,uBADL;AAEVvG,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KAfD;;AAkBA;AACAL,MAAE,gBAAF,EAAoB4E,QAApB,CAA6B,qCAA7B,EAAoE,OAApE,EAA6E,YAAY;AACrF,YAAIlC,WAAW,EAAf;AACAA,iBAAS,SAAT,IAAsB1C,EAAE,UAAF,EAAc6C,GAAd,EAAtB;AACA,YAAID,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAIgQ,QAAQ,OAAR,CAAJ,EAAsB;AAClBpN,iBAAKO,QAAL,CAAc;AACVC,0BAAUlD,KAAK2J,kCADL;AAEVxG,sBAAMX,QAFI;AAGVY,sBAAMlD,UAAUiE;AAHN,aAAd;AAKH;AACD,eAAO,KAAP,CAXqF,CAWvE;AACjB,KAZD;;AAcA;AACArE,MAAE,gBAAF,EAAoB4E,QAApB,CAA6B,sCAA7B,EAAqE,OAArE,EAA8E,YAAY;AACtF,YAAIlC,WAAW,EAAf;AACAA,iBAAS,SAAT,IAAsB1C,EAAE,UAAF,EAAc6C,GAAd,EAAtB;AACA,YAAID,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAIgQ,QAAQ,OAAR,CAAJ,EAAsB;AAClBpN,iBAAKO,QAAL,CAAc;AACVC,0BAAUlD,KAAK4J,mCADL;AAEVzG,sBAAMX,QAFI;AAGVY,sBAAMlD,UAAUiE;AAHN,aAAd;AAKH;AACD,eAAO,KAAP,CAXsF,CAWxE;AACjB,KAZD;;AAeA;AACArE,MAAE,sCAAF,EAA0CgD,EAA1C,CAA6C,OAA7C,EAAsD,YAAY;AAC9DhD,UAAE,mBAAF,EAAuBoC,IAAvB;AACApC,UAAE,mCAAF,EAAuCC,IAAvC;AACH,KAHD;AAIAD,MAAE,oCAAF,EAAwCgD,EAAxC,CAA2C,OAA3C,EAAoD,YAAY;AAC5D,YAAIuP,MAAMC,WAAWxS,EAAE,cAAF,EAAkB6C,GAAlB,EAAX,EAAoC4P,OAApC,CAA4C,CAA5C,IAAiDD,WAAWxS,EAAE,aAAF,EAAiBqH,IAAjB,EAAX,EAAoCoL,OAApC,CAA4C,CAA5C,CAA3D;AACA,YAAI,CAACF,GAAL,EAAU;AACNA,kBAAM,EAAN;AACH;AACD,YAAIA,MAAM,CAAV,EAAa;AACTA,kBAAM,CAAN;AACH;AACDvS,UAAE,kBAAF,EAAsBqH,IAAtB,CAA2BkL,GAA3B;AACH,KATD;;AAWA;AACAvS,MAAE,eAAF,EAAmB4E,QAAnB,CAA4B,cAA5B,EAA4C,OAA5C,EAAqD,YAAY;;AAE7D;AACA,YAAI5E,EAAE,eAAF,EAAmB6C,GAAnB,MAA4B,CAA5B,IAAiC7C,EAAE,kBAAF,EAAsB6C,GAAtB,MAA+B,CAApE,EAAuE;AACnEsB,kBAAM,aAAN;AACA,mBAAO,KAAP;AACH;;AAED,YAAIqO,WAAWxS,EAAE,cAAF,EAAkB6C,GAAlB,EAAX,IAAsC2P,WAAWxS,EAAE,aAAF,EAAiBqH,IAAjB,EAAX,CAA1C,EAA+E;AAC3ElD,kBAAM,oBAAN;AACA,mBAAO,KAAP;AACH;;AAED,YAAIvB,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI8G,aAAalE,KAAK6B,OAAL,CAAa,mBAAb,CAAjB;AACA,YAAI/B,WAAW,EAAf;AACA,YAAIkP,WAAW9K,WAAWnE,IAAX,CAAgB,OAAhB,CAAf;AACA,YAAI8E,UAAU,6BAAd;AACAzH,UAAE,IAAF,EAAQ6R,SAAR,CAAkB;AACdlR,kBAAMiR,QADQ;AAEdE,uBAAW,QAFG;AAGdxO,kBAAM,YAAY;AACdZ,2BAAWmE,UAAUjE,IAAV,EAAgBkE,UAAhB,CAAX;AACA9G,kBAAE,MAAF,EAAUqN,MAAV,CAAiB5F,OAAjB;AACA7E,qBAAKO,QAAL,CAAc;AACVC,8BAAUlD,KAAK6J,2BADL;AAEV1G,0BAAMX,QAFI;AAGVY,0BAAMlD,UAAUiE;AAHN,iBAAd;AAKH;AAXa,SAAlB;AAaH,KA/BD;;AAkCA;AACArE,MAAE,wBAAF,EAA4BgD,EAA5B,CAA+B,OAA/B,EAAwC,YAAY;AAChD,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACAA,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAK8J,qBADL;AAEV3G,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KARD;;AAUA;AACAL,MAAE,kCAAF,EAAsCgD,EAAtC,CAAyC,OAAzC,EAAkD,YAAY;AAC1D,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACA;AACA;AACA;;AAEA,YAAI0C,WAAWqC,YAAY/E,EAAE,4BAAF,CAAZ,CAAf,CAN0D,CAMG;AAC7D4C,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAK8J,qBADL;AAEV3G,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KAZD;;AAeA;AACAL,MAAE,gBAAF,EAAoB4E,QAApB,CAA6B,kCAA7B,EAAiE,OAAjE,EAA0E,YAAY;AAClF,YAAIlC,WAAW,EAAf;AACAA,iBAAS,SAAT,IAAsB1C,EAAE,UAAF,EAAc6C,GAAd,EAAtB;AACAH,iBAAS,QAAT,IAAqB1C,EAAE,SAAF,EAAa6C,GAAb,EAArB;AACAH,iBAAS,aAAT,IAA0B1C,EAAE,cAAF,EAAkB6C,GAAlB,EAA1B;AACA,YAAID,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAIgQ,QAAQ,SAAR,CAAJ,EAAwB;AACpBpN,iBAAKO,QAAL,CAAc;AACVC,0BAAUlD,KAAK+J,+BADL;AAEV5G,sBAAMX,QAFI;AAGVY,sBAAMlD,UAAUiE;AAHN,aAAd;AAKH;AACD,eAAO,KAAP,CAbkF,CAapE;AACjB,KAdD;;AAgBA;AACArE,MAAE,gBAAF,EAAoB4E,QAApB,CAA6B,oCAA7B,EAAmE,OAAnE,EAA4E,YAAY;AACpF,YAAIlC,WAAW,EAAf;AACAA,iBAAS,SAAT,IAAsB1C,EAAE,UAAF,EAAc6C,GAAd,EAAtB;AACAH,iBAAS,QAAT,IAAqB1C,EAAE,SAAF,EAAa6C,GAAb,EAArB;AACA,YAAID,OAAO5C,EAAE,IAAF,CAAX;AACA4C,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKgK,iCADL;AAEV7G,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUiE;AAHN,SAAd;AAKA,eAAO,KAAP,CAVoF,CAUtE;AACjB,KAXD;;AAaA;AACArE,MAAE,QAAF,EAAY4E,QAAZ,CAAqB,kCAArB,EAAyD,OAAzD,EAAkE,YAAY;;AAE1E,YAAI5E,EAAE,eAAF,EAAmB6C,GAAnB,MAA4B,IAA5B,IAAoC7C,EAAE,eAAF,EAAmB6C,GAAnB,MAA4B,EAApE,EAAwE;AACpEsB,kBAAM,SAAN;AACA,mBAAO,KAAP;AACH;;AAED,YAAIzB,WAAW,EAAf;AACAA,iBAAS,SAAT,IAAsB1C,EAAE,UAAF,EAAc6C,GAAd,EAAtB;AACAH,iBAAS,QAAT,IAAqB1C,EAAE,SAAF,EAAa6C,GAAb,EAArB;AACAH,iBAAS,cAAT,IAA2B1C,EAAE,eAAF,EAAmB6C,GAAnB,EAA3B;;AAEA,YAAID,OAAO5C,EAAE,IAAF,CAAX;;AAEA4C,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKiK,+BADL;AAEV9G,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUiE;AAHN,SAAd;;AAMA,eAAO,KAAP,CApB0E,CAoB5D;AACjB,KArBD;;AAwBA;AACArE,MAAE,0CAAF,EAA8CgD,EAA9C,CAAiD,OAAjD,EAA0D,YAAY;AAClE,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACAA,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKkK,uCADL;AAEV/G,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KARD;;AAUA;AACAL,MAAE,iCAAF,EAAqCgD,EAArC,CAAwC,OAAxC,EAAiD,YAAY;AACzD,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACAF,iBAAS,SAAT,IAAsB1C,EAAE,UAAF,EAAc6C,GAAd,EAAtB;AACAD,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKmK,iCADL;AAEVhH,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KATD;;AAWA;AACAL,MAAE,eAAF,EAAmB4E,QAAnB,CAA4B,2BAA5B,EAAyD,OAAzD,EAAkE,YAAY;AAC1E,YAAIsC,QAAQlH,EAAE,IAAF,CAAZ;AACAgH,iBAASE,KAAT;AACAA,cAAMzC,OAAN,CAAc,IAAd,EAAoBlE,IAApB,CAAyB,sEAAzB;AACH,KAJD;;AAOA;AACAP,MAAE,eAAF,EAAmB4E,QAAnB,CAA4B,2BAA5B,EAAyD,OAAzD,EAAkE,YAAY;AAC1E,YAAIlC,WAAW,EAAf;AACA,YAAIgQ,SAAS1S,EAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,CAAb;AACA/B,mBAAWgQ,OAAOpS,IAAP,EAAX,CAH0E,CAGhD;AAC1BoC,iBAAS,eAAT,IAA4BgQ,OAAO/P,IAAP,CAAY,cAAZ,EAA4BE,GAA5B,EAA5B,CAJ0E,CAIX;AAC/D,YAAIqE,QAAQlH,EAAE,IAAF,CAAZ;AACA0H,iBAASR,KAAT,EAAgB,IAAhB,EAAsBhH,KAAKsK,gCAA3B,EAA6D9H,QAA7D,EAAuEtC,UAAUiE,iBAAjF;AACA6C,cAAMzC,OAAN,CAAc,IAAd,EAAoBlE,IAApB,CAAyB,yEAAyE,8CAAlG;AACH,KARD;;AAWA;AACAP,MAAE,eAAF,EAAmB4E,QAAnB,CAA4B,uCAA5B,EAAqE,OAArE,EAA8E,YAAY;;AAEtF,YAAIlC,WAAW,EAAf;AACA,YAAI8C,WAAW,EAAf;AACA,YAAIE,YAAY,EAAhB;AACA,YAAIiN,aAAa,EAAjB;AACA,YAAIC,cAAc,EAAlB;AACA,YAAIhN,UAAU,IAAd;AACAC,mBAAW7F,EAAE,IAAF,EAAQyE,OAAR,CAAgB,eAAhB,CAAX;AACA,YAAIqB,YAAYD,SAASlD,IAAT,CAAc,kBAAd,EAAkCA,IAAlC,CAAuC,IAAvC,CAAhB;AACA,YAAImD,UAAU9E,MAAV,IAAoB,CAAxB,EAA2B;AACvB,gBAAIuR,MAAM,CAAV,CADuB,CACV;AACbvS,cAAEkB,IAAF,CAAO4E,SAAP,EAAkB,UAAU3E,CAAV,EAAa;AAC3B,oBAAIA,KAAK,CAAT,EAAY;AACR,2BAAO,IAAP,CADQ,CACK;AAChB;;AAED;AACA,oBAAI2E,UAAUC,EAAV,CAAa5E,CAAb,EAAgBwB,IAAhB,CAAqB,sBAArB,EAA6CkQ,IAA7C,CAAkD,SAAlD,CAAJ,EAAkE;AAC9DN,0BAD8D,CACvD;AACP7P,+BAAWoD,UAAUC,EAAV,CAAa5E,CAAb,EAAgBb,IAAhB,CAAqB,KAArB,CAAX;AACA,wBAAIoC,QAAJ,EAAc;AACVgD,kCAAUM,IAAV,CAAetD,QAAf;AACH;AACJ;AACJ,aAbD;AAcA,gBAAI6P,OAAO,CAAX,EAAc;AAAE;AACZpO,sBAAM,YAAN;AACA,uBAAO,KAAP;AACH;AACDyB,sBAAUF,UAAUO,IAAV,CAAe,GAAf,CAAV;AACAT,qBAAS,KAAT,IAAkBI,OAAlB;AACH;;AAED,YAAIhD,OAAO5C,EAAE,IAAF,CAAX;AACA;;AAEA,YAAIgQ,QAAQ,MAAR,CAAJ,EAAqB;AACjBpN,iBAAKO,QAAL,CAAc;AACVC,0BAAUlD,KAAKqK,qCADL;AAEVlH,sBAAMmC,QAFI;AAGVlC,sBAAMlD,UAAUiE;AAHN,aAAd;AAKH;AACD,eAAO,KAAP,CA5CsF,CA4CxE;AACjB,KA7CD;;AA+CA;AACArE,MAAE,eAAF,EAAmB4E,QAAnB,CAA4B,wCAA5B,EAAsE,OAAtE,EAA+E,YAAY;AACvF,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAW6C,WAAW3C,IAAX,CAAf;AACA,YAAIoN,QAAQ,MAAR,CAAJ,EAAqB;AACjBpN,iBAAKO,QAAL,CAAc;AACVC,0BAAUlD,KAAKoK,sCADL;AAEVjH,sBAAMX,QAFI;AAGVY,sBAAMlD,UAAUiE;AAHN,aAAd;AAKH;AACD,eAAO,KAAP,CAVuF,CAUzE;AACjB,KAXD;;AAaA;AACArE,MAAE,sCAAF,EAA0CgD,EAA1C,CAA6C,OAA7C,EAAsD,YAAY;AAC9D,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACAF,iBAAS,SAAT,IAAsB1C,EAAE,UAAF,EAAc6C,GAAd,EAAtB;AACAD,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKuK,sCADL;AAEVpH,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KATD;;AAWA;AACAL,MAAE,eAAF,EAAmB4E,QAAnB,CAA4B,qCAA5B,EAAmE,OAAnE,EAA4E,YAAY;;AAEpF,YAAIlC,WAAW,EAAf;AACA,YAAI8C,WAAW,EAAf;AACA,YAAIE,YAAY,EAAhB;AACA,YAAIiN,aAAa,EAAjB;AACA,YAAIC,cAAc,EAAlB;AACA,YAAIhN,UAAU,IAAd;AACA,YAAIkN,WAAW,IAAf;AACAjN,mBAAW7F,EAAE,IAAF,EAAQyE,OAAR,CAAgB,eAAhB,CAAX;AACA,YAAIqB,YAAYD,SAASlD,IAAT,CAAc,kBAAd,EAAkCA,IAAlC,CAAuC,IAAvC,CAAhB;AACA,YAAImD,UAAU9E,MAAV,IAAoB,CAAxB,EAA2B;AACvB,gBAAIuR,MAAM,CAAV,CADuB,CACV;AACb,gBAAIQ,WAAW,CAAf,CAFuB,CAEL;AAClB/S,cAAEkB,IAAF,CAAO4E,SAAP,EAAkB,UAAU3E,CAAV,EAAa;AAC3B,oBAAIA,KAAK,CAAT,EAAY;AACR,2BAAO,IAAP,CADQ,CACK;AAChB;;AAED;AACA,oBAAI2E,UAAUC,EAAV,CAAa5E,CAAb,EAAgBwB,IAAhB,CAAqB,sBAArB,EAA6CkQ,IAA7C,CAAkD,SAAlD,CAAJ,EAAkE;AAC9DN,0BAD8D,CACvD;AACP7P,+BAAWoD,UAAUC,EAAV,CAAa5E,CAAb,EAAgBb,IAAhB,CAAqB,SAArB,CAAX;AACA,wBAAIoC,QAAJ,EAAc;AACVgD,kCAAUM,IAAV,CAAetD,QAAf;AACH;AACD;AACAiQ,iCAAa7M,UAAUC,EAAV,CAAa5E,CAAb,EAAgBwB,IAAhB,CAAqB,QAArB,EAA+BE,GAA/B,EAAb;AACA,wBAAI8P,UAAJ,EAAgB;AACZC,oCAAY5M,IAAZ,CAAiB2M,UAAjB;AACH,qBAFD,MAEO;AACHI;AACA5O,8BAAM,OAAN;AACA,+BAAO,KAAP;AACH;AACJ;AACJ,aAtBD;AAuBA,gBAAIoO,OAAO,CAAX,EAAc;AAAE;AACZpO,sBAAM,YAAN;AACA,uBAAO,KAAP;AACH;;AAED,gBAAI4O,WAAW,CAAf,EAAkB;AAAE;AAChB,uBAAO,KAAP;AACH;AACDnN,sBAAUF,UAAUO,IAAV,CAAe,GAAf,CAAV;AACAT,qBAAS,SAAT,IAAsBI,OAAtB;;AAEAoN,sBAAUJ,YAAY3M,IAAZ,CAAiB,GAAjB,CAAV;AACAT,qBAAS,gBAAT,IAA6BwN,OAA7B;AACH;AACD,YAAIpQ,OAAO5C,EAAE,IAAF,CAAX;AACA;AACAwF,iBAAS,SAAT,IAAsBxF,EAAE,UAAF,EAAc6C,GAAd,EAAtB;AACA,YAAI4E,UAAU,6BAAd;AACA,YAAIuI,QAAQ,MAAR,CAAJ,EAAqB;AACjBhQ,cAAE,MAAF,EAAUqN,MAAV,CAAiB5F,OAAjB;AACA7E,iBAAKO,QAAL,CAAc;AACVC,0BAAUlD,KAAKyK,mCADL;AAEVtH,sBAAMmC,QAFI;AAGVlC,sBAAMlD,UAAUiE;AAHN,aAAd;AAKH;AACD,eAAO,KAAP,CA/DoF,CA+DtE;AAEjB,KAjED;;AAmEA;AACArE,MAAE,eAAF,EAAmB4E,QAAnB,CAA4B,sCAA5B,EAAoE,OAApE,EAA6E,YAAY;AACrF,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAW6C,WAAW3C,IAAX,CAAf;AACAF,iBAAS,SAAT,IAAsB1C,EAAE,UAAF,EAAc6C,GAAd,EAAtB;;AAEA;AACA,YAAIoQ,iBAAiBjT,EAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsB9B,IAAtB,CAA2B,cAA3B,EAA2CE,GAA3C,EAArB;AACA,YAAIoQ,kBAAkBC,SAAlB,IAA+BD,kBAAkB,EAAjD,IAAuDA,kBAAkB,IAA7E,EAAmF;AAC/E9O,kBAAM,OAAN;AACA,mBAAO,KAAP;AACH;AACDzB,iBAAS,eAAT,IAA4BuQ,cAA5B,CAXqF,CAWzC;AAC5C,YAAIxL,UAAU,6BAAd;AACA,YAAIuI,QAAQ,MAAR,CAAJ,EAAqB;AACjBhQ,cAAE,MAAF,EAAUqN,MAAV,CAAiB5F,OAAjB;AACA7E,iBAAKO,QAAL,CAAc;AACVC,0BAAUlD,KAAKwK,oCADL;AAEVrH,sBAAMX,QAFI;AAGVY,sBAAMlD,UAAUiE;AAHN,aAAd;AAKH;AACD,eAAO,KAAP,CArBqF,CAqBvE;AACjB,KAtBD;;AAyBA;AACArE,MAAE,4BAAF,EAAgCgD,EAAhC,CAAmC,OAAnC,EAA4C,YAAY;AACpD,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACAA,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAK0K,4BADL;AAEVvH,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KARD;AASA;;;;AAKA;AACAL,MAAE,0BAAF,EAA8BgD,EAA9B,CAAiC,OAAjC,EAA0C,YAAY;AAClD,YAAIJ,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAI0C,WAAWqC,YAAYnC,IAAZ,CAAf;AACAA,aAAKO,QAAL,CAAc;AACVC,sBAAUlD,KAAKqJ,sBADL;AAEVlG,kBAAMX,QAFI;AAGVY,kBAAMlD,UAAUC;AAHN,SAAd;AAKH,KARD;AAWH,CA31ED;;AA+1EA;;;;AAIA,CAAC,UAAU8S,CAAV,EAAanT,CAAb,EAAgB;AACb,aAASoT,gBAAT,CAA0BC,IAA1B,EAAgC;AAC5B;;;;AAIA,YAAIC,cAAc;AACd3S,kBAAM;AADQ,SAAlB;AAGA;;;AAGA,aAAKA,IAAL,GAAY0S,KAAK1S,IAAjB;AACA,aAAK4S,WAAL,GAAmBF,KAAK1S,IAAL,CAAUgC,IAAV,CAAe,gBAAf,CAAnB;AACA,aAAK6Q,MAAL,GAAcH,KAAK1S,IAAL,CAAUgC,IAAV,CAAe,eAAf,CAAd;;AAEA;;;AAGA,aAAK8Q,aAAL,GAAqB,CAArB;AACA;;;AAGA,aAAKC,WAAL,GAAmB,CAAnB;AACA;;;AAGA,aAAKC,WAAL,GAAmB,CAAnB;AACA;;;AAGA,aAAKN,IAAL,GAAYrT,EAAE0Q,MAAF,CAAS2C,IAAT,CAAZ;;AAEA,aAAKO,KAAL;AACH;;AAGD5T,MAAE0Q,MAAF,CAAS0C,iBAAiBS,SAA1B,EAAqC;AACjC;;;;AAIAD,eAAO,YAAY;AACf,gBAAIhR,OAAO,IAAX;AACAA,iBAAKkR,OAAL,GAAelR,KAAK2Q,WAAL,CAAiB5Q,IAAjB,CAAsB,iBAAtB,CAAf;AACAC,iBAAKmR,UAAL,GAAkBnR,KAAKjC,IAAL,CAAUgC,IAAV,CAAe,cAAf,EAA+B8B,OAA/B,CAAuC,OAAvC,CAAlB;AACA7B,iBAAKoR,SAAL;AACApR,iBAAKqR,SAAL;AACArR,iBAAKsR,mBAAL;AACH,SAZgC;AAajC;;;;AAIAD,mBAAW,YAAY;AACnB,gBAAIrR,OAAO,IAAX;AACAA,iBAAKkR,OAAL,CAAa5S,IAAb,CAAkB,UAAUkH,KAAV,EAAiBgF,IAAjB,EAAuB;AACrCpN,kBAAEoN,IAAF,EAAQxM,IAAR,CAAa,OAAb,EAAsBwH,KAAtB;AACH,aAFD;AAIH,SAvBgC;AAwBjC;;;;;;AAMA+L,wBAAgB,UAAU7T,IAAV,EAAgB8H,KAAhB,EAAuB,CAEtC,CAhCgC;AAiCjC8L,6BAAqB,YAAY;AAC7B,gBAAItR,OAAO,IAAX;AACA;AACAA,iBAAKjC,IAAL,CAAU8D,OAAV,CAAkB,MAAlB,EAA0BG,QAA1B,CAAmC,eAAnC,EAAoD,OAApD,EAA6D,YAAY;AACrEhC,qBAAKwR,gBAAL,CAAsBpU,EAAE,IAAF,CAAtB,EAA+B,CAA/B;AACH,aAFD;;AAIA4C,iBAAKjC,IAAL,CAAU8D,OAAV,CAAkB,MAAlB,EAA0BG,QAA1B,CAAmC,gBAAnC,EAAqD,OAArD,EAA8D,YAAY;AACtEhC,qBAAKwR,gBAAL,CAAsBpU,EAAE,IAAF,CAAtB,EAA+B,CAA/B;AACH,aAFD;;AAIA4C,iBAAKjC,IAAL,CAAU8D,OAAV,CAAkB,MAAlB,EAA0BG,QAA1B,CAAmC,gBAAnC,EAAqD,OAArD,EAA8D,YAAY;AACtEhC,qBAAKwR,gBAAL,CAAsBpU,EAAE,IAAF,CAAtB,EAA+B,CAA/B;AACH,aAFD;;AAIA4C,iBAAKjC,IAAL,CAAU8D,OAAV,CAAkB,MAAlB,EAA0BG,QAA1B,CAAmC,kBAAnC,EAAuD,OAAvD,EAAgE,YAAY;AACxEhC,qBAAKwR,gBAAL,CAAsBpU,EAAE,IAAF,CAAtB,EAA+B,CAA/B;AACH,aAFD;AAGH,SAnDgC;AAoDjC;;;;AAIAgU,mBAAW,YAAY;AACnB,gBAAIpR,OAAO,IAAX;;AAEA;AACAA,iBAAKkR,OAAL,CAAalP,QAAb,CAAsB,sBAAtB,EAA8C,QAA9C,EAAwD,YAAY;AAChE,oBAAIyP,aAAa,EAAjB;AACA,oBAAInN,QAAQlH,EAAE,IAAF,CAAZ;AACA,oBAAIsU,kBAAkB1R,KAAKkR,OAAL,CAAanR,IAAb,CAAkB,8BAAlB,EAAkD3B,MAAxE;AACA,oBAAIuT,eAAerN,MAAMzC,OAAN,CAAc,UAAd,EAA0B6B,QAA1B,CAAmC,YAAnC,EAAiD3D,IAAjD,CAAsD,MAAtD,EAA8DrC,IAA9D,CAAmE,OAAnE,CAAnB;AACA+T,6BAAanN,MAAM5G,IAAN,EAAb;;AAEAsC,qBAAK4R,WAAL,CAAiBF,eAAjB;AACA,oBAAIpN,MAAM2L,IAAN,CAAW,SAAX,CAAJ,EAA2B;AACvBjQ,yBAAK6R,UAAL,CAAgBJ,UAAhB,EAA4BE,YAA5B;AACH,iBAFD,MAEO;AACH3R,yBAAK8R,UAAL,CAAgBL,UAAhB;AACH;;AAGD,oBAAIM,WAAW/R,KAAKgS,aAAL,EAAf;AACAD,2BAAW/R,KAAKiS,eAAL,CAAqBF,QAArB,CAAX;AACA/R,qBAAKkS,oBAAL,CAA0BH,QAA1B,EAAoC3U,EAAE,iBAAF,EAAqB6C,GAArB,MAA8B,MAAlE;AAEH,aAnBD;;AAqBA;AACA7C,cAAE,iBAAF,EAAqB4E,QAArB,CAA8B,mBAA9B,EAAmD,QAAnD,EAA6D,YAAY;AACrEhC,qBAAKmS,SAAL;AACH,aAFD;AAGA;AACAnS,iBAAKjC,IAAL,CAAUiE,QAAV,CAAmB,aAAnB,EAAkC,OAAlC,EAA2C,YAAY;AACnD,oBAAIoQ,cAAchV,EAAE,IAAF,EAAQyE,OAAR,CAAgB,WAAhB,CAAlB;AACA7B,qBAAKqS,YAAL,CAAkBD,WAAlB;AACH,aAHD;AAIA;AACApS,iBAAKjC,IAAL,CAAUiE,QAAV,CAAmB,iBAAnB,EAAsC,OAAtC,EAA+C,YAAY;AACvD5E,kBAAE,YAAF,EAAgBgD,EAAhB,CAAmB,QAAnB,EAA6B,YAAY;AACrC,wBAAIkS,aAAa;AACbC,gCAAQnV,EAAE,WAAF,EAAeqH,IAAf;AADK,qBAAjB;AAGA,wBAAI+N,QAAQpV,EAAE,aAAF,EAAiBqV,IAAjB,CAAsB,WAAtB,EAAmC1S,IAAnC,CAAwC,IAAxC,EAA8CA,IAA9C,CAAmD,IAAnD,CAAZ;AACA,wBAAIyS,MAAMzS,IAAN,CAAW,KAAX,EAAkB3B,MAAlB,GAA2B,CAA/B,EAAkC;AAC9B4B,6BAAK0S,UAAL,CAAgBJ,UAAhB;AACH,qBAFD,MAEO;AACH/Q,8BAAM,WAAN;AACH;AACJ,iBAVD;AAWH,aAZD;AAaA;AACAvB,iBAAKjC,IAAL,CAAUiE,QAAV,CAAmB,oCAAnB,EAAyD,OAAzD,EAAkE,YAAY;AAC1E,oBAAIsC,QAAQlH,EAAE,IAAF,CAAZ;AACA,oBAAIoV,QAAQpV,EAAE,aAAF,EAAiBqV,IAAjB,CAAsB,WAAtB,EAAmC1S,IAAnC,CAAwC,IAAxC,EAA8CA,IAA9C,CAAmD,IAAnD,CAAZ;AACA,oBAAIyS,MAAMzS,IAAN,CAAW,KAAX,EAAkB3B,MAAlB,GAA2B,CAA/B,EAAkC;AAC9B,wBAAIuU,SAASrO,MAAMvE,IAAN,CAAW,KAAX,EAAkB/B,IAAlB,CAAuB,KAAvB,CAAb;AACA,wBAAI4U,MAAMJ,MAAMzS,IAAN,CAAW,GAAX,CAAV;AACAuE,0BAAM1F,QAAN,CAAe,SAAf;AACAgU,wBAAIzP,EAAJ,CAAO,CAAP,EAAU4H,MAAV,CAAiB,IAAjB,EAAuBpN,IAAvB,CAA4B,8DAA8DgV,MAA9D,GAAuE,IAAnG;AACH,iBALD,MAKO;AACHpR,0BAAM,WAAN;AACH;AACJ,aAXD;;AAaA;AACAvB,iBAAKjC,IAAL,CAAUiE,QAAV,CAAmB,kBAAnB,EAAuC,OAAvC,EAAgD,YAAY;AACxD5E,kBAAE,aAAF,EAAiBgD,EAAjB,CAAoB,QAApB,EAA8B,YAAY;AACtC,wBAAIkS,aAAa;AACbC,gCAAQnV,EAAE,YAAF,EAAgBqH,IAAhB;AADK,qBAAjB;AAGA,wBAAI+N,QAAQpV,EAAE,cAAF,EAAkBqV,IAAlB,CAAuB,YAAvB,EAAqC1S,IAArC,CAA0C,IAA1C,EAAgDA,IAAhD,CAAqD,IAArD,CAAZ;AACA,wBAAIyS,MAAMzS,IAAN,CAAW,KAAX,EAAkB3B,MAAlB,GAA2B,EAA/B,EAAmC;AAC/B4B,6BAAK6S,WAAL,CAAiBP,UAAjB;AACH,qBAFD,MAEO;AACH/Q,8BAAM,YAAN;AACH;AACJ,iBAVD;AAWH,aAZD;AAaA;AACA;AACA;AACA;AACA;AACAvB,iBAAKjC,IAAL,CAAUiE,QAAV,CAAmB,oBAAnB,EAAyC,OAAzC,EAAkD,YAAY;AAC1D,oBAAIsC,QAAQlH,EAAE,IAAF,CAAZ;AACA,oBAAI0V,QAAQ9S,KAAKjC,IAAL,CAAUgC,IAAV,CAAe,eAAf,EAAgCpC,IAAhC,EAAZ;AACA,oBAAImC,WAAWE,KAAK+S,WAAL,CAAiB,IAAjB,EAAuB,IAAvB,CAAf;AACA,oBAAI/D,WAAWhP,KAAKjC,IAAL,CAAUgC,IAAV,CAAe,cAAf,CAAf;AACA,oBAAI8E,UAAU,6BAAd;AACA,oBAAImO,UAAU,IAAd;AACA,oBAAI5V,EAAE2O,IAAF,CAAO+G,KAAP,KAAiB,EAArB,EAAyB;AACrBvR,0BAAM,QAAN;AACH,iBAFD,MAEO;AACHnE,sBAAE,WAAF,EAAekB,IAAf,CAAoB,YAAY;AAC5B,4BAAI2U,SAAS7V,EAAE,IAAF,EAAQ2C,IAAR,CAAa,KAAb,EAAoB3B,MAAjC;AACA,4BAAI6U,SAAS,CAAT,IAAcA,SAAS,CAA3B,EAA8B;AAC1BD,sCAAU,KAAV;AACH;AACJ,qBALD;AAMA,wBAAIA,OAAJ,EAAa;AACT,4BAAIE,WAAW9V,EAAE,WAAF,EAAe6C,GAAf,EAAf;AACA,4BAAI,OAAOiT,QAAP,IAAmB,WAAvB,EAAoC;AAChCA,uCAAW,CAAX;AACH;AACD,4BAAIC,UAAU/V,EAAE,UAAF,EAAc6C,GAAd,EAAd;AACA,4BAAImT,YAAYhW,EAAE,OAAF,EAAW6C,GAAX,EAAhB;AACA,4BAAIoT,MAAM,EAAV;AACA,4BAAIF,WAAW,GAAf,EAAoB;AAChBE,kCAAM,6CAA6CH,QAA7C,GAAwD,QAAxD,GAAmEE,SAAzE;AACH,yBAFD,MAEO;AACHC,kCAAM,4CAA4CH,QAAlD;AACH;AACD5O,8BAAM2K,SAAN,CAAgB;AACZlR,kCAAMiR,QADM;AAEZE,uCAAW,QAFC;AAGZoE,qCAAS,QAHG;AAIZ5S,kCAAM,YAAY;AACdtD,kCAAE,MAAF,EAAUqN,MAAV,CAAiB5F,OAAjB;AACAzH,kCAAEsN,IAAF,CAAO;AACHvJ,yCAAKkS,GADF;AAEH3V,0CAAMoC,QAFH;AAGH6K,0CAAM,MAHH;AAIHE,6CAAS,UAAUnN,IAAV,EAAgB;AACrBN,0CAAE,UAAF,EAAcqC,MAAd;AACArC,0CAAE,QAAF,EAAYO,IAAZ,CAAiBD,KAAKQ,QAAL,CAAcwD,KAA/B,EAAsClC,IAAtC;AACH,qCAPE;AAQHwL,2CAAO,YAAY;AACf5N,0CAAE,UAAF,EAAcqC,MAAd;AACA8B,8CAAM,cAAN;AACH;AAXE,iCAAP;AAaH;AAnBW,yBAAhB;AAqBH,qBAlCD,MAkCO,IAAI,CAACyR,OAAL,EAAc;AACjBzR,8BAAM,gBAAN;AACH;AACJ;AAEJ,aAvDD;AAwDA;AACAvB,iBAAKjC,IAAL,CAAUgC,IAAV,CAAe,eAAf,EAAgCiC,QAAhC,CAAyC,gBAAzC,EAA2D,OAA3D,EAAoE,YAAY;AAC5E,oBAAIuR,MAAMnW,EAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,CAAV;AACA,oBAAI2R,WAAWD,IAAI/N,KAAJ,EAAf;AACA,oBAAIiO,UAAUF,IAAIxT,IAAJ,CAAS,KAAT,EAAgB/B,IAAhB,CAAqB,KAArB,CAAd;AACA,oBAAI0V,QAAQtW,EAAE,mBAAF,EAAuB2C,IAAvB,CAA4B,YAA5B,CAAZ;AACA2T,sBAAMpV,IAAN,CAAW,UAAUC,CAAV,EAAa;AACpB,wBAAIkV,WAAWC,MAAMvQ,EAAN,CAAS5E,CAAT,EAAYwB,IAAZ,CAAiB,KAAjB,EAAwB/B,IAAxB,CAA6B,KAA7B,CAAf,EAAoD;AAChD0V,8BAAMvQ,EAAN,CAAS5E,CAAT,EAAYF,WAAZ,CAAwB,SAAxB;AACH;AACJ,iBAJD;AAKAkV,oBAAIxT,IAAJ,CAAS,KAAT,EAAgBN,MAAhB;AACA,oBAAI+T,aAAa,CAAjB,EAAoB;AAChBD,wBAAI5V,IAAJ,CAAS,WAAT;AACH,iBAFD,MAEO;AACH4V,wBAAI5V,IAAJ,CAAS,YAAT;AACH;AACDP,kBAAE,IAAF,EAAQqC,MAAR;AAEH,aAlBD;AAmBA;AACAO,iBAAKjC,IAAL,CAAUgC,IAAV,CAAe,eAAf,EAAgCiC,QAAhC,CAAyC,eAAzC,EAA0D,OAA1D,EAAmE,YAAY;AAC3E,oBAAI2R,WAAW,IAAf;AACA,oBAAIrP,QAAQlH,EAAE,IAAF,CAAZ;AACAA,kBAAE,WAAF,EAAe+F,EAAf,CAAkB,CAAlB,EAAqBpD,IAArB,CAA0B,WAA1B,EAAuCA,IAAvC,CAA4C,IAA5C,EAAkDzB,IAAlD,CAAuD,UAAUC,CAAV,EAAa;AAChEoV,+BAAWvW,EAAE,IAAF,EAAQO,IAAR,EAAX;AACA2G,0BAAMzC,OAAN,CAAc,WAAd,EAA2B9B,IAA3B,CAAgC,WAAhC,EAA6CA,IAA7C,CAAkD,IAAlD,EAAwDoD,EAAxD,CAA2D5E,CAA3D,EAA8DZ,IAA9D,CAAmEgW,QAAnE;AACH,iBAHD;AAIH,aAPD;;AASA;AACA3T,iBAAKjC,IAAL,CAAUgC,IAAV,CAAe,OAAf,EAAwBK,EAAxB,CAA2B,OAA3B,EAAoC,YAAY;AAC5C,oBAAIkE,QAAQlH,EAAE,IAAF,CAAZ;AACA,oBAAIwW,SAAStP,MAAM5G,IAAN,CAAW,WAAX,CAAb;AACA,oBAAImW,UAAUvP,MAAMrE,GAAN,GAAY7B,MAA1B;AACA,oBAAI0V,UAAUxU,SAASsU,MAAT,IAAmBtU,SAASuU,OAAT,CAAjC;AACA,oBAAIC,WAAW,CAAf,EAAkB;AACd,wBAAIC,aAAaD,UAAU,CAAV,GAAcA,OAAd,GAAwB,MAAMA,OAA/C;AACA,wBAAIE,UAAU,SAASD,UAAT,GAAsB,IAApC;AACAzP,0BAAMjG,WAAN,CAAkB,OAAlB;AACA,wBAAIuV,MAAJ,EAAY;AACRtP,8BAAMZ,QAAN,CAAe,MAAf,EAAuBe,IAAvB,CAA4BuP,OAA5B,EAAqC9U,GAArC,CAAyC,YAAzC,EAAuD,SAAvD;AACH;AACJ;AAEJ,aAdD;;AAgBA;AACAc,iBAAKmR,UAAL,CAAgBnP,QAAhB,CAAyB,YAAzB,EAAuC,OAAvC,EAAgD,YAAY;AACxD5E,kBAAE,IAAF,EAAQyE,OAAR,CAAgB,mBAAhB,EAAqCxE,IAArC;AACA2C,qBAAKjC,IAAL,CAAUgC,IAAV,CAAe,qBAAf,EAAsCP,IAAtC;AACH,aAHD;AAIAQ,iBAAKjC,IAAL,CAAUgC,IAAV,CAAe,gBAAf,EAAiCiC,QAAjC,CAA0C,cAA1C,EAA0D,OAA1D,EAAmE,YAAY;AAC3E5E,kBAAE,IAAF,EAAQyE,OAAR,CAAgB,qBAAhB,EAAuCxE,IAAvC;AACA2C,qBAAKjC,IAAL,CAAUgC,IAAV,CAAe,mBAAf,EAAoCP,IAApC;AACH,aAHD;;AAKA;AACAQ,iBAAKjC,IAAL,CAAUgC,IAAV,CAAe,aAAf,EAA8BsO,MAA9B,CAAqC,YAAY;AAC7C,oBAAI4F,QAAQ7W,EAAE,IAAF,EAAQ6C,GAAR,EAAZ;AACAD,qBAAKkU,YAAL,CAAkBD,KAAlB,EAAyB,EAAzB;AACH,aAHD;;AAKA;AACAjU,iBAAKjC,IAAL,CAAUgC,IAAV,CAAe,gBAAf,EAAiCiC,QAAjC,CAA0C,qBAA1C,EAAiE,OAAjE,EAA0E,YAAY;AAClF,oBAAImS,WAAW/W,EAAE,IAAF,EAAQM,IAAR,EAAf;AACAN,kBAAE,IAAF,EAAQ2N,MAAR,GAAiBrH,QAAjB,GAA4B3D,IAA5B,CAAiC,qBAAjC,EAAwD/B,IAAxD,CAA6D,SAA7D,EAAwE,KAAxE;AACA,oBAAIoW,eAAehX,EAAE,eAAF,CAAnB;AACAgX,6BAAarU,IAAb,CAAkB,UAAlB,EAA8BE,GAA9B,CAAkCkU,SAASE,SAA3C;AACAD,6BAAarU,IAAb,CAAkB,UAAlB,EAA8B1B,WAA9B,CAA0C,MAA1C;AACA+V,6BAAarU,IAAb,CAAkB,UAAlB,EAA8BE,GAA9B,CAAkCkU,SAASG,OAA3C;AACAF,6BAAarU,IAAb,CAAkB,YAAlB,EAAgCE,GAAhC,CAAoCkU,SAASE,SAA7C;AACAD,6BAAarU,IAAb,CAAkB,aAAlB,EAAiCE,GAAjC,CAAqCkU,SAASI,UAA9C;AACH,aATD;;AAWA;AACAvU,iBAAKjC,IAAL,CAAUgC,IAAV,CAAe,kBAAf,EAAmCiC,QAAnC,CAA4C,aAA5C,EAA2D,OAA3D,EAAoE,YAAY;AAC5E,oBAAIwS,UAAUpX,EAAE2O,IAAF,CAAO3O,EAAE,IAAF,EAAQ2N,MAAR,GAAiBhL,IAAjB,CAAsB,OAAtB,EAA+BE,GAA/B,EAAP,CAAd;AACA,oBAAIgU,QAAQ7W,EAAE2O,IAAF,CAAO3O,EAAE,aAAF,EAAiB6C,GAAjB,EAAP,CAAZ;AACAD,qBAAKkU,YAAL,CAAkBD,KAAlB,EAAyBO,OAAzB;AACH,aAJD;;AAMA;AACAxU,iBAAKjC,IAAL,CAAUgC,IAAV,CAAe,UAAf,EAA2BsO,MAA3B,CAAkC,YAAY;AAC1C,oBAAIoG,eAAe,EAAnB;AACA,oBAAIC,YAAYtX,EAAE,IAAF,EAAQ2C,IAAR,CAAa,iBAAb,EAAgC/B,IAAhC,CAAqC,iBAArC,CAAhB;AACA,wBAAQ0W,SAAR;AACI,yBAAK,GAAL;AACID,uCAAe;;+HAAf;AAGA;AACJ,yBAAK,GAAL;AACIA,uCAAe;;;sHAAf;AAIA;AACJ;AACIA,uCAAe,wEAAf;AAbR;AAeAzU,qBAAKjC,IAAL,CAAUgC,IAAV,CAAe,YAAf,EAA6BpC,IAA7B,CAAkC8W,YAAlC;AACH,aAnBD;AAqBH,SAzSgC;AA0SjC;;;AAGAjD,0BAAkB,UAAUzT,IAAV,EAAgByH,KAAhB,EAAuB;AACrC,gBAAIxF,OAAO,IAAX;AACA,gBAAI2U,YAAY5W,KAAK8D,OAAL,CAAa,aAAb,CAAhB;AACA,gBAAIiO,SAAS/R,KAAK8D,OAAL,CAAa,IAAb,CAAb;AACA,gBAAI+S,UAAUD,UAAU5U,IAAV,CAAe,YAAf,EAA6BA,IAA7B,CAAkC,OAAlC,EAA2CA,IAA3C,CAAgD,eAAhD,CAAd;AACA,gBAAI8U,SAASF,UAAU5U,IAAV,CAAe,YAAf,EAA6BA,IAA7B,CAAkC,OAAlC,CAAb;AACA,gBAAI+U,SAAS,EAAb;;AAEA,oBAAQtP,KAAR;AACI,qBAAK,CAAL;AAAQ;AACJ,wBAAIuP,YAAYzV,SAASsV,QAAQ7U,IAAR,CAAa,aAAb,EAA4B0E,IAA5B,EAAT,CAAhB;AACA,wBAAIuQ,MAAMD,SAAN,CAAJ,EAAsB,CAErB,CAFD,MAEO;AACHD,iCAAS,0MAAT;AACA1X,0BAAEyX,MAAF,EAAUpK,MAAV,CAAiBmK,QAAQK,KAAR,EAAjB;AACAN,kCAAU5U,IAAV,CAAe,YAAf,EAA6BA,IAA7B,CAAkC,OAAlC,EAA2CA,IAA3C,CAAgD,eAAhD,EAAiEA,IAAjE,CAAsE,WAAtE,EAAmFpC,IAAnF,CAAwFmX,MAAxF;AACAH,kCAAU5U,IAAV,CAAe,YAAf,EAA6BA,IAA7B,CAAkC,OAAlC,EAA2CA,IAA3C,CAAgD,eAAhD,EAAiE/B,IAAjE,CAAsE,SAAtE,EAAiF,EAAjF;AACH;;AAED;AACJ,qBAAK,CAAL;AAAQ;AACJ8W,6BAAS,wIAAT;;AAEAhF,2BAAO/P,IAAP,CAAY,IAAZ,EAAkBmV,GAAlB,CAAsB9X,EAAE,WAAF,CAAtB,EAAsC8X,GAAtC,CAA0C9X,EAAE,aAAF,CAA1C,EAA4D8X,GAA5D,CAAgE9X,EAAE,aAAF,CAAhE,EAAkFkB,IAAlF,CAAuF,YAAY;AAC/F,4BAAI4G,UAAU9H,EAAE,IAAF,EAAQqH,IAAR,EAAd;AACA,4BAAI0Q,WAAW/X,EAAE,IAAF,EAAQY,IAAR,CAAa,MAAb,CAAf;AACA,4BAAI6G,UAAU,+BAA+BK,OAA/B,GAAyC,SAAzC,GAAqDiQ,QAArD,GAAgE,IAA9E;AACA/X,0BAAE,IAAF,EAAQO,IAAR,CAAakH,OAAb;AACH,qBALD;AAMA9G,yBAAK8D,OAAL,CAAa,IAAb,EAAmBlE,IAAnB,CAAwBmX,MAAxB;AACA;AACJ,qBAAK,CAAL;AAAQ;AACJA,6BAAS,oEAAT;AACAhF,2BAAO/P,IAAP,CAAY,IAAZ,EAAkBmV,GAAlB,CAAsB9X,EAAE,WAAF,CAAtB,EAAsC8X,GAAtC,CAA0C9X,EAAE,aAAF,CAA1C,EAA4D8X,GAA5D,CAAgE9X,EAAE,aAAF,CAAhE,EAAkFkB,IAAlF,CAAuF,YAAY;AAC/F,4BAAI4G,UAAU9H,EAAE,IAAF,EAAQ2C,IAAR,CAAa,OAAb,EAAsBE,GAAtB,EAAd;AACA7C,0BAAE,IAAF,EAAQO,IAAR,CAAauH,OAAb;AACH,qBAHD;AAIAnH,yBAAK8D,OAAL,CAAa,IAAb,EAAmBlE,IAAnB,CAAwBmX,MAAxB;AACA;AACJ,qBAAK,CAAL;AAAQ;AACJhF,2BAAOrQ,MAAP;AACA;AACJ;AACI;AApCR;AAsCA;AACAkV,sBAAU5U,IAAV,CAAe,eAAf,EAAgCzB,IAAhC,CAAqC,YAAY;AAC7C,oBAAI8W,cAAchY,EAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsB2D,KAAtB,EAAlB;AACApI,kBAAE,IAAF,EAAQO,IAAR,CAAayX,WAAb;AACH,aAHD;AAKH,SAjWgC;AAkWjC;;;;;AAKAxD,qBAAa,UAAUjC,GAAV,EAAe;AACxB,gBAAI3P,OAAO,IAAX;;AAEA;AACA,gBAAI2P,MAAM,CAAV,EAAa;AACT3P,qBAAKmR,UAAL,CAAgBpR,IAAhB,CAAqB,mBAArB,EAA0CP,IAA1C;AACAQ,qBAAKmR,UAAL,CAAgBpR,IAAhB,CAAqB,OAArB,EAA8B/B,IAA9B,CAAmC,UAAnC,EAA+C,UAA/C;AACAgC,qBAAKmS,SAAL;AAEH,aALD,MAKO;AACHnS,qBAAKmR,UAAL,CAAgBpR,IAAhB,CAAqB,OAArB,EAA8BsV,UAA9B,CAAyC,UAAzC;AACArV,qBAAKmR,UAAL,CAAgBpR,IAAhB,CAAqB,mBAArB,EAA0C1C,IAA1C;AACH;AACJ,SApXgC;AAqXjC8U,mBAAW,YAAY;AACnB,gBAAInS,OAAO,IAAX;AACA,gBAAIsV,aAAa,CAAjB;AACAlY,cAAE,iBAAF,EAAqB2C,IAArB,CAA0B,mBAA1B,EAA+CzB,IAA/C,CAAoD,YAAY;AAC5DgX,8BAAc3I,OAAOvP,EAAE,IAAF,EAAQ6C,GAAR,EAAP,CAAd;AACH,aAFD;AAGAD,iBAAKmR,UAAL,CAAgBpR,IAAhB,CAAqB,cAArB,EAAqCA,IAArC,CAA0C,OAA1C,EAAmDE,GAAnD,CAAuDqV,UAAvD;AACH,SA5XgC;AA6XjC;;;;;AAKAtD,uBAAe,YAAY;AACvB,gBAAIhS,OAAO,IAAX;AACA,gBAAIuV,QAAQ,EAAZ;AACA,gBAAI/W,MAAM,EAAV;AACAwB,iBAAKkR,OAAL,CAAa5S,IAAb,CAAkB,UAAUC,CAAV,EAAaiM,IAAb,EAAmB;AACjChM,sBAAM,EAAN;AACA,oBAAIgX,QAAQpY,EAAEoN,IAAF,CAAZ;AACA,oBAAIiL,WAAWD,MAAMzV,IAAN,CAAW,iBAAX,CAAf;AACA,oBAAI2V,YAAYF,MAAMzV,IAAN,CAAW,gBAAX,CAAhB;AACA,oBAAI4V,QAAJ;AACA,oBAAIC,eAAe,EAAnB;AACA,oBAAIC,cAAc,EAAlB;;AAEA,qBAAK,IAAItX,IAAI,CAAb,EAAgBA,IAAImX,UAAUtX,MAA9B,EAAsCG,GAAtC,EAA2C;AACvC,wBAAImX,UAAUvS,EAAV,CAAa5E,CAAb,EAAgB0R,IAAhB,CAAqB,SAArB,CAAJ,EAAqC;AACjC0F,mCAAWD,UAAUvS,EAAV,CAAa5E,CAAb,CAAX;AACAsX,sCAAc,EAAd;AACAA,oCAAYC,MAAZ,GAAqBH,SAAS3X,IAAT,CAAc,SAAd,CAArB;AACA6X,oCAAYE,KAAZ,GAAoBJ,SAAS3X,IAAT,CAAc,YAAd,CAApB;AACA;AACA4X,qCAAaxS,IAAb,CAAkByS,WAAlB;AACH;AACJ;;AAED,oBAAID,aAAaxX,MAAjB,EAAyB;AACrBI,wBAAIkX,SAAJ,GAAgBE,YAAhB;AACAL,0BAAMnS,IAAN,CAAW5E,GAAX;AACAA,wBAAIsX,MAAJ,GAAaL,SAASzX,IAAT,CAAc,SAAd,CAAb;AACA;AACAQ,wBAAIuX,KAAJ,GAAYN,SAASzX,IAAT,CAAc,YAAd,CAAZ;AACA;AACH;AACJ,aA5BD;AA6BA;AACA,mBAAOuX,KAAP;AACH,SAragC;AAsajC;;;;;;;AAOAtD,yBAAiB,UAAU+D,SAAV,EAAqB;AAClC,gBAAIhW,OAAO,IAAX;AACA,gBAAIiW,WAAW,EAAf;AACA,gBAAIC,cAAc,EAAlB;AACA,gBAAI1L,OAAO,EAAX;AACA,gBAAI2L,aAAa/Y,EAAE,iBAAF,EAAqB2C,IAArB,CAA0B,cAA1B,CAAjB;AACA,gBAAIqW,cAAc,EAAlB;;AAEA,gBAAIC,IAAJ,EAAUC,IAAV;;AAEA,gBAAI,CAACN,UAAU5X,MAAf,EAAuB;AACnBgD,wBAAQC,GAAR,CAAY,WAAZ;AACH;;AAEDgV,mBAAOL,UAAU,CAAV,CAAP;AACA,iBAAK,IAAIzX,IAAI,CAAb,EAAgBA,IAAIyX,UAAU5X,MAA9B,EAAsCG,GAAtC,EAA2C;AACvC,oBAAIA,KAAK,CAAT,EAAY;AACR8X,2BAAOrW,KAAKuW,WAAL,CAAiBF,IAAjB,CAAP;AACH,iBAFD,MAEO;AACHC,2BAAON,UAAUzX,CAAV,CAAP;AACA8X,2BAAOrW,KAAKuW,WAAL,CAAiBF,IAAjB,EAAuBC,IAAvB,CAAP;AACH;AACD,oBAAIE,SAAS,EAAb;AACAA,uBAAO/R,IAAP,GAAcuR,UAAUzX,CAAV,EAAawX,KAA3B;AACAE,yBAAS7S,IAAT,CAAcoT,MAAd;AACH;;AAGD,iBAAK,IAAIzS,IAAI,CAAR,EAAW0S,KAAKN,WAAWjJ,IAAX,EAArB,EAAwCnJ,IAAI0S,EAA5C,EAAgD1S,GAAhD,EAAqD;AACjD,oBAAI2S,SAASP,WAAWpS,CAAX,CAAb;AACA,oBAAI4S,cAAc,EAAlB;AACA,oBAAIC,SAASxZ,EAAEsZ,MAAF,EAAUhZ,IAAV,CAAe,KAAf,CAAb;AACA,oBAAImZ,WAAWzZ,EAAEsZ,MAAF,EAAU3W,IAAV,CAAe,mBAAf,EAAoCE,GAApC,EAAf;AACA,oBAAI6W,oBAAoB1Z,EAAEsZ,MAAF,EAAU3W,IAAV,CAAe,4BAAf,EAA6CE,GAA7C,EAAxB;AACA,oBAAI8W,WAAW3Z,EAAEsZ,MAAF,EAAU3W,IAAV,CAAe,mBAAf,EAAoCE,GAApC,EAAf;AACA,oBAAI+W,gBAAgB5Z,EAAEsZ,MAAF,EAAU3W,IAAV,CAAe,wBAAf,EAAyCE,GAAzC,EAApB;AACA,oBAAIgX,cAAc7Z,EAAEsZ,MAAF,EAAU3W,IAAV,CAAe,sBAAf,EAAuCE,GAAvC,EAAlB;AACA0W,4BAAYC,MAAZ,GAAqBA,MAArB;AACAD,4BAAYE,QAAZ,GAAuBA,QAAvB;AACAF,4BAAYG,iBAAZ,GAAgCA,iBAAhC;AACAH,4BAAYI,QAAZ,GAAuBA,QAAvB;AACAJ,4BAAYK,aAAZ,GAA4BA,aAA5B;AACAL,4BAAYM,WAAZ,GAA0BA,WAA1B;AACAb,4BAAYhT,IAAZ,CAAiBuT,WAAjB;AACH;;AAGD,iBAAK,IAAI3S,CAAT,IAAcqS,IAAd,EAAoB;AAChB,oBAAIa,YAAYb,KAAKrS,CAAL,CAAhB;AACA;AACA,qBAAK,IAAImT,CAAT,IAAcf,WAAd,EAA2B;AACvB,wBAAIgB,YAAYhB,YAAYe,CAAZ,CAAhB;AACA;AACA,wBAAID,UAAUG,GAAV,IAAiBD,UAAUR,MAA/B,EAAuC;AACnC;AACAM,kCAAUI,KAAV,GAAkBF,UAAUP,QAA5B;AACAK,kCAAUK,cAAV,GAA2BH,UAAUN,iBAArC;AACAI,kCAAUM,KAAV,GAAkBJ,UAAUL,QAA5B;AACAG,kCAAUO,UAAV,GAAuBL,UAAUJ,aAAjC;AACAE,kCAAUQ,QAAV,GAAqBN,UAAUH,WAA/B;AACH;AACJ;AACJ;;AAED;;AAEA;AACA,mBAAO;AACHhB,0BAAUA,QADP;AAEH0B,sBAAMtB;AAFH,aAAP;AAIH,SApfgC;AAqfjC;;;;;;;AAOAE,qBAAa,UAAUF,IAAV,EAAgBC,IAAhB,EAAsB;AAC/B,gBAAIrY,SAAS,EAAb;AACA,gBAAIO,MAAM,EAAV;AACA,gBAAIoZ,WAAW,EAAf;AACA,gBAAIzB,aAAa/Y,EAAE,iBAAF,EAAqB2C,IAArB,CAA0B,cAA1B,CAAjB;AACA,gBAAI,CAACuW,IAAL,EAAW;AACP;AACA,qBAAK,IAAI/X,IAAI,CAAb,EAAgBA,IAAI8X,KAAKX,SAAL,CAAetX,MAAnC,EAA2CG,GAA3C,EAAgD;AAC5C,wBAAIsZ,SAASxB,KAAKX,SAAL,CAAenX,CAAf,CAAb;;AAEAC,0BAAM,EAAN;AACAA,wBAAIsZ,GAAJ,GAAU,EAAV;AACA,wBAAIC,MAAM,EAAV;AACAA,wBAAIC,OAAJ,GAAc,CAAd;AACAD,wBAAItT,IAAJ,GAAWoT,OAAO9B,KAAlB;AACAvX,wBAAIsZ,GAAJ,CAAQ1U,IAAR,CAAa2U,GAAb;;AAEAvZ,wBAAIyZ,SAAJ,GAAgB,EAAhB;AACAL,+BAAW,EAAX;AACAA,6BAASA,QAAT,GAAoB,EAApB;AACAA,6BAASA,QAAT,CAAkB9B,MAAlB,GAA2BO,KAAKP,MAAhC;AACA8B,6BAASA,QAAT,CAAkB7B,KAAlB,GAA0BM,KAAKN,KAA/B;AACA6B,6BAASM,QAAT,GAAoB,CAAC;AACjBpC,gCAAQ+B,OAAO/B,MADE;AAEjBC,+BAAO8B,OAAO9B;AAFG,qBAAD,CAApB;AAIAvX,wBAAIyZ,SAAJ,CAAc7U,IAAd,CAAmBwU,QAAnB;;AAEA,wBAAIvB,KAAKN,KAAL,IAAc,IAAlB,EAAwB;AACpBvX,4BAAI2Z,KAAJ,GAAYN,OAAO/B,MAAnB;AACH;;AAEDtX,wBAAI6Y,GAAJ,GAAUQ,OAAO/B,MAAjB;AACAtX,wBAAIuX,KAAJ,GAAY8B,OAAO9B,KAAnB;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA9X,2BAAOmF,IAAP,CAAY5E,GAAZ;AACH;AACD,uBAAOP,MAAP;AACH;AACD;AACA,iBAAK,IAAIM,IAAI,CAAb,EAAgBA,IAAI8X,KAAKjY,MAAzB,EAAiCG,GAAjC,EAAsC;AAClC,oBAAIsZ,SAASxB,KAAK9X,CAAL,CAAb;AACA,qBAAK,IAAIwF,IAAI,CAAb,EAAgBA,IAAIuS,KAAKZ,SAAL,CAAetX,MAAnC,EAA2C2F,GAA3C,EAAgD;AAC5C,wBAAIqU,SAAS9B,KAAKZ,SAAL,CAAe3R,CAAf,CAAb;AACA,wBAAIsU,aAAaR,OAAOI,SAAxB;;AAEAzZ,0BAAM,EAAN;AACAA,wBAAIsZ,GAAJ,GAAU,EAAV;AACA,wBAAIC,MAAM,EAAV;AACAA,wBAAIC,OAAJ,GAAc,CAAd;AACAD,wBAAItT,IAAJ,GAAW2T,OAAOrC,KAAlB;AACAvX,wBAAIsZ,GAAJ,CAAQ1U,IAAR,CAAa2U,GAAb;;AAEAvZ,wBAAIyZ,SAAJ,GAAgBI,WAAWC,MAAX,CAAkB,EAAlB,CAAhB;;AAEA,wBAAIC,YAAY,EAAhB;AACAA,8BAAUX,QAAV,GAAqB,EAArB;AACAW,8BAAUX,QAAV,CAAmB9B,MAAnB,GAA4BQ,KAAKR,MAAjC;AACAyC,8BAAUX,QAAV,CAAmB7B,KAAnB,GAA2BO,KAAKP,KAAhC;AACAwC,8BAAUL,QAAV,GAAqB,CAAC;AAClBpC,gCAAQsC,OAAOtC,MADG;AAElBC,+BAAOqC,OAAOrC;AAFI,qBAAD,CAArB;AAIAvX,wBAAIyZ,SAAJ,CAAc7U,IAAd,CAAmBmV,SAAnB;;AAEA,wBAAIV,OAAOM,KAAX,EAAkB;AACd3Z,4BAAI2Z,KAAJ,GAAYN,OAAOM,KAAnB;AACH;AACD,wBAAI7B,KAAKP,KAAL,IAAc,IAAlB,EAAwB;AACpBvX,4BAAI2Z,KAAJ,GAAYC,OAAOtC,MAAnB;AACH;;AAEDtX,wBAAI6Y,GAAJ,GAAUQ,OAAOR,GAAP,GAAa,GAAb,GAAmBe,OAAOtC,MAApC;;AAEAtX,wBAAIuX,KAAJ,GAAYqC,OAAOrC,KAAnB;;AAEA9X,2BAAOmF,IAAP,CAAY5E,GAAZ;AACH;;AAED,qBAAK,IAAIwF,IAAI6T,OAAOC,GAAP,CAAW1Z,MAAX,GAAoB,CAAjC,EAAoC4F,KAAK,CAAzC,EAA4CA,GAA5C,EAAiD;AAC7C,wBAAIwU,MAAMX,OAAOC,GAAP,CAAW9T,CAAX,CAAV;AACA;AACAwU,wBAAIR,OAAJ,GAAcQ,IAAIR,OAAJ,GAAc1B,KAAKZ,SAAL,CAAetX,MAA3C;AACAH,2BAAOM,IAAIwF,CAAX,EAAc+T,GAAd,CAAkBW,OAAlB,CAA0BD,GAA1B;AAEH;AAGJ;;AAED;AACA,mBAAOva,MAAP;AAEH,SAnmBgC;AAomBjC;;;;;;AAMAiU,8BAAsB,UAAUxU,IAAV,EAAgBgb,aAAhB,EAA+B;AACjD;AACA,gBAAI1Y,OAAO,IAAX;AACA,gBAAI,CAACtC,KAAKia,IAAV,EAAgB;AACZva,kBAAE,iBAAF,EAAqBO,IAArB,CAA0B,EAA1B,EAA8BD,IAA9B,CAAmC,UAAnC,EAA+C,IAA/C;AACA,uBAAO,KAAP;AACH;AACD,gBAAIib,GAAJ;AACA,gBAAID,aAAJ,EAAmB;AACfC,sBAAM,CACF,SADE,EAEF,SAFE,EAGF,MAHE,EAIF,8CAJE,EAKF,cALE,EAMF,cANE,EAOF,aAPE,EAQF,4BARE,EASF,gBATE,EAUF,OAVE,EAWF,UAXE,EAYF,SAZE,EAaF,mFAbE,EAcF,+DAdE,EAeF,kGAfE,EAgBF,2JAhBE,EAiBF,iGAjBE,EAkBF,uEAlBE,EAmBF,mEAnBE,EAoBF,gBApBE,EAqBF,UArBE,EAsBF,UAtBE,EAuBJtV,IAvBI,CAuBC,EAvBD,CAAN;AAwBH,aAzBD,MAyBO;AACHsV,sBAAM,CACF,SADE,EAEF,SAFE,EAGF,MAHE,EAIF,8CAJE,EAKF,aALE,EAMF,aANE,EAOF,eAPE,EAQF,gBARE,EASF,OATE,EAUF,UAVE,EAWF,SAXE,EAYF,mFAZE,EAaF,+DAbE,EAcF,kGAdE,EAeF,iGAfE,EAgBF,uEAhBE,EAiBF,mEAjBE,EAkBF,gBAlBE,EAmBF,UAnBE,EAoBF,UApBE,EAqBJtV,IArBI,CAqBC,EArBD,CAAN;AAsBH;;AAGDyG,uBAAWC,WAAWC,OAAX,CAAmB2O,GAAnB,CAAX;AACAhb,mBAAOmM,SAASpM,IAAT,CAAP;AACAN,cAAE,iBAAF,EAAqBO,IAArB,CAA0BA,IAA1B,EAAgCD,IAAhC,CAAqC,UAArC,EAAiDA,KAAKia,IAAtD;;AAEA;AACA,gBAAIrC,aAAa,CAAjB;AACAlY,cAAE,iBAAF,EAAqB2C,IAArB,CAA0B,mBAA1B,EAA+CzB,IAA/C,CAAoD,YAAY;AAC5DgX,8BAAc3I,OAAOvP,EAAE,IAAF,EAAQ6C,GAAR,EAAP,CAAd;AACH,aAFD;AAGAD,iBAAKmR,UAAL,CAAgBpR,IAAhB,CAAqB,cAArB,EAAqCA,IAArC,CAA0C,OAA1C,EAAmDE,GAAnD,CAAuDqV,UAAvD;AACH,SA/qBgC;AAgrBjC;;;;;;AAMAzD,oBAAY,UAAUJ,UAAV,EAAsBmH,IAAtB,EAA4B;AACpC,gBAAI5Y,OAAO,IAAX;AACA,gBAAI6Y,cAAc7Y,KAAKjC,IAAL,CAAUgC,IAAV,CAAe,YAAf,CAAlB;AACA,gBAAI+Y,UAAU,iCACV,wBADU,GAEV,eAFU,GAEQrH,WAAWpR,EAFnB,GAEwB,gBAFxB,GAE2CoR,WAAWsE,KAFtD,GAE8D,mBAF9D,GAEoFtE,WAAWpR,EAF/F,GAEoG,yBAFpG,GAEgIoR,WAAWsE,KAF3I,GAEmJ,MAFnJ,GAGV,mBAHU,GAIV,QAJU,GAKV,wBALU,GAMV,MANU,GAOV,oBAPU,GAQV,qBARU,GASV,qBATU,GAUV,qBAVU,GAWV,qBAXU,GAYV,qBAZU,GAaV,OAbU,GAcV,QAdU,GAeV,0DAfU,GAgBV,qEAhBU,GAiBV,QAjBJ;;AAmBA,gBAAI6C,SAAS,IAAb,EAAmB;AACfxb,kBAAEyb,WAAF,EAAepO,MAAf,CAAsBqO,OAAtB;AAEH;AAEJ,SAjtBgC;AAktBjC;;;;;;AAMAhH,oBAAY,UAAUL,UAAV,EAAsB;AAC9BrU,cAAE,eAAF,EAAmB2C,IAAnB,CAAwB,WAAxB,EAAqCzB,IAArC,CAA0C,YAAY;AAClD,oBAAI+Y,MAAMja,EAAE,IAAF,EAAQ2C,IAAR,CAAa,GAAb,EAAkBrC,IAAlB,CAAuB,KAAvB,CAAV;AACA,oBAAI2Z,OAAO5F,WAAWpR,EAAtB,EAA0B;AACtBjD,sBAAE,IAAF,EAAQqC,MAAR;AACH;AAEJ,aAND;AAQH,SAjuBgC;AAkuBjC;;;;;AAKAsZ,gCAAwB,YAAY;AAChC,gBAAI/Y,OAAO,IAAX;AACA,gBAAIgZ,MAAM5b,EAAE,0BAAF,CAAV;AACA,gBAAI2U,WAAW,IAAf;;AAEA,gBAAI3U,EAAE,iBAAF,EAAqBM,IAArB,CAA0B,UAA1B,CAAJ,EAA2C;AACvCqU,2BAAW3U,EAAE,iBAAF,EAAqBM,IAArB,CAA0B,UAA1B,CAAX;AACH,aAFD,MAEO;AACH,oBAAIA,OAAOsC,KAAKiS,eAAL,CAAqBjS,KAAKgS,aAAL,EAArB,CAAX;AACAD,2BAAWrU,KAAKia,IAAhB;AACA;AACH;;AAED,gBAAI1Z,SAAS,EAAb;AACA,gBAAI,CAAC+a,IAAI5a,MAAT,EAAiB;AACb,uBAAO,EAAP;AACH;AACD4a,gBAAI1a,IAAJ,CAAS,UAAUC,CAAV,EAAa0a,EAAb,EAAiB;AACtB,oBAAIC,KAAK9b,EAAE6b,EAAF,CAAT;AACA,oBAAIza,MAAM,EAAV;AACA,oBAAI6Y,MAAM6B,GAAGlb,IAAH,CAAQ,UAAR,CAAV;AACAQ,oBAAIgZ,KAAJ,GAAY0B,GAAGnZ,IAAH,CAAQ,mBAAR,EAA6BE,GAA7B,EAAZ;AACAzB,oBAAI8Y,KAAJ,GAAY4B,GAAGnZ,IAAH,CAAQ,qBAAR,EAA+BE,GAA/B,EAAZ;AACAzB,oBAAI+Y,cAAJ,GAAqB2B,GAAGnZ,IAAH,CAAQ,8BAAR,EAAwCE,GAAxC,EAArB;AACAzB,oBAAIiZ,UAAJ,GAAiByB,GAAGnZ,IAAH,CAAQ,0BAAR,EAAoCE,GAApC,EAAjB;AACAzB,oBAAIkZ,QAAJ,GAAewB,GAAGnZ,IAAH,CAAQ,wBAAR,EAAkCE,GAAlC,EAAf;AACA,qBAAK,IAAI1B,IAAI,CAAb,EAAgBA,IAAIwT,SAAS3T,MAA7B,EAAqCG,GAArC,EAA0C;AACtC,wBAAI8Y,OAAOtF,SAASxT,CAAT,EAAY8Y,GAAvB,EAA4B;AACxB7Y,4BAAIyZ,SAAJ,GAAgBlG,SAASxT,CAAT,EAAY0Z,SAA5B;AACH;AACJ;;AAED,oBAAIiB,GAAGlb,IAAH,CAAQ,YAAR,CAAJ,EAA2B;;AAEvBgC,yBAAK4Q,MAAL,CAAY7Q,IAAZ,CAAiB,WAAjB,EAA8BzB,IAA9B,CAAmC,YAAY;AAC3C,4BAAIgG,QAAQlH,EAAE,IAAF,CAAZ;AACA,4BAAI+b,UAAU7U,MAAMvE,IAAN,CAAW,GAAX,EAAgBrC,IAAhB,CAAqB,UAArB,CAAd;AACA,4BAAI0b,eAAeD,WAAWD,GAAGlb,IAAH,CAAQ,YAAR,CAA9B;;AAEA;AACA,4BAAIob,YAAJ,EAAkB;AACd,gCAAIC,YAAY,EAAhB;AACA/U,kCAAMvE,IAAN,CAAW,WAAX,EAAwBA,IAAxB,CAA6B,KAA7B,EAAoCzB,IAApC,CAAyC,YAAY;AACjD,oCAAIgb,eAAe,EAAnB;AACA,oCAAI3G,SAASvV,EAAE,IAAF,EAAQY,IAAR,CAAa,KAAb,CAAb;AACA,oCAAIub,cAAcnc,EAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsB2D,KAAtB,EAAlB;AACA,oCAAImN,MAAJ,EAAY;AACR2G,iDAAaE,SAAb,GAAyB7G,MAAzB;AACA2G,iDAAaG,UAAb,GAA0BF,cAAc,CAAxC;AACAD,iDAAaI,OAAb,GAAuBP,OAAvB;AACH;AACDE,0CAAUjW,IAAV,CAAekW,YAAf;AACH,6BAVD;AAWA9a,gCAAI6a,SAAJ,GAAgBA,SAAhB;AAEH;AACJ,qBAtBD;AAuBH;;AAEDpb,uBAAOmF,IAAP,CAAY5E,GAAZ;AACH,aA3CD;AA4CA;AACA,mBAAOP,MAAP;AAEH,SAvyBgC;AAwyBjC0b,0BAAkB,YAAY;AAC1BC,qBAASxc,EAAE,UAAF,CAAT,CAD0B,CACF;AACxB,gBAAIyc,YAAY,EAAhB;AACA;AACAD,mBAAO7Z,IAAP,CAAY,OAAZ,EAAqBzB,IAArB,CAA0B,UAAUkH,KAAV,EAAiBhH,GAAjB,EAAsB;AAC5C,oBAAIsb,IAAI,EAAR;AAAA,oBACIC,KAAK3c,EAAEoB,GAAF,CADT;AAEAsb,kBAAEE,UAAF,GAAeD,GAAG/b,IAAH,CAAQ,iBAAR,CAAf;AACA8b,kBAAEG,SAAF,GAAcF,GAAG/b,IAAH,CAAQ,gBAAR,CAAd;AACA8b,kBAAEI,UAAF,GAAeH,GAAG/b,IAAH,CAAQ,iBAAR,CAAf;AACH,aAND;AAOA,mBAAO6b,SAAP;AACH,SApzBgC;AAqzBjC;;;;;AAKAM,+BAAuB,YAAY;AAC/B,gBAAIna,OAAO,IAAX;AACA,gBAAIxB,MAAM,EAAV;;AAEAwB,iBAAK4Q,MAAL,CAAY7Q,IAAZ,CAAiB,YAAjB,EAA+BzB,IAA/B,CAAoC,YAAY;AAC5C,oBAAIgG,QAAQlH,EAAE,IAAF,CAAZ;AACAkH,sBAAMvE,IAAN,CAAW,WAAX,EAAwBA,IAAxB,CAA6B,KAA7B,EAAoCzB,IAApC,CAAyC,YAAY;AACjD,wBAAIgb,eAAe,EAAnB;AACA,wBAAI3G,SAASvV,EAAE,IAAF,EAAQY,IAAR,CAAa,KAAb,CAAb;AACA,wBAAIub,cAAcnc,EAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsB2D,KAAtB,EAAlB;AACA,wBAAImN,MAAJ,EAAY;AACR2G,qCAAaE,SAAb,GAAyB7G,MAAzB;AACA2G,qCAAaG,UAAb,GAA0BF,cAAc,CAAxC;AACH;AACD/a,wBAAI4E,IAAJ,CAASkW,YAAT;AACH,iBATD;AAUH,aAZD;AAaA,mBAAO9a,GAAP;AAEH,SA70BgC;AA80BjC;;;;AAIA6T,sBAAc,UAAUtU,IAAV,EAAgB;AAC1B,gBAAIiC,OAAO,IAAX;AACA,gBAAI6Y,cAAc7Y,KAAKjC,IAAL,CAAUgC,IAAV,CAAe,aAAf,CAAlB;AACA3C,cAAEW,IAAF,EAAQqc,KAAR,CAAcvB,WAAd;AAEH,SAv1BgC;;AAy1BjC;;;;;AAKAnG,oBAAY,UAAUJ,UAAV,EAAsB;AAC9BlV,cAAEid,cAAF,CAAiB;AACb1P,sBAAM,MADO,EACC;AACd;AACAxJ,qBAAK,0BAHQ,EAGoB;AACjCzD,sBAAM4U,UAJO,EAIK;AAClBgI,2BAAW,KALE,EAKK;AAClBC,+BAAe,WANF,EAMe;AAC5BC,0BAAU,MAPG,EAOK;AAClB3P,yBAAS,UAAUnN,IAAV,EAAgB+c,MAAhB,EAAwB;AAC7B/c,2BAAOgd,KAAK,MAAMhd,IAAN,GAAa,GAAlB,CAAP;AACA,wBAAIA,KAAKO,MAAL,IAAe,IAAnB,EAAyB;AACrB,4BAAI0c,SAASjd,KAAKQ,QAAL,CAAcyZ,IAA3B;AACA,4BAAI/E,MAAMxV,EAAE,aAAF,EAAiBqV,IAAjB,CAAsB,WAAtB,EAAmC1S,IAAnC,CAAwC,IAAxC,EAA8CA,IAA9C,CAAmD,MAAnD,CAAV;AACA,6BAAK,IAAIxB,IAAI,CAAb,EAAgBA,IAAIoc,OAAOvc,MAA3B,EAAmCG,GAAnC,EAAwC;AACpC,gCAAIoc,OAAOpc,CAAP,EAAUqc,IAAV,IAAkB,CAAtB,EAAyB;AACrBhI,oCAAIzP,EAAJ,CAAO5E,CAAP,EAAUwM,MAAV,CAAiB,IAAjB,EAAuBpN,IAAvB,CAA4B,8DAA8Dgd,OAAOpc,CAAP,EAAUsc,OAAxE,GAAkF,IAA9G;AACH,6BAFD,MAEO;AACH;AACH;AACJ;AACJ;AACJ,iBArBY;AAsBb7P,uBAAO,UAAU8P,CAAV,EAAa;AAChB;AACH;AAxBY,aAAjB;AA0BH,SAz3BgC;AA03BjC;;;;;AAKAjI,qBAAa,UAAUP,UAAV,EAAsB;AAC/BlV,cAAEid,cAAF,CAAiB;AACb1P,sBAAM,MADO,EACC;AACd;AACAxJ,qBAAK,8BAHQ,EAGwB;AACrCzD,sBAAM4U,UAJO,EAIK;AAClBgI,2BAAW,KALE,EAKK;AAClBC,+BAAe,YANF,EAMgB;AAC7BC,0BAAU,MAPG,EAOK;AAClB3P,yBAAS,UAAUnN,IAAV,EAAgB+c,MAAhB,EAAwB;AAC7B/c,2BAAOgd,KAAK,MAAMhd,IAAN,GAAa,GAAlB,CAAP;AACA,wBAAIA,KAAKO,MAAL,IAAe,IAAnB,EAAyB;AACrB,4BAAI0c,SAASjd,KAAKQ,QAAL,CAAcyZ,IAA3B;AACA,4BAAI/E,MAAMxV,EAAE,cAAF,EAAkBqV,IAAlB,CAAuB,YAAvB,EAAqC1S,IAArC,CAA0C,IAA1C,EAAgDA,IAAhD,CAAqD,MAArD,CAAV;AACA,6BAAK,IAAIxB,IAAI,CAAb,EAAgBA,IAAIoc,OAAOvc,MAA3B,EAAmCG,GAAnC,EAAwC;AACpC,gCAAIoc,OAAOpc,CAAP,EAAUqc,IAAV,IAAkB,CAAtB,EAAyB;AACrBhI,oCAAIzP,EAAJ,CAAO5E,CAAP,EAAUwM,MAAV,CAAiB,IAAjB,EAAuBpN,IAAvB,CAA4B,8DAA8Dgd,OAAOpc,CAAP,EAAUsc,OAAxE,GAAkF,IAA9G;AACH,6BAFD,MAEO;AACHtZ,sCAAMoZ,OAAOpc,CAAP,EAAU0D,GAAhB;AACH;AACJ;AACJ;AACJ,iBArBY;AAsBb+I,uBAAO,UAAU8P,CAAV,EAAa,CAAE;AAtBT,aAAjB;AAwBH,SAx5BgC;AAy5BjC;;;;;AAKAC,kBAAU,YAAY;AAClB,gBAAI/a,OAAO,IAAX;AACA,gBAAIgb,UAAU,EAAd,CAFkB,CAEA;;;AAGlB;AACAhb,iBAAKjC,IAAL,CAAUgC,IAAV,CAAe,kBAAf,EAAmCzB,IAAnC,CAAwC,YAAY;AAChD,oBAAIgG,QAAQlH,EAAE,IAAF,CAAZ;AACA,oBAAIkH,MAAMrE,GAAN,MAAe,EAAf,IAAqBqE,MAAM5G,IAAN,CAAW,MAAX,KAAsB,OAA/C,EAAwD;AACpD,wBAAIud,SAAS3W,MAAMtG,IAAN,CAAW,MAAX,CAAb;AACA,wBAAIkd,SAAS5W,MAAMrE,GAAN,EAAb;AACA+a,4BAAQC,MAAR,IAAkBC,MAAlB;AACH;AACJ,aAPD;AAQA;AACAlb,iBAAKjC,IAAL,CAAUgC,IAAV,CAAe,QAAf,EAAyBA,IAAzB,CAA8B,iBAA9B,EAAiDzB,IAAjD,CAAsD,YAAY;AAC9D,oBAAIgG,QAAQlH,EAAE,IAAF,CAAZ;AACA,oBAAIkH,MAAMrE,GAAN,MAAe,EAAf,IAAqBqE,MAAMzC,OAAN,CAAc,QAAd,EAAwBnE,IAAxB,CAA6B,MAA7B,KAAwC,OAAjE,EAA0E;AACtE,wBAAIud,SAAS3W,MAAM5G,IAAN,EAAb;AACA,yBAAK,IAAIa,CAAT,IAAc0c,MAAd,EAAsB;AAClBD,gCAAQzc,CAAR,IAAa0c,OAAO1c,CAAP,CAAb;AACH;AACJ;AACJ,aARD;AASA;AACAyB,iBAAK4Q,MAAL,CAAY7Q,IAAZ,CAAiB,WAAjB,EAA8BzB,IAA9B,CAAmC,YAAY;AAC3C,oBAAIgG,QAAQlH,EAAE,IAAF,CAAZ;AACA,oBAAIgc,eAAe9U,MAAMvE,IAAN,CAAW,GAAX,EAAgB/B,IAAhB,CAAqB,WAArB,KAAqC,OAAxD;AACA,oBAAImd,YAAY,EAAhB;;AAEA,oBAAI/B,YAAJ,EAAkB;AACd9U,0BAAMvE,IAAN,CAAW,WAAX,EAAwBA,IAAxB,CAA6B,KAA7B,EAAoCzB,IAApC,CAAyC,YAAY;AACjD,4BAAI8c,eAAe,EAAnB;AACA,4BAAIzI,SAASvV,EAAE,IAAF,EAAQY,IAAR,CAAa,KAAb,CAAb;AACA,4BAAIub,cAAcnc,EAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsB2D,KAAtB,EAAlB;AACA,4BAAImN,MAAJ,EAAY;AACRyI,yCAAa5B,SAAb,GAAyB7G,MAAzB;AACAyI,yCAAa3B,UAAb,GAA0BF,cAAc,CAAxC;AACH;AACD4B,kCAAU/X,IAAV,CAAegY,YAAf;AAEH,qBAVD;;AAYAJ,4BAAQL,MAAR,GAAiBQ,SAAjB;AAEH;AACJ,aArBD;AAsBA;AACAnb,iBAAKjC,IAAL,CAAUgC,IAAV,CAAe,eAAf,EAAgCzB,IAAhC,CAAqC,YAAY;AAC7C,oBAAIgG,QAAQlH,EAAE,IAAF,CAAZ;AACA,oBAAI8d,SAAS5W,MAAM3G,IAAN,EAAb;AACAqd,wBAAQlI,KAAR,GAAgBoI,MAAhB;AACH,aAJD;;AAMA;AACA,mBAAOF,OAAP;AACH,SAt9BgC;AAu9BjC;;;;;AAKAK,mBAAW,YAAY;AACnB,gBAAIrb,OAAO,IAAX;AACA;AACA,gBAAIsb,QAAQ,EAAZ,CAHmB,CAGH;;AAEhBtb,iBAAKjC,IAAL,CAAUgC,IAAV,CAAe,YAAf,EAA6BA,IAA7B,CAAkC,iBAAlC,EAAqDzB,IAArD,CAA0D,YAAY;AAClE,oBAAIgG,QAAQlH,EAAE,IAAF,CAAZ;AACA;AACA,oBAAIkH,MAAMrE,GAAN,MAAe,EAAf,IAAqB,CAACqE,MAAMyG,MAAN,GAAeuD,QAAf,CAAwB,YAAxB,CAA1B,EAAiE;AAC7D,wBAAIiN,WAAWjX,MAAM5G,IAAN,EAAf;AACA4d,0BAAMlY,IAAN,CAAWmY,QAAX;AACH;AACJ,aAPD;AAQAvb,iBAAKjC,IAAL,CAAUgC,IAAV,CAAe,YAAf,EAA6BA,IAA7B,CAAkC,OAAlC,EAA2CzB,IAA3C,CAAgD,YAAY;AACxD,oBAAIgG,QAAQlH,EAAE,IAAF,CAAZ;AACA,oBAAIoe,UAAUlX,MAAMtG,IAAN,CAAW,MAAX,CAAd;AACA,oBAAIsG,MAAMrE,GAAN,MAAe,EAAf,IAAqB,OAAOub,OAAP,KAAmB,WAA5C,EAAyD;AACrD,wBAAID,WAAW,EAAf;AACAA,6BAASC,OAAT,IAAoBlX,MAAMrE,GAAN,EAApB;AACAsb,6BAAS,SAAT,IAAsBjX,MAAM5G,IAAN,CAAW,UAAX,CAAtB;AACA4d,0BAAMlY,IAAN,CAAWmY,QAAX;AACH;AAEJ,aAVD;AAWA;;AAEA,mBAAOD,KAAP;AACH,SAv/BgC;AAw/BjC;;;;;AAKAG,oBAAY,YAAY;AACpB,gBAAI1Q,SAAS3N,EAAE,eAAF,CAAb;AACA,mBAAO;AACHkX,yBAASvJ,OAAOhL,IAAP,CAAY,UAAZ,EAAwBE,GAAxB,EADN;AAEHoU,2BAAWtJ,OAAOhL,IAAP,CAAY,YAAZ,EAA0BE,GAA1B,EAFR;AAGHsU,4BAAYxJ,OAAOhL,IAAP,CAAY,aAAZ,EAA2BE,GAA3B;AAHT,aAAP;AAKH,SApgCgC;AAqgCjC;;;;AAIA8S,qBAAa,UAAU2I,WAAV,EAAuB;AAChC,gBAAI1b,OAAO,IAAX;AACA,gBAAI2b,aAAa,EAAjB;AACA,gBAAIC,mBAAmB,EAAvB;AACAD,uBAAWE,KAAX,GAAmB7b,KAAK+a,QAAL,EAAnB;AACAY,uBAAWL,KAAX,GAAmBtb,KAAKqb,SAAL,EAAnB;AACA,gBAAIK,WAAJ,EAAiB;AACbC,2BAAWG,QAAX,GAAsB9b,KAAKyb,UAAL,EAAtB;AACH;AACDE,uBAAWI,OAAX,GAAqB/b,KAAK+Y,sBAAL,EAArB;AACA4C,uBAAW9B,SAAX,GAAuB7Z,KAAK2Z,gBAAL,EAAvB;AACAgC,uBAAWK,WAAX,GAAyBhc,KAAKma,qBAAL,EAAzB;AACAyB,6BAAiBK,QAAjB,GAA4B3O,KAAKC,SAAL,CAAeoO,UAAf,CAA5B;AACA;;AAEA,mBAAOC,gBAAP;AACH,SAzhCgC;AA0hCjC;;;AAGA9Z,gBAAQ,YAAY;AAChB,iBAAKkP,KAAL;AACH,SA/hCgC;AAgiCjC;;;;;;AAMAkD,sBAAc,UAAUD,KAAV,EAAiBO,OAAjB,EAA0B;AACpC,gBAAIxU,OAAO,IAAX;AACA,gBAAI,OAAOkc,UAAP,IAAqB,WAArB,IAAoCA,cAAc,IAAtD,EAA4D;AAC5D,iBAAK,IAAI3d,IAAI,CAAb,EAAgBA,IAAI2d,WAAW9d,MAA/B,EAAuCG,GAAvC,EAA4C;AACxC,oBAAI4V,WAAW+H,WAAW3d,CAAX,CAAf;AACA,oBAAI4V,SAASgI,UAAT,IAAuBlI,KAA3B,EAAkC;AAC9B,wBAAImI,YAAYjI,SAAS2H,QAAzB;AACA,wBAAIO,eAAe,EAAnB;AACA,wBAAI7H,QAAQpW,MAAZ,EAAoB;AAChBie,uCAAeD,UAAUE,MAAV,CAAiB,UAAUC,KAAV,EAAiB;AAC7C,mCAAOA,MAAMlI,SAAN,CAAgBmI,OAAhB,CAAwBhI,OAAxB,MAAqC,CAAC,CAAtC,GAA0C,IAA1C,GAAiD,KAAxD;AACH,yBAFc,CAAf;AAGH,qBAJD,MAIO;AACH6H,uCAAeD,SAAf;AACH;AACDpc,yBAAKyc,eAAL,CAAqBJ,YAArB;AACA;AACH;AACJ;AACJ,SAzjCgC;AA0jCjC;;;;;AAKAI,yBAAiB,UAAUL,SAAV,EAAqB;AAClC,gBAAIM,YAAY,EAAhB;AACA,iBAAK,IAAIne,IAAI,CAAb,EAAgBA,IAAI6d,UAAUhe,MAA9B,EAAsCG,GAAtC,EAA2C;AACvC,oBAAIoe,YAAYP,UAAU7d,CAAV,CAAhB;AACAme,6BAAa,+CAA+CC,UAAUrI,OAAzD,GAAmE,qBAAnE,GAA2FqI,UAAUtI,SAArG,GAAiH,uBAAjH,GAA2IsI,UAAUpI,UAArJ,GAAkK,IAAlK,GAAyKoI,UAAUtI,SAAnL,GAA+L,UAA5M;AACH;AACDjX,cAAE,uBAAF,EAA2BO,IAA3B,CAAgC+e,SAAhC;AACH;AAtkCgC,KAArC;;AA0kCA;;;AAGA,QAAI,CAACnM,EAAEC,gBAAP,EAAyB;AACrBD,UAAEC,gBAAF,GAAqB,YAAY;AAC7B,gBAAIA,gBAAJ,CAAqB;AACjBzS,sBAAMX,EAAE,eAAF;AADW,aAArB;AAGH,SAJD;AAKH;;AAED;;;AAGAA,MAAE,YAAY;AACVmT,UAAEC,gBAAF;AACH,KAFD;AAIH,CAjoCD,EAioCGxP,MAjoCH,EAioCW4b,MAjoCX;AAkoCA;;;AAGAxf,EAAE,YAAY;AACV;;;AAGAA,MAAE,oBAAF,EAAwB4E,QAAxB,CAAiC,iBAAjC,EAAoD,OAApD,EAA6D,YAAY;AACrE,YAAIsC,QAAQlH,EAAE,IAAF,CAAZ;AACA,YAAIyf,aAAavY,MAAMkB,KAAN,EAAjB;AACApI,UAAE,cAAF,EAAkBC,IAAlB;AACA,gBAAQwf,UAAR;AACI,iBAAK,CAAL;AACIzf,kBAAE,gBAAF,EAAoBoC,IAApB;AACA;AACJ,iBAAK,CAAL;AACIpC,kBAAE,aAAF,EAAiBoC,IAAjB;AACA;AACJ,iBAAK,CAAL;AACIpC,kBAAE,eAAF,EAAmBoC,IAAnB;AACA;AACJ,iBAAK,CAAL;AACIpC,kBAAE,eAAF,EAAmBoC,IAAnB;AACA;AACJ,iBAAK,CAAL;AACIpC,kBAAE,eAAF,EAAmBoC,IAAnB;AACA;AAfR;AAiBH,KArBD;;AAuBA;;;AAGApC,MAAE,oBAAF,EAAwB4E,QAAxB,CAAiC,cAAjC,EAAiD,OAAjD,EAA0D,YAAY;AAClE,YAAIjE,OAAOX,EAAE,IAAF,EAAQ2C,IAAR,CAAa,KAAb,CAAX;AACA,YAAI+c,WAAW1f,EAAE,IAAF,EAAQ2C,IAAR,CAAa,GAAb,EAAkB0E,IAAlB,EAAf;AACAsY,mBAAWhf,IAAX,EAAiB+e,QAAjB;AACH,KAJD;;AAMA,aAASC,UAAT,CAAoBhf,IAApB,EAA0B+e,QAA1B,EAAoC;AAChC,YAAIE,MAAMjf,KAAKC,IAAL,CAAU,KAAV,CAAV;AACA,YAAIif,gBAAgB,4CAChB,8DADgB,GAEhB,0BAFgB,GAGhB,2BAHgB,GAGcH,QAHd,GAGyB,QAHzB,GAIhB,iCAJgB,GAIoBE,GAJpB,GAI0B,IAJ1B,GAKhB,QALgB,GAMhB,QANgB,GAOhB,QAPJ;AAQAjf,aAAK8D,OAAL,CAAa,MAAb,EAAqB9B,IAArB,CAA0B,QAA1B,EAAoCpC,IAApC,CAAyCsf,aAAzC,EAAwDzd,IAAxD;AACH;AACJ,CAhDD;AAiDA;;;AAGApC,EAAE,YAAY;;AAEV,QAAI,CAAC8f,oBAAL,EAA2B;AACvB9f,UAAE,eAAF,EAAmB+f,IAAnB,CAAwB,YAAY;AAChC,gBAAIC,QAAQhgB,EAAE,IAAF,CAAZ;AACA,gBAAIggB,MAAMnd,GAAN,MAAe,EAAf,IAAqBmd,MAAMnd,GAAN,MAAemd,MAAMpf,IAAN,CAAW,aAAX,CAAxC,EAAmE;AAC/Dof,sBAAMxe,QAAN,CAAe,OAAf;AACAwe,sBAAMpf,IAAN,CAAW,OAAX,EAAoBof,MAAMpf,IAAN,CAAW,aAAX,CAApB;AACH;AACJ,SAND,EAMGmf,IANH;AAOH;;AAED,aAASD,kBAAT,GAA8B;AAC1B,eAAO,iBAAiBG,SAASC,aAAT,CAAuB,OAAvB,CAAxB;AACH;;AAED;;;;;;;;;AASA;;;AAGAlgB,MAAE,mBAAF,EAAuB4E,QAAvB,CAAgC,iBAAhC,EAAmD,OAAnD,EAA4D,YAAY;AACpE,YAAI6a,aAAazf,EAAE,IAAF,EAAQoI,KAAR,EAAjB;AACApI,UAAE,cAAF,EAAkB+F,EAAlB,CAAqB0Z,UAArB,EAAiCrd,IAAjC,GAAwCkE,QAAxC,GAAmDrG,IAAnD;AACH,KAHD;AAIH,CAhCD;AAiCA;;;AAGA;;;;AAIAD,EAAE,YAAY;AACV;AACA,QAAImgB,MAAM;AACN,kBAAU,IADJ;AAEN,oBAAY;AACR,wBAAY,CAAC;AACT,0BAAU,QADD;AAET,4BAAY,SAFH;AAGT,2BAAW;AAHF,aAAD,EAIT;AACC,0BAAU,QADX;AAEC,4BAAY,SAFb;AAGC,2BAAW;AAHZ,aAJS;AADJ;AAFN,KAAV;;AAeA;;;AAGAngB,MAAE,cAAF,EAAkB4E,QAAlB,CAA2B,OAA3B,EAAoC,OAApC,EAA6C,UAAU8Y,CAAV,EAAa;AACtD,YAAIxW,QAAQlH,EAAE,IAAF,CAAZ;AACAkH,cAAMZ,QAAN,CAAe,mBAAf,EAAoC3D,IAApC,CAAyC,OAAzC,EAAkDP,IAAlD;AACAsb,UAAE0C,eAAF;AACH,KAJD;AAKApgB,MAAE,cAAF,EAAkB4E,QAAlB,CAA2B,OAA3B,EAAoC,OAApC,EAA6C,YAAY;AACrD,YAAIsC,QAAQlH,EAAE,IAAF,CAAZ;AACA,YAAI8H,UAAUZ,MAAMrE,GAAN,EAAd;AACAqE,cAAMZ,QAAN,CAAe,mBAAf,EAAoC3D,IAApC,CAAyC,OAAzC,EAAkD1C,IAAlD,GAAyDif,MAAzD,CAAgE,gBAAgBpX,OAAhB,GAA0B,IAA1F,EAAgG1F,IAAhG;AACH,KAJD;AAKA;;;AAGApC,MAAE,eAAF,EAAmB4E,QAAnB,CAA4B,qBAA5B,EAAmD,OAAnD,EAA4D,UAAU8Y,CAAV,EAAa;AACrE,YAAIxW,QAAQlH,EAAE,IAAF,CAAZ;AACAqgB,mBAAWnZ,KAAX;AACA,YAAIxE,WAAWwE,MAAM5G,IAAN,EAAf;AACA4G,cAAM/D,QAAN,CAAe;AACXC,sBAAU,gCADC;AAEXC,kBAAMX,QAFK;AAGXY,kBAAMgd;AAHK,SAAf;AAKA;AACA5C,UAAE0C,eAAF;AACH,KAXD;AAYApgB,MAAE,MAAF,EAAUgD,EAAV,CAAa,OAAb,EAAsB,YAAY;AAC9B,YAAIkE,QAAQlH,EAAE,IAAF,CAAZ;AACAkH,cAAMvE,IAAN,CAAW,mBAAX,EAAgCA,IAAhC,CAAqC,OAArC,EAA8C1C,IAA9C;AACH,KAHD;AAIAD,MAAE,eAAF,EAAmB4E,QAAnB,CAA4B,uBAA5B,EAAqD,OAArD,EAA8D,YAAY;AACtE,YAAIsC,QAAQlH,EAAE,IAAF,CAAZ;AACAqgB,mBAAWnZ,KAAX;AACH,KAHD;;AAKA;;;AAGAlH,MAAE,eAAF,EAAmB4E,QAAnB,CAA4B,yBAA5B,EAAuD,OAAvD,EAAgE,YAAY;AACxE,YAAIsC,QAAQlH,EAAE,IAAF,CAAZ;AACA,YAAIugB,UAAUvgB,EAAE2O,IAAF,CAAO3O,EAAE,0BAAF,EAA8B6C,GAA9B,EAAP,CAAd;AACA,YAAI2d,YAAYxgB,EAAE2O,IAAF,CAAO3O,EAAE,YAAF,EAAgB6C,GAAhB,EAAP,CAAhB;AACA,YAAI0d,WAAW,EAAX,IAAiBC,aAAa,EAAlC,EAAsC;AAClC,gBAAI9d,WAAW1C,EAAE,YAAF,EAAgBM,IAAhB,EAAf;AACA,gBAAIyY,aAAa/Y,EAAE,kBAAF,EAAsB2C,IAAtB,CAA2B,IAA3B,CAAjB;AACA,gBAAI8d,cAAczgB,EAAE,YAAF,EAAgBM,IAAhB,CAAqB,SAArB,CAAlB;AACA,gBAAIogB,cAAc1gB,EAAE,YAAF,EAAgBM,IAAhB,CAAqB,UAArB,CAAlB;AACA,gBAAIgS,OAAO,IAAX;AACA;AACAyG,uBAAW7X,IAAX,CAAgB,YAAY;AACxB,oBAAIyf,aAAa3gB,EAAE,IAAF,EAAQM,IAAR,CAAa,SAAb,CAAjB;AACA,oBAAIsgB,cAAc5gB,EAAE,IAAF,EAAQM,IAAR,CAAa,UAAb,CAAlB;AACA,oBAAIqgB,UAAJ,EAAgB;AACZ,wBAAIA,cAAcF,WAAd,IAA6BG,eAAeF,WAAhD,EAA6D;AACzDpO,+BAAO,KAAP;AACH;AACJ;AACJ,aARD;AASA,gBAAIA,IAAJ,EAAU;AACNpL,sBAAM/D,QAAN,CAAe;AACXC,8BAAU,qCADC;AAEXC,0BAAMX,QAFK;AAGXY,0BAAMud;AAHK,iBAAf;AAKH,aAND,MAMO;AACH1c,sBAAM,WAAN;AACH;AACJ,SAzBD,MAyBO;AACHA,kBAAM,UAAN;AACH;AAGJ,KAlCD;AAmCA;;;AAGAnE,MAAE,eAAF,EAAmB4E,QAAnB,CAA4B,mBAA5B,EAAiD,OAAjD,EAA0D,YAAY;AAClE,YAAIsC,QAAQlH,EAAE,IAAF,CAAZ;AACA,YAAI0F,YAAY,EAAhB;AACA,YAAIob,aAAa,EAAjB;AACA,YAAIpe,WAAW,EAAf;AACA,YAAI+E,UAAU,6BAAd;AACAzH,UAAE,kBAAF,EAAsB2C,IAAtB,CAA2B,IAA3B,EAAiCzB,IAAjC,CAAsC,YAAY;AAC9C,gBAAI6f,UAAU/gB,EAAE,IAAF,CAAd;AACA8gB,yBAAaC,QAAQzgB,IAAR,EAAb;AACAygB,oBAAQpe,IAAR,CAAa,OAAb,EAAsBzB,IAAtB,CAA2B,YAAY;AACnC,oBAAI8f,WAAWhhB,EAAE,IAAF,EAAQY,IAAR,CAAa,MAAb,CAAf;AACA,oBAAIqgB,WAAWjhB,EAAE,IAAF,EAAQ6C,GAAR,EAAf;AACA,oBAAIme,QAAJ,EAAc;AACVF,+BAAWE,QAAX,IAAuBC,QAAvB;AACH;AACJ,aAND;AAOA,gBAAI,CAACjhB,EAAEkhB,aAAF,CAAgBJ,UAAhB,CAAL,EAAkC;AAC9Bpb,0BAAUM,IAAV,CAAe8a,UAAf;AACH;AACJ,SAbD;AAcApe,iBAAS,cAAT,IAA2BwN,KAAKC,SAAL,CAAezK,SAAf,CAA3B;AACA1F,UAAE,MAAF,EAAUqN,MAAV,CAAiB5F,OAAjB;AACAP,cAAM/D,QAAN,CAAe;AACXC,sBAAU,4BADC;AAEXC,kBAAMX,QAFK;AAGXY,kBAAMe;AAHK,SAAf;AAKH,KA3BD;AA4BA;;;AAGArE,MAAE,eAAF,EAAmB4E,QAAnB,CAA4B,cAA5B,EAA4C,OAA5C,EAAqD,YAAY;AAC7D,YAAIiL,SAAS7P,EAAE,IAAF,EAAQyE,OAAR,CAAgB,kBAAhB,EAAoC9B,IAApC,CAAyC,IAAzC,EAA+CmN,IAA/C,KAAwD,CAArE;AACA,YAAIC,UAAU7N,SAASlC,EAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsB7D,IAAtB,CAA2B,SAA3B,CAAT,CAAd;AACA,aAAK,IAAIO,IAAI,CAAb,EAAgBA,IAAI4O,UAAU,CAA9B,EAAiC5O,GAAjC,EAAsC;AAClCnB,cAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsBwL,IAAtB,GAA6B5N,MAA7B;AACH;AACD,YAAI0N,WAAWF,MAAf,EAAuB;AACnB7P,cAAE,IAAF,EAAQyE,OAAR,CAAgB,kBAAhB,EAAoCjD,QAApC,CAA6C,MAA7C;AACH;AACDxB,UAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsBpC,MAAtB;AAGH,KAZD;AAaA;;;;AAIA,QAAIge,aAAa,UAAU1f,IAAV,EAAgB;AAC7B,YAAImH,UAAUnH,KAAK0G,IAAL,EAAd;AACA,YAAI8Z,WAAWxgB,KAAKL,IAAL,EAAf;AACAK,aAAK8D,OAAL,CAAa,mBAAb,EAAkC6B,QAAlC,CAA2C,OAA3C,EAAoDzD,GAApD,CAAwDiF,OAAxD,EAAiExH,IAAjE,CAAsE6gB,QAAtE;AACAxgB,aAAK8D,OAAL,CAAa,mBAAb,EAAkC9B,IAAlC,CAAuC,IAAvC,EAA6C1C,IAA7C;AACH,KALD;AAMA;;;;AAIA,QAAIqgB,aAAa,UAAUhgB,IAAV,EAAgB;AAC7B,YAAIA,KAAKO,MAAT,EAAiB;AACb,gBAAI0Z,OAAOja,KAAKQ,QAAL,CAAcsgB,QAAzB;AACA,gBAAIC,UAAU9G,KAAKvZ,MAAnB;AACA,gBAAIsgB,WAAW,EAAf;AACA,iBAAK,IAAIngB,IAAI,CAAb,EAAgBA,IAAIkgB,OAApB,EAA6BlgB,GAA7B,EAAkC;AAC9B,oBAAIogB,WAAWhH,KAAKpZ,CAAL,CAAf;AACAmgB,4BAAY,gBAAgBC,SAASC,QAAzB,GAAoC,iBAApC,GAAwDD,SAASE,MAAjE,GAA0E,mBAA1E,GAAgGF,SAASG,OAAzG,GAAmH,IAAnH,GAA0HH,SAASC,QAAnI,GAA8I,OAA1J;AACH;AACDxhB,cAAE,oBAAF,EAAwBO,IAAxB,CAA6B+gB,QAA7B;AAEH;AACJ,KAZD;;AAcA;;;;AAIA,QAAIT,yBAAyB,UAAUvgB,IAAV,EAAgB;AACzC,YAAIqhB,WAAW3hB,EAAE,cAAF,EAAkB2C,IAAlB,CAAuB,kBAAvB,CAAf;AACAgf,iBAAS1gB,WAAT,CAAqB,MAArB;AACA0gB,iBAAShf,IAAT,CAAc,OAAd,EAAuB0K,MAAvB,CAA8B/M,IAA9B;AACH,KAJD;AAKA;;;AAGA,QAAI+D,oBAAoB,UAAU/D,IAAV,EAAgB;AACpCN,UAAE,QAAF,EAAYO,IAAZ,CAAiBD,KAAKQ,QAAL,CAAcwD,KAA/B,EAAsClC,IAAtC;AACApC,UAAE,UAAF,EAAcqC,MAAd;AACH,KAHD;;AAKA;;;;AAIArC,MAAE,eAAF,EAAmB4E,QAAnB,CAA4B,UAA5B,EAAwC,OAAxC,EAAiD,UAAUgd,KAAV,EAAiB;AAC9DC,gBAAQC,OAAR;AAEH,KAHD;;AAKA,QAAIA,UAAU;AACVC,aAAKF,QAAQG,GAAR;AADK,KAAd;AAGH,CApMD;;AAsMA;;;AAGA;;;;AAIAhiB,EAAE,YAAY;;AAEV;;;;AAIAA,MAAE,UAAF,EAAc4E,QAAd,CAAuB,cAAvB,EAAuC,OAAvC,EAAgD,YAAY;AACxD,YAAIhC,OAAO5C,EAAE,IAAF,CAAX;AACA,YAAIiiB,SAASrf,KAAK6B,OAAL,CAAa,IAAb,EAAmBnE,IAAnB,EAAb;AACAsC,aAAK6B,OAAL,CAAa,IAAb,EAAmB7D,IAAnB,CAAwB,UAAxB,EAAoC,KAApC;;AAEA,YAAIshB,SAAStf,KAAKC,GAAL,EAAb;AACA7C,UAAE,QAAF,EAAY2C,IAAZ,CAAiB,uCAAjB,EAA0DkQ,IAA1D,CAA+D,SAA/D,EAA0E,KAA1E;AACA7S,UAAE,QAAF,EAAYM,IAAZ,CAAiB2hB,MAAjB;AACA,YAAIC,UAAU,EAAd,EAAkB,CAEjB,CAFD,MAEO;AACHC,4BAAgBvf,IAAhB;AACH;AACD5C,UAAE,uBAAF,EAA2ByE,OAA3B,CAAmC,QAAnC,EAA6CrC,IAA7C;AACH,KAdD;;AAgBA;AACApC,MAAE,QAAF,EAAY4E,QAAZ,CAAqB,8DAArB,EAAqF,QAArF,EAA+F,YAAY;AACvG,YAAIsC,QAAQlH,EAAE,IAAF,CAAZ;AACA,YAAIsU,kBAAkB,IAAtB;AACA,YAAI8N,YAAYlb,MAAMtG,IAAN,CAAW,WAAX,CAAhB;AACA,YAAIyhB,UAAU,EAAd;AACA,YAAIC,iBAAiBpb,MAAMZ,QAAN,CAAe,eAAf,EAAgC3D,IAAhC,CAAqC,uCAArC,CAArB;;AAEA3C,UAAE,eAAF,EAAmBC,IAAnB;AACA;;AAEA,YAAIiH,MAAM2L,IAAN,CAAW,SAAX,CAAJ,EAA2B;AACvByP,2BAAezP,IAAf,CAAoB,SAApB,EAA+B,IAA/B;AACH,SAFD,MAEO;AACHyP,2BAAezP,IAAf,CAAoB,SAApB,EAA+B,KAA/B;AACH;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,KA5BD;;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA7S,MAAE,QAAF,EAAY4E,QAAZ,CAAqB,eAArB,EAAsC,OAAtC,EAA+C,YAAY;AACvD,YAAIsC,QAAQlH,EAAE,IAAF,CAAZ;AACA,YAAIuiB,OAAO,EAAX;AACA,YAAIC,WAAW,EAAf;AACA,YAAIC,SAAS,IAAb;AACA,YAAIC,aAAa,EAAjB;AACA,YAAIC,YAAY,EAAhB;AACA,YAAIC,QAAQ5iB,EAAE,eAAF,EAAmB2C,IAAnB,CAAwB,kBAAxB,EAA4CA,IAA5C,CAAiD,cAAjD,CAAZ;AACA,YAAIsf,SAAS/a,MAAMzC,OAAN,CAAc,QAAd,EAAwBnE,IAAxB,EAAb;AACA,YAAIuiB,aAAa,EAAjB;AACA,YAAIngB,WAAW,EAAf;AACAwE,cAAMzC,OAAN,CAAc,QAAd,EAAwB9B,IAAxB,CAA6B,uFAA7B,EAAsHzB,IAAtH,CAA2H,YAAY;AACnI4hB,oBAAQ9iB,EAAE,IAAF,CAAR;AACA0iB,yBAAa,EAAb;AACAF,qBAASxc,IAAT,CAAc8c,MAAMxiB,IAAN,CAAW,MAAX,CAAd;AACAmiB,qBAASK,MAAMxiB,IAAN,CAAW,SAAX,CAAT;AACAwiB,kBAAMxc,QAAN,CAAe,eAAf,EAAgC3D,IAAhC,CAAqC,0CAArC,EAAiFzB,IAAjF,CAAsF,YAAY;AAC9FwhB,2BAAW1c,IAAX,CAAgBhG,EAAE,IAAF,EAAQM,IAAR,CAAa,WAAb,CAAhB;AACH,aAFD;AAGAqiB,sBAAUF,MAAV,IAAoBC,UAApB;AACAI,kBAAMxc,QAAN,CAAe,SAAf,EAA0Be,IAA1B,CAA+B,EAA/B;AACH,SAVD;AAWA;AACAwb,mBAAW,aAAX,IAA4B3S,KAAKC,SAAL,CAAewS,SAAf,CAA5B;AACAjgB,iBAAS,kBAAT,IAA+BwN,KAAKC,SAAL,CAAenQ,EAAE0Q,MAAF,CAAS,EAAT,EAAauR,MAAb,EAAqBY,UAArB,CAAf,CAA/B;;AAEA;AACA3b,cAAM/D,QAAN,CAAe;AACXC,sBAAU,mCADC;AAEXC,kBAAMX,QAFK;AAGXY,kBAAM,UAAUhD,IAAV,EAAgB;AAClB,oBAAIA,KAAKO,MAAT,EAAiB;AACbb,sBAAE,QAAF,EAAYO,IAAZ,CAAiBD,KAAKQ,QAAL,CAAcwD,KAA/B,EAAsClC,IAAtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AACJ;AAdU,SAAf;AAiBH,KA5CD;;AA8CA;AACApC,MAAE,QAAF,EAAY4E,QAAZ,CAAqB,cAArB,EAAqC,OAArC,EAA8C,YAAY;AACtD5E,UAAE,IAAF,EAAQyE,OAAR,CAAgB,eAAhB,EAAiCxE,IAAjC;AACH,KAFD;AAGA;AACAD,MAAE,QAAF,EAAY4E,QAAZ,CAAqB,aAArB,EAAoC,OAApC,EAA6C,YAAY;AACrD,YAAIge,QAAQ5iB,EAAE,eAAF,EAAmB2C,IAAnB,CAAwB,kBAAxB,EAA4CA,IAA5C,CAAiD,cAAjD,CAAZ;AACAigB,cAAM3K,UAAN,CAAiB,UAAjB;AACH,KAHD;;AAMA;AACA,aAASkK,eAAT,CAAyBxhB,IAAzB,EAA+B;AAC3B,YAAIoiB,YAAYpiB,KAAKL,IAAL,CAAU,SAAV,CAAhB;AACA,aAAK,IAAIgB,MAAT,IAAmByhB,SAAnB,EAA8B;AAC1B,gBAAIL,aAAaK,UAAUzhB,MAAV,CAAjB;AACAtB,cAAE,QAAF,EAAY2C,IAAZ,CAAiB,yDAAyDrB,MAAzD,GAAkE,GAAnF,EAAwF2W,UAAxF,CAAmG,UAAnG,EAA+GpF,IAA/G,CAAoH,SAApH,EAA+H,IAA/H;AACA;AACA,iBAAK,IAAI1R,IAAI,CAAb,EAAgBA,IAAIuhB,WAAW1hB,MAA/B,EAAuCG,GAAvC,EAA4C;AACxCnB,kBAAE,QAAF,EAAY2C,IAAZ,CAAiB,yDAAyDrB,MAAzD,GAAkE,GAAnF,EAAwFgF,QAAxF,CAAiG,eAAjG,EAAkH3D,IAAlH,CAAuH,yCAAyC+f,WAAWvhB,CAAX,CAAzC,GAAyD,GAAhL,EAAqL0R,IAArL,CAA0L,SAA1L,EAAqM,IAArM;AACH;AAEJ;AACJ;;AAED;;;AAMH,CAvJD;AAwJA;;;;AAIA,CAAC,UAAUM,CAAV,EAAanT,CAAb,EAAgB;AACb,aAASgjB,UAAT,CAAoB3P,IAApB,EAA0B;AACtB;;;;AAIA,YAAIC,cAAc;AACd3S,kBAAM;AADQ,SAAlB;AAGA;;;AAGA,aAAKA,IAAL,GAAY0S,KAAK1S,IAAjB;;AAIA;;;AAGA,aAAK0S,IAAL,GAAYrT,EAAE0Q,MAAF,CAAS2C,IAAT,CAAZ;;AAEA,aAAKO,KAAL;AACH;;AAGD5T,MAAE0Q,MAAF,CAASsS,WAAWnP,SAApB,EAA+B;AAC3B;;;;AAIAD,eAAO,YAAY;AACf,gBAAIhR,OAAO,IAAX;;AAEAA,iBAAKqgB,MAAL,GAAcrgB,KAAKjC,IAAL,CAAUgC,IAAV,CAAe,UAAf,CAAd;AACAC,iBAAKsgB,cAAL,GAAsBtgB,KAAKqgB,MAAL,CAAYtgB,IAAZ,CAAiB,qBAAjB,CAAtB;AACAC,iBAAKugB,YAAL,GAAoBvgB,KAAKqgB,MAAL,CAAYtgB,IAAZ,CAAiB,mBAAjB,CAApB;AACAC,iBAAKwgB,UAAL,GAAkBxgB,KAAKjC,IAAL,CAAUgC,IAAV,CAAe,oBAAf,CAAlB;AACAC,iBAAKygB,OAAL;AACAzgB,iBAAKoR,SAAL;AACH,SAd0B;AAe3B;;;;AAIAqP,iBAAS,YAAY;AACjB,gBAAIzgB,OAAO,IAAX;AACA,gBAAImK,WAAW,CAAf;AACA,gBAAIuW,YAAY,CAAhB;AACA1gB,iBAAKwgB,UAAL,CAAgBzgB,IAAhB,CAAqB,QAArB,EAA+BzB,IAA/B,CAAoC,YAAY;AAC5C,oBAAIgG,QAAQlH,EAAE,IAAF,CAAZ;AACA+M,2BAAW7K,SAASgF,MAAMzC,OAAN,CAAc,IAAd,EAAoB9B,IAApB,CAAyB,YAAzB,EAAuCpC,IAAvC,EAAT,CAAX;AACA+iB,4BAAY/T,OAAOvP,EAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsB9B,IAAtB,CAA2B,OAA3B,EAAoCpC,IAApC,EAAP,CAAZ;AACA2G,sBAAM3G,IAAN,CAAW,CAACwM,WAAWuW,SAAZ,EAAuB7Q,OAAvB,CAA+B,CAA/B,CAAX;AACH,aALD;AAMH,SA7B0B;;AA+B3B;;;;AAIAuB,mBAAW,YAAY;AACnB,gBAAIpR,OAAO,IAAX;AACAA,iBAAKsgB,cAAL,CAAoBlgB,EAApB,CAAuB,OAAvB,EAAgC,YAAY;AACxCJ,qBAAK2gB,cAAL;AACH,aAFD;AAGA3gB,iBAAKugB,YAAL,CAAkBngB,EAAlB,CAAqB,OAArB,EAA8B,YAAY;AACtCJ,qBAAK4gB,YAAL;AACH,aAFD;AAGA5gB,iBAAKwgB,UAAL,CAAgBxe,QAAhB,CAAyB,sBAAzB,EAAiD,QAAjD,EAA2D,YAAY;AACnE,oBAAIsC,QAAQlH,EAAE,IAAF,CAAZ;AACA4C,qBAAK6gB,cAAL,CAAoBvc,KAApB;AACH,aAHD;AAIAtE,iBAAKwgB,UAAL,CAAgBxe,QAAhB,CAAyB,YAAzB,EAAuC,MAAvC,EAA+C,YAAY;AACvD,oBAAIsC,QAAQlH,EAAE,IAAF,CAAZ;AACH,aAFD;AAGA4C,iBAAKjC,IAAL,CAAU8D,OAAV,CAAkB,MAAlB,EAA0B9B,IAA1B,CAA+B,QAA/B,EAAyCiC,QAAzC,CAAkD,kBAAlD,EAAsE,OAAtE,EAA+E,YAAY;AACvF,oBAAIsC,QAAQlH,EAAE,IAAF,CAAZ;AACA,oBAAI0F,YAAY9C,KAAK8gB,WAAL,CAAiBxc,KAAjB,CAAhB;AACA,oBAAIxE,WAAW,EAAf;AACA,oBAAI2F,MAAM3C,UAAUO,IAAV,CAAe,GAAf,CAAV;AACAvD,2BAAWwE,MAAM5G,IAAN,EAAX;AACAoC,yBAAS,QAAT,IAAqB2F,GAArB;AACA,oBAAIA,GAAJ,EAAS;AACLnB,0BAAM/D,QAAN,CAAe;AACXC,kCAAU,8CADC;AAEXC,8BAAMX,QAFK;AAGXY,8BAAMV,KAAK+gB;AAHA,qBAAf;AAKH,iBAND,MAMO;AACHxf,0BAAM,SAAN;AACH;AAEJ,aAjBD;AAmBH,SArE0B;AAsE3B;;;;;AAKAsf,wBAAgB,UAAU9iB,IAAV,EAAgB;AAC5B,gBAAIA,KAAKijB,EAAL,CAAQ,UAAR,CAAJ,EAAyB;AACrBjjB,qBAAK8D,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,YAAxB,EAAsCsV,UAAtC,CAAiD,UAAjD;AACH,aAFD,MAEO;AACHtX,qBAAK8D,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,YAAxB,EAAsC/B,IAAtC,CAA2C,UAA3C,EAAuD,UAAvD;AACH;AAEJ,SAlF0B;AAmF3BijB,sBAAc,UAAUljB,IAAV,EAAgBoM,QAAhB,EAA0B;AACpC,gBAAI+W,YAAY5hB,SAASvB,KAAKkC,GAAL,EAAT,CAAhB;AACA,gBAAIkhB,cAAchX,WAAW+W,SAA7B,CAFoC,CAEI;AACxC,gBAAIC,eAAe,CAAnB,EAAsB;AAClBpjB,qBAAK8D,OAAL,CAAa,IAAb,EAAmB9B,IAAnB,CAAwB,YAAxB,EAAsCpC,IAAtC,CAA2CwjB,WAA3C;AACApjB,qBAAKkC,GAAL,CAASkhB,WAAT;AACH,aAHD,MAGO;AACH5f,sBAAM,cAAN;AACH;AACJ,SA5F0B;AA6F3B;;;;AAIAof,wBAAgB,YAAY;AACxB,gBAAI3gB,OAAO,IAAX;AACA,gBAAIohB,aAAaphB,KAAKjC,IAAL,CAAUgC,IAAV,CAAe,kBAAf,EAAmCmN,IAAnC,EAAjB;AACA,gBAAImU,UAAUrhB,KAAKwgB,UAAL,CAAgBzgB,IAAhB,CAAqB,IAArB,EAA2BmN,IAA3B,KAAoC,CAAlD;AACA,gBAAIoU,cAAc,IAAlB,CAJwB,CAIA;AACxB,gBAAIC,UAAU,EAAd,CALwB,CAKN;AAClB,gBAAIC,cAAc,IAAlB,CANwB,CAMA;AACxB,gBAAIC,WAAW,CAAf,CAPwB,CAON;AAClB,gBAAIC,cAAc,EAAlB,CARwB,CAQF;AACtB,gBAAIC,iBAAiB,CAArB,CATwB,CASA;AACxB,gBAAIxX,WAAW,CAAf,CAVwB,CAUN;AAClB,gBAAIyX,WAAW5hB,KAAKwgB,UAAL,CAAgBzgB,IAAhB,CAAqB,8BAArB,EAAqD3B,MAApE,CAXwB,CAWoD;AAC5E,gBAAIyjB,aAAa7hB,KAAKwgB,UAAL,CAAgBzgB,IAAhB,CAAqB,8BAArB,EAAqD8B,OAArD,CAA6D,IAA7D,CAAjB,CAZwB,CAY6D;AACrF,gBAAI+f,WAAW,CAAf,EAAkB;AACd,oBAAI5hB,KAAK8hB,WAAL,CAAiBD,UAAjB,CAAJ,EAAkC;AAC9B7hB,yBAAKjC,IAAL,CAAU0M,MAAV,CAAiBzK,KAAK+hB,cAAL,CAAoBX,UAApB,CAAjB;AACAphB,yBAAKwgB,UAAL,CAAgBzgB,IAAhB,CAAqB,8BAArB,EAAqDzB,IAArD,CAA0D,UAAUC,CAAV,EAAa;AACnE4L,mCAAW7K,SAASlC,EAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsB9B,IAAtB,CAA2B,YAA3B,EAAyCpC,IAAzC,EAAT,CAAX;;AAEA2jB,sCAAclkB,EAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsBoO,IAAtB,CAA2B,WAA3B,CAAd;AACAuR,sCAAcpkB,EAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsB9B,IAAtB,CAA2B,YAA3B,CAAd;AACA0hB,mCAAWD,YAAYvhB,GAAZ,EAAX;;AAEA0hB,yCAAiB,CAAChV,OAAO8U,QAAP,IAAmB9U,OAAOvP,EAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsB9B,IAAtB,CAA2B,OAA3B,EAAoCpC,IAApC,EAAP,CAApB,EAAwEkS,OAAxE,CAAgF,CAAhF,CAAjB;AACA6R,sCAAcF,YAAY3f,OAAZ,CAAoB,IAApB,EAA0BoO,IAA1B,CAA+B,WAA/B,CAAd;AACAsR,kCAAUD,YAAYU,OAAZ,CAAoB,kCAApB,EAAwD,EAAxD,EAA4DA,OAA5D,CAAoEN,WAApE,EAAiF,EAAjF,CAAV;;AAEA1hB,6BAAKiiB,eAAL,CAAqBV,OAArB,EAA8BH,UAA9B,EAA0CK,QAA1C,EAAoDE,cAApD,EAAoEpjB,CAApE;;AAEA,4BAAI8iB,UAAUO,QAAd,EAAwB;AACpB,gCAAIH,YAAYtX,QAAhB,EAA0B;AACtBnK,qCAAKihB,YAAL,CAAkBO,WAAlB,EAA+BrX,QAA/B;AACA/M,kCAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsBpC,MAAtB;AACH,6BAHD,MAGO;AACHrC,kCAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsB9B,IAAtB,CAA2B,sBAA3B,EAAmDkQ,IAAnD,CAAwD,SAAxD,EAAmE,KAAnE;AACA7S,kCAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsB9B,IAAtB,CAA2B,oBAA3B,EAAiD/B,IAAjD,CAAsD,UAAtD,EAAkE,UAAlE;AACAgC,qCAAKihB,YAAL,CAAkBO,WAAlB,EAA+BrX,QAA/B;AACH;AACJ,yBATD,MASO;AACH,gCAAIsX,YAAYtX,QAAhB,EAA0B;AACtBnK,qCAAKihB,YAAL,CAAkBO,WAAlB,EAA+BrX,QAA/B;AACA/M,kCAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsBpC,MAAtB;AACA,oCAAIO,KAAKwgB,UAAL,CAAgBzgB,IAAhB,CAAqB,IAArB,EAA2BmN,IAA3B,KAAoC,CAApC,IAAyC,CAA7C,EAAgD;AAC5ClN,yCAAKwgB,UAAL,CAAgB7iB,IAAhB,CAAqB,mBAArB;AACH;AACJ,6BAND,MAMO;AACHP,kCAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsB9B,IAAtB,CAA2B,sBAA3B,EAAmDkQ,IAAnD,CAAwD,SAAxD,EAAmE,KAAnE;AACA7S,kCAAE,IAAF,EAAQyE,OAAR,CAAgB,IAAhB,EAAsB9B,IAAtB,CAA2B,oBAA3B,EAAiD/B,IAAjD,CAAsD,UAAtD,EAAkE,UAAlE;AACAgC,qCAAKihB,YAAL,CAAkBO,WAAlB,EAA+BrX,QAA/B;AACH;AAEJ;AAEJ,qBArCD;AAuCH;AACJ,aA3CD,MA2CO;AACH5I,sBAAM,SAAN;AACH;AACDvB,iBAAKygB,OAAL;AAEH,SA9J0B;AA+J3B;;;;AAIAG,sBAAc,YAAY;AACtB,gBAAI5gB,OAAO,IAAX;AACA,gBAAIkiB,WAAWliB,KAAKwgB,UAAL,CAAgBzgB,IAAhB,CAAqB,IAArB,EAA2BmN,IAA3B,EAAf;AACA,gBAAIgV,WAAW,CAAf,EAAkB;AACd3gB,sBAAM,uBAAN;AACH,aAFD,MAEO;AACHvB,qBAAK+S,WAAL;AACH;AACJ,SA3K0B;AA4K3B;;;;;;;;AAQA+O,qBAAa,UAAUD,UAAV,EAAsB;AAC/B,gBAAIM,aAAa,EAAjB,CAD+B,CACV;AACrB,gBAAIC,cAAc,CAAlB,CAF+B,CAEV;AACrB,gBAAIC,WAAW,CAAf,CAH+B,CAGb;AAClB,gBAAIlY,WAAW,CAAf,CAJ+B,CAIb;AAClB,gBAAIuF,OAAO,IAAX;AACAmS,uBAAWvjB,IAAX,CAAgB,YAAY;AACxB,oBAAIgG,QAAQlH,EAAE,IAAF,CAAZ;AACA+kB,2BAAW/e,IAAX,CAAgBkB,MAAMvE,IAAN,CAAW,OAAX,EAAoBpC,IAApB,EAAhB;AACA0kB,2BAAW/d,MAAMvE,IAAN,CAAW,YAAX,EAAyBE,GAAzB,EAAX;AACAkK,2BAAW7K,SAASgF,MAAMvE,IAAN,CAAW,YAAX,EAAyBpC,IAAzB,EAAT,CAAX;AACA,oBAAIgkB,iBAAiBhV,OAAOrI,MAAMvE,IAAN,CAAW,YAAX,EAAyBE,GAAzB,EAAP,IAAyC0M,OAAOrI,MAAMvE,IAAN,CAAW,OAAX,EAAoBpC,IAApB,EAAP,CAA9D;AACAykB,+BAAeT,cAAf;AACA,oBAAIU,YAAY,CAAhB,EAAmB;AACf9gB,0BAAM,UAAN;AACAmO,2BAAO,KAAP;AACH,iBAHD,MAGO,IAAI2S,WAAWlY,QAAf,EAAyB;AAC5B5I,0BAAM,cAAN;AACAmO,2BAAO,KAAP;AACH;AACJ,aAdD;AAeA,gBAAI0S,cAAc,OAAlB,EAA2B;AACvB7gB,sBAAM,8BAAN;AACAmO,uBAAO,KAAP;AACH;AACD,iBAAK,IAAInR,IAAI,CAAR,EAAW+jB,OAAOH,WAAW/jB,MAAlC,EAA0CG,IAAI+jB,IAA9C,EAAoD/jB,GAApD,EAAyD;AACrD,qBAAK,IAAIwF,IAAIxF,IAAI,CAAjB,EAAoBwF,IAAIue,IAAxB,EAA8Bve,GAA9B,EAAmC;AAC/B,wBAAIoe,WAAW5jB,CAAX,KAAiB4jB,WAAWpe,CAAX,CAArB,EAAoC;AAChCxC,8BAAM,kCAAN;AACAmO,+BAAO,KAAP;AACH;AACJ;AACJ;AACD,mBAAOA,IAAP;AACH,SAtN0B;AAuN3B;;;;;;;AAOAqS,wBAAgB,UAAUX,UAAV,EAAsB;AAClC,gBAAIphB,OAAO,IAAX;AACA,gBAAI6E,UAAU,EAAd;AACA,gBAAI0d,UAAUviB,KAAKjC,IAAL,CAAUgC,IAAV,CAAe,WAAf,EAA4BrC,IAA5B,CAAiC,UAAjC,CAAd;AACA,gBAAI6kB,WAAW,CAAf,EAAkB;AACd1d,0BAAU,sCAAsCuc,UAAtC,GAAmD,cAAnD,GAAoEA,UAApE,GAAiF,GAAjF,GACN,8BADM,GAC2BA,UAD3B,GACwC,QADxC,GAEN,gBAFM,GAGN,4GAHM,GAIN,kBAJM,GAKN,OALJ;AAMH,aAPD,MAOO,IAAImB,WAAW,CAAf,EAAkB;AACrB1d,0BAAU,sCAAsCuc,UAAtC,GAAmD,cAAnD,GAAoEA,UAApE,GAAiF,GAAjF,GACN,8BADM,GAC2BA,UAD3B,GACwC,QADxC,GAEN,gBAFM,GAGN,iGAHM,GAIN,kBAJM,GAKN,OALJ;AAMH;;AAED,mBAAOvc,OAAP;AACH,SAnP0B;AAoP3B;;;;;;AAMAod,yBAAiB,UAAUO,OAAV,EAAmBpB,UAAnB,EAA+BjX,QAA/B,EAAyCwX,cAAzC,EAAyDnc,KAAzD,EAAgE;AAC7E,gBAAIid,WAAW,WAAWrB,UAA1B;AACAhkB,cAAEqlB,QAAF,EAAY1iB,IAAZ,CAAiB,OAAjB,EAA0B0K,MAA1B,CAAiC+X,OAAjC;AACAplB,cAAEqlB,QAAF,EAAY1iB,IAAZ,CAAiB,YAAjB,EAA+BoD,EAA/B,CAAkCqC,KAAlC,EAAyC7H,IAAzC,CAA8CwM,QAA9C,EAAwDnM,IAAxD,CAA6D,OAA7D,EAAsEmM,QAAtE;AACA/M,cAAEqlB,QAAF,EAAY1iB,IAAZ,CAAiB,QAAjB,EAA2BoD,EAA3B,CAA8BqC,KAA9B,EAAqC7H,IAArC,CAA0CgkB,cAA1C,EAA0D3jB,IAA1D,CAA+D,OAA/D,EAAwE2jB,cAAxE;AACH,SA/P0B;AAgQ3B;;;;;;AAMAb,qBAAa,UAAU/iB,IAAV,EAAgB;AACzB,gBAAI+B,QAAJ;AACA,gBAAIgD,YAAY,EAAhB;AACA,gBAAII,YAAYnF,KAAK8D,OAAL,CAAa,QAAb,EAAuB9B,IAAvB,CAA4B,kBAA5B,EAAgDA,IAAhD,CAAqD,8BAArD,CAAhB;AACA3C,cAAEkB,IAAF,CAAO4E,SAAP,EAAkB,UAAU3E,CAAV,EAAa;AAC3BuB,2BAAWoD,UAAUC,EAAV,CAAa5E,CAAb,EAAgBsD,OAAhB,CAAwB,IAAxB,EAA8BnE,IAA9B,CAAmC,KAAnC,CAAX;AACA,oBAAIoC,QAAJ,EAAc;AACVgD,8BAAUM,IAAV,CAAetD,QAAf;AACH;AACJ,aALD;AAMA,mBAAOgD,SAAP;AACH,SAjR0B;AAkR3B;;;;;AAKA4f,sBAAc,UAAUhlB,IAAV,EAAgB;AAC1B,gBAAIqhB,WAAW3hB,EAAE,cAAF,EAAkB2C,IAAlB,CAAuB,kBAAvB,CAAf;AACA3C,cAAE,QAAF,EAAYC,IAAZ;AACA0hB,qBAAS1gB,WAAT,CAAqB,MAArB;AACA0gB,qBAAShf,IAAT,CAAc,OAAd,EAAuB0K,MAAvB,CAA8B/M,IAA9B;AACH,SA5R0B;AA6R3B;;;;;;AAMAqjB,4BAAoB,UAAUrjB,IAAV,EAAgB;AAChCN,cAAE,QAAF,EAAYO,IAAZ,CAAiBD,KAAKQ,QAAL,CAAcwD,KAA/B,EAAsClC,IAAtC;AACH,SArS0B;;AAuS3B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BAuT,qBAAa,YAAY;AACrB,gBAAI/S,OAAO,IAAX;AACA,gBAAI+M,cAAc,EAAlB;AACA,gBAAIjJ,eAAe,EAAnB;AACA,gBAAIhE,WAAW,EAAf;AACA,gBAAI6iB,QAAQ,EAAZ;AACA,gBAAI9d,UAAU,6BAAd;AACAf,2BAAe9D,KAAKjC,IAAL,CAAUgC,IAAV,CAAe,oBAAf,EAAqCrC,IAArC,EAAf;AACAN,cAAE,4CAAF,EAAgDkB,IAAhD,CAAqD,YAAY;AAC7D,oBAAIskB,YAAY,EAAhB;AACA,oBAAIC,YAAY,EAAhB;AACAD,0BAAU,SAAV,IAAuBxlB,EAAE,IAAF,EAAQM,IAAR,CAAa,OAAb,CAAvB;AACAN,kBAAE,IAAF,EAAQ2C,IAAR,CAAa,IAAb,EAAmBzB,IAAnB,CAAwB,YAAY;;AAEhC,wBAAIlB,EAAE,IAAF,EAAQM,IAAR,CAAa,QAAb,CAAJ,EAA4B;AACxB,4BAAIolB,UAAU,EAAd;AACAA,gCAAQ,OAAR,IAAmB1lB,EAAE,IAAF,EAAQM,IAAR,CAAa,QAAb,CAAnB;AACAolB,gCAAQ,QAAR,IAAoB1lB,EAAE,IAAF,EAAQ2C,IAAR,CAAa,YAAb,EAA2BpC,IAA3B,EAApB;AACAklB,kCAAUzf,IAAV,CAAe0f,OAAf;AAEH;AAEJ,iBAVD;AAWAF,0BAAU,UAAV,IAAwBC,SAAxB;;AAEAF,sBAAMvf,IAAN,CAAWwf,SAAX;AACH,aAlBD;AAmBA9e,yBAAa,OAAb,IAAwB6e,KAAxB;AACA5V,0BAAcO,KAAKC,SAAL,CAAezJ,YAAf,CAAd;AACAhE,qBAAS,cAAT,IAA2BiN,WAA3B;AACA3P,cAAE,MAAF,EAAUqN,MAAV,CAAiB5F,OAAjB;AACAzH,cAAE,IAAF,EAAQmD,QAAR,CAAiB;AACbC,0BAAU,0CADG;AAEbC,sBAAMX,QAFO;AAGbY,sBAAMV,KAAK+gB;AAHE,aAAjB;AAMH,SA3W0B;AA4W3B;;;AAGAA,4BAAoB,UAAUrjB,IAAV,EAAgB;AAChCN,cAAE,QAAF,EAAYO,IAAZ,CAAiBD,KAAKQ,QAAL,CAAcwD,KAA/B,EAAsClC,IAAtC;AACApC,cAAE,UAAF,EAAcqC,MAAd;AACH,SAlX0B;AAmX3B;;;AAGAqC,gBAAQ,YAAY;AAChB,iBAAKkP,KAAL;AACH;AAxX0B,KAA/B;;AA4XA;;;AAGA,QAAI,CAACT,EAAE6P,UAAP,EAAmB;AACf7P,UAAE6P,UAAF,GAAe,YAAY;AACvB,gBAAIA,UAAJ,CAAe;AACXriB,sBAAMX,EAAE,eAAF;AADK,aAAf;AAGH,SAJD;AAKH;;AAED;;;AAGAA,MAAE,YAAY;AACVmT,UAAE6P,UAAF;AACH,KAFD;AAIH,CAvaD,EAuaGpf,MAvaH,EAuaW4b,MAvaX;AAwaA;;;AAGA,CAAC,UAAUrM,CAAV,EAAanT,CAAb,EAAgB;AACb,aAAS2lB,eAAT,CAAyBtS,IAAzB,EAA+B;AAC3B;;;;AAIA,YAAIC,cAAc;AACd3S,kBAAM;AADQ,SAAlB;AAGA;;;AAGA,aAAKA,IAAL,GAAY0S,KAAK1S,IAAjB;;AAEA;;;AAGA,aAAK0S,IAAL,GAAYrT,EAAE0Q,MAAF,CAAS2C,IAAT,CAAZ;;AAEA,aAAKO,KAAL;AACH;;AAED5T,MAAE0Q,MAAF,CAASiV,gBAAgB9R,SAAzB,EAAoC;AAChC;;;;AAIAD,eAAO,YAAY;AACf,gBAAIhR,OAAO,IAAX;;AAEAA,iBAAKgjB,kBAAL,GAA0B5lB,EAAE,oCAAF,CAA1B;AACA4C,iBAAKijB,UAAL,GAAkB7lB,EAAE,wBAAF,CAAlB;;AAEA,gBAAI4C,KAAKgjB,kBAAL,CAAwBjjB,IAAxB,CAA6B,iBAA7B,EAAgD3B,MAAhD,IAA0D4B,KAAKgjB,kBAAL,CAAwBjjB,IAAxB,CAA6B,iBAA7B,EAAgDE,GAAhD,GAAsD7B,MAApH,EAA4H;AACxH4B,qBAAKkjB,mBAAL;AACH;;AAEDljB,iBAAKoR,SAAL;AACH,SAhB+B;;AAkBhC+R,qBAAa,qCAlBmB;;AAoBhCC,oBAAY,UAAUzY,IAAV,EAAgBnM,GAAhB,EAAqB;AAC7B,gBAAImM,QAAQ,KAAZ,EAAmB;AACf,oBAAInM,IAAI,CAAJ,EAAO6kB,OAAP,IAAkB,OAAtB,EAA+B;AAC3B7kB,wBAAIH,WAAJ,CAAgB,OAAhB;AACH,iBAFD,MAEO;AACHG,wBAAIR,IAAJ,CAAS,OAAT,EAAkB,EAAlB;AACH;AACJ,aAND,MAMO;AACH,oBAAIQ,IAAI,CAAJ,EAAO6kB,OAAP,IAAkB,OAAtB,EAA+B;AAC3B7kB,wBAAII,QAAJ,CAAa,OAAb;AACH,iBAFD,MAEO;AACHJ,wBAAIR,IAAJ,CAAS,OAAT,EAAkB+kB,gBAAgB9R,SAAhB,CAA0BkS,WAA5C;AACH;AACJ;AACJ,SAlC+B;;AAoChCG,+BAAuB,UAAUC,WAAV,EAAuB;AAC1C,gBAAI5lB,OAAO,uEAAX;AACA,iBAAK,IAAIY,IAAI,CAAb,EAAgBA,IAAIglB,YAAYnlB,MAAhC,EAAwCG,GAAxC,EAA6C;AACzCilB,8BAAcD,YAAYhlB,CAAZ,CAAd;AACA,oBAAIklB,YAAYD,YAAY,aAAZ,CAAhB;AACA,oBAAIE,cAAcF,YAAY,eAAZ,CAAlB;AACA7lB,wBAAQ,oBAAoB8lB,SAApB,GAAgC,IAAhC,GAAuCC,WAAvC,GAAqD,WAA7D;AACH;AACD,mBAAO/lB,IAAP;AACH,SA7C+B;AA8ChC;;;;AAIAyT,mBAAW,YAAY;AACnB,gBAAIpR,OAAO,IAAX;;AAEAA,iBAAKgjB,kBAAL,CAAwB5iB,EAAxB,CAA2B,QAA3B,EAAqC,YAAY;AAC7CJ,qBAAKkjB,mBAAL;AACH,aAFD;;AAIAljB,iBAAKijB,UAAL,CAAgB7iB,EAAhB,CAAmB,OAAnB,EAA4B,YAAY;AACpCJ,qBAAK2jB,QAAL;AACH,aAFD;;AAIAvmB,cAAE,MAAF,EAAU4E,QAAV,CAAmB,0CAAnB,EAA+D,QAA/D,EAAyE,YAAY;AACjFhC,qBAAK4jB,qBAAL;AACH,aAFD;AAIH,SAjE+B;;AAmEhC;AACAV,6BAAqB,YAAY;AAC7B,gBAAIW,qBAAqBzmB,EAAE,6BAAF,CAAzB;AACA;AACA,gBAAI4lB,qBAAqB5lB,EAAE,oCAAF,CAAzB;AACA,gBAAI0mB,uBAAuB1mB,EAAE,0CAAF,CAA3B;;AAEA,gBAAI2mB,eAAef,mBAAmBjjB,IAAnB,CAAwB,iBAAxB,EAA2CE,GAA3C,EAAnB;AACA;AACA;AACA8iB,4BAAgB9R,SAAhB,CAA0BmS,UAA1B,CAAqC,KAArC,EAA4CJ,kBAA5C;AACAD,4BAAgB9R,SAAhB,CAA0BmS,UAA1B,CAAqC,KAArC,EAA4CS,kBAA5C;AACA;AACA,gBAAIE,gBAAgB,CAApB,EAAuB;AACnBD,qCAAqBzmB,IAArB;AACA;AACA;AACA;AACA;AACA;AACA;AACAD,kBAAEsN,IAAF,CAAO;AACHC,0BAAM,MADH;AAEHqZ,2BAAO,KAFJ;AAGH7iB,yBAAK,4CAHF;AAIH;AACA;AACA;AACAqZ,8BAAU,MAPP;AAQH3P,6BAAS,UAAUnN,IAAV,EAAgB;AACrB,4BAAIA,KAAK,WAAL,CAAJ,EAAuB;AACnBmmB,+CAAmB5jB,GAAnB,CAAuBvC,KAAK,WAAL,CAAvB;AACA;AACAmmB,+CAAmB7lB,IAAnB,CAAwB,UAAxB,EAAoC,IAApC;AACA;AACA;AACH,yBAND,MAMO;AACHuD,kCAAM,WAAN;AACH;AACJ,qBAlBE;AAmBHyJ,2BAAO,YAAY;AACfzJ,8BAAM,WAAN;AACH;AArBE,iBAAP;AAuBA;AACA;AACH;AACD;AAlCA,iBAmCK,IAAIwiB,gBAAgB,CAApB,EAAuB;AACxB;AACA;AACA3mB,sBAAEsN,IAAF,CAAO;AACHC,8BAAM,MADH;AAEHqZ,+BAAO,KAFJ;AAGH7iB,6BAAK,0CAHF;AAIHzD,8BAAM,EAJH;AAKH8c,kCAAU,MALP;AAMH3P,iCAAS,UAAUnN,IAAV,EAAgB;AACrB,gCAAIA,KAAK,aAAL,CAAJ,EAAyB;AACrB,oCAAIC,OAAOolB,gBAAgB9R,SAAhB,CAA0BqS,qBAA1B,CAAgD5lB,KAAK,aAAL,CAAhD,CAAX;AACAomB,qDAAqBnmB,IAArB,CAA0BA,IAA1B;AACAmmB,qDAAqBtkB,IAArB;AACAqkB,mDAAmB5jB,GAAnB,CAAuB,EAAvB;AACA;AACA4jB,mDAAmB7lB,IAAnB,CAAwB,UAAxB,EAAoC,KAApC;AACA;AACH,6BARD,MAQO;AACHuD,sCAAM,UAAN;AACH;AACJ,yBAlBE;AAmBHyJ,+BAAO,YAAY;AACfzJ,kCAAM,UAAN;AACH;AArBE,qBAAP;AAuBH;AACJ,SA9I+B;;AAgJhCqiB,+BAAuB,YAAY;AAC/B,gBAAIE,uBAAuB1mB,EAAE,0CAAF,CAA3B;AACA2lB,4BAAgB9R,SAAhB,CAA0BmS,UAA1B,CAAqC,KAArC,EAA4CU,oBAA5C;AACA;AACA;AACAA,iCAAqBtkB,IAArB;AACH,SAtJ+B;;AAwJhCmkB,kBAAU,YAAY;AAClB,gBAAIE,qBAAqBzmB,EAAE,6BAAF,CAAzB;AACA,gBAAI6mB,oBAAoB7mB,EAAE,4BAAF,CAAxB;AACA,gBAAI4lB,qBAAqB5lB,EAAE,oCAAF,CAAzB;AACA,gBAAI0mB,uBAAuB1mB,EAAE,0CAAF,CAA3B;;AAEA,gBAAI2mB,eAAef,mBAAmBjjB,IAAnB,CAAwB,iBAAxB,EAA2CE,GAA3C,EAAnB;AACA,gBAAIikB,eAAe9mB,EAAE2O,IAAF,CAAOkY,kBAAkBhkB,GAAlB,EAAP,CAAnB;AACA,gBAAIkkB,aAAa/mB,EAAE2O,IAAF,CAAO8X,mBAAmB5jB,GAAnB,EAAP,CAAjB;AACA;AACA,gBAAI,CAAC8jB,YAAL,EAAmB;AACfhB,gCAAgB9R,SAAhB,CAA0BmS,UAA1B,CAAqC,IAArC,EAA2CJ,kBAA3C;AACA;AACH;AACD,gBAAIe,gBAAgB,CAApB,EAAuB;AACnB,oBAAIK,oBAAoBN,qBAAqB/jB,IAArB,CAA0B,iBAA1B,EAA6CE,GAA7C,EAAxB;AACA,oBAAIokB,qBAAqBP,qBAAqB/jB,IAArB,CAA0B,iBAA1B,EAA6C0E,IAA7C,EAAzB;AACA,oBAAI,CAAC2f,iBAAD,IAAsB,CAACC,kBAA3B,EAA+C;AAC3CP,yCAAqB9lB,IAArB,CAA0B,OAA1B,EAAmC+kB,gBAAgB9R,SAAhB,CAA0BkS,WAA7D,EAA0E3jB,IAA1E;AACA;AACH;AACJ;AACD,gBAAI,CAAC2kB,UAAL,EAAiB;AACbpB,gCAAgB9R,SAAhB,CAA0BmS,UAA1B,CAAqC,IAArC,EAA2CS,kBAA3C;AACA;AACH;AACD;AACAzmB,cAAEsN,IAAF,CAAO;AACHC,sBAAM,MADH;AAEHqZ,uBAAO,KAFJ;AAGH7iB,qBAAK,qCAHF;AAIHzD,sBAAM;AACF4mB,gCAAYlnB,EAAE2O,IAAF,CAAO3O,EAAE,wBAAF,EAA4B6C,GAA5B,EAAP,CADV;AAEF8jB,kCAAcA,YAFZ;AAGFK,uCAAmBA,iBAHjB;AAIFC,wCAAoBA,kBAJlB;AAKFH,kCAAcA,YALZ;AAMFC,gCAAYA;AANV,iBAJH;AAYH3J,0BAAU,MAZP;AAaH3P,yBAAS,UAAUnN,IAAV,EAAgB;AACrB,wBAAIA,KAAKmN,OAAL,IAAgB,IAApB,EAA0B;AACtBtJ,8BAAM,MAAN;AACAP,+BAAOC,QAAP,CAAgBC,IAAhB,GAAuB9D,EAAE2O,IAAF,CAAO3O,EAAE,eAAF,EAAmB6C,GAAnB,EAAP,CAAvB;AACH,qBAHD,MAGO;AACHsB,8BAAM,MAAN;AACH;AACJ,iBApBE;AAqBHyJ,uBAAO,YAAY;AACfzJ,0BAAM,MAAN;AACH;AAvBE,aAAP;AAyBH,SA5M+B;;AA8MhCO,gBAAQ,YAAY;AAChB,iBAAKkP,KAAL;AACH;AAhN+B,KAApC;;AAoNA;;;AAGA,QAAI,CAACT,EAAEwS,eAAP,EAAwB;AACpBxS,UAAEwS,eAAF,GAAoB,YAAY;AAC5B,gBAAIA,eAAJ,CAAoB;AAChBhlB,sBAAMX,EAAE,eAAF;AADU,aAApB;AAGH,SAJD;AAKH;;AAED;;;AAGAA,MAAE,YAAY;AACVmT,UAAEwS,eAAF;AACH,KAFD;AAIH,CA5PD,EA4PG/hB,MA5PH,EA4PW4b,MA5PX;AA6PA;;;;AAIA,IAAI2H,sBAAsB,EAA1B;;AAEAA,oBAAoBC,oBAApB,GAA2C,IAA3C;AACAD,oBAAoBE,QAApB,GAA+B,IAA/B;;AAEA,CAAC,UAAUlU,CAAV,EAAanT,CAAb,EAAgB;AACb,aAASsnB,iBAAT,CAA2BjU,IAA3B,EAAiC;AAC7B;;;;AAIA,YAAIC,cAAc;AACd3S,kBAAM;AADQ,SAAlB;AAGA;;;AAGA,aAAKA,IAAL,GAAY0S,KAAK1S,IAAjB;;AAEA;;;AAGA,aAAK0S,IAAL,GAAYrT,EAAE0Q,MAAF,CAAS2C,IAAT,CAAZ;;AAEA,aAAKO,KAAL;AACH;;AAGD5T,MAAE0Q,MAAF,CAAS4W,kBAAkBzT,SAA3B,EAAsC;AAClC;;;;AAIAD,eAAO,YAAY;AACf,gBAAIhR,OAAO,IAAX;;AAEAA,iBAAK2kB,SAAL,GAAiBvnB,EAAE,+BAAF,CAAjB;AACA4C,iBAAK4kB,mBAAL,GAA2BxnB,EAAE,wCAAF,CAA3B;AACA4C,iBAAK6kB,oBAAL,GAA4BznB,EAAE,yCAAF,CAA5B;AACA4C,iBAAK8kB,eAAL,GAAuB1nB,EAAE,2BAAF,CAAvB;AACA4C,iBAAK+kB,mBAAL,GAA2B3nB,EAAE,gCAAF,CAA3B;;AAEAmnB,gCAAoBE,QAApB,GAA+BzkB,KAAKglB,iBAAL,EAA/B;;AAEAhlB,iBAAKoR,SAAL;AACH,SAjBiC;;AAmBlC;;;;AAIAA,mBAAW,YAAY;AACnB,gBAAIpR,OAAO,IAAX;;AAEAA,iBAAK2kB,SAAL,CAAe3iB,QAAf,CAAwB,6BAAxB,EAAuD,OAAvD,EAAgE,YAAY;AACxEhC,qBAAKilB,OAAL,CAAa7nB,EAAE,IAAF,CAAb;AACH,aAFD;;AAIA4C,iBAAK2kB,SAAL,CAAe3iB,QAAf,CAAwB,4BAAxB,EAAsD,OAAtD,EAA+D,YAAY;AACvE,oBAAIsiB,aAAalnB,EAAE,IAAF,EAAQY,IAAR,CAAa,kBAAb,CAAjB;AACAsmB,6BAAa,OAAOA,UAAP,IAAqB,WAArB,GAAmC,EAAnC,GAAwCA,UAArD;AACAtkB,qBAAKklB,iBAAL,CAAuBZ,UAAvB;AACH,aAJD;;AAMAtkB,iBAAK2kB,SAAL,CAAe3iB,QAAf,CAAwB,qCAAxB,EAA+D,OAA/D,EAAwE,YAAY;AAChFhC,qBAAKmlB,iBAAL,CAAuB/nB,EAAE,+BAAF,CAAvB;AACH,aAFD;;AAIA4C,iBAAK2kB,SAAL,CAAe3iB,QAAf,CAAwB,4BAAxB,EAAsD,OAAtD,EAA+D,YAAY;AACvEhC,qBAAKolB,WAAL,CAAiBhoB,EAAE,IAAF,CAAjB;AACH,aAFD;;AAIA4C,iBAAK2kB,SAAL,CAAe3iB,QAAf,CAAwB,kCAAxB,EAA4D,OAA5D,EAAqE,YAAY;AAC7EhC,qBAAKqlB,oBAAL,CAA0BjoB,EAAE,IAAF,CAA1B;AACH,aAFD;;AAIAA,cAAE,MAAF,EAAU4E,QAAV,CAAmB,qCAAnB,EAA0D,OAA1D,EAAmE,YAAY;AAC3EhC,qBAAKslB,gBAAL;AACH,aAFD;;AAIAloB,cAAE,MAAF,EAAU4E,QAAV,CAAmB,4BAAnB,EAAiD,OAAjD,EAA0D,YAAY;AAClEhC,qBAAKulB,0BAAL;AACH,aAFD;;AAIAvlB,iBAAK4kB,mBAAL,CAAyBxkB,EAAzB,CAA4B,OAA5B,EAAqC,YAAY;AAC7C,oBAAIhD,EAAE,aAAF,EAAiB6C,GAAjB,MAA0B,MAA9B,EAAsC;AAClCD,yBAAKwlB,aAAL,CAAmB,YAAY;AAC3BxlB,6BAAKylB,iBAAL,CAAuB,CAAvB;AACH,qBAFD;AAGH,iBAJD,MAIO;AACHzlB,yBAAKylB,iBAAL,CAAuB,CAAvB;AACH;AACJ,aARD;AASAzlB,iBAAK6kB,oBAAL,CAA0BzkB,EAA1B,CAA6B,OAA7B,EAAsC,YAAY;AAC9C,oBAAIhD,EAAE,aAAF,EAAiB6C,GAAjB,MAA0B,MAA9B,EAAsC;AAClCD,yBAAKwlB,aAAL,CAAmB,YAAY;AAC3BxlB,6BAAKylB,iBAAL,CAAuB,CAAvB;AACH,qBAFD;AAGH,iBAJD,MAIO;AACHzlB,yBAAKylB,iBAAL,CAAuB,CAAvB;AACH;AACJ,aARD;;AAUAzlB,iBAAK8kB,eAAL,CAAqB1kB,EAArB,CAAwB,OAAxB,EAAiC,YAAY;AACzCJ,qBAAK0lB,aAAL,CAAmB,CAAnB;AACH,aAFD;;AAIA1lB,iBAAK+kB,mBAAL,CAAyB3kB,EAAzB,CAA4B,OAA5B,EAAqC,YAAY;AAC7CJ,qBAAK2lB,iBAAL;AACH,aAFD;;AAIAvoB,cAAE,MAAF,EAAU4E,QAAV,CAAmB,0BAAnB,EAA+C,OAA/C,EAAwD,YAAY;AAChEhC,qBAAK4lB,YAAL;AACH,aAFD;AAGH,SAtFiC;;AAwFlC;AACAC,wBAAgB,YAAY;AACxB,gBAAI7lB,OAAO,IAAX;AACA,gBAAI8lB,eAAevB,oBAAoBE,QAAvC;AACA,gBAAI9mB,OAAO,EAAX;AACA,iBAAK,IAAIY,CAAT,IAAcunB,YAAd,EAA4B;AACxB,oBAAIrB,WAAWqB,aAAavnB,CAAb,CAAf;AACA,oBAAIkmB,SAASsB,OAAb,EAAsB;AAClB,wBAAIC,WAAW,EAAf;AACA,wBAAIvB,SAASwB,QAAb,EAAuB;AACnBD,mCAAW,mDACP,+CADJ;AAEH,qBAHD,MAGO;AACHA,mCAAW,8EACP,yEADJ;AAEH;AACDroB,2BAAOA,OACH,aADG,IACc8mB,SAASwB,QAAT,GAAoB,UAApB,GAAiC,EAD/C,IACqD,IADrD,GAEH,oEAFG,GAGH,aAHG,GAGaxB,SAASsB,OAHtB,GAGgC,mBAHhC,GAGsDtB,SAASsB,OAH/D,GAIH,yCAJG,GAIyCtB,SAASyB,MAJlD,GAI2D,kBAJ3D,GAKH,yCALG,GAKyCzB,SAAS0B,IALlD,GAKyD,gBALzD,GAMH,yCANG,GAMyC1B,SAAS9Z,IANlD,GAMyD,gBANzD,GAOH,yCAPG,GAOyC8Z,SAAS2B,KAPlD,GAO0D,iBAP1D,GAQH,yCARG,GAQyC3B,SAAS4B,WARlD,GAQgE,uBARhE,GASH,yCATG,GASyC5B,SAASsB,OATlD,GAS4D,mBAT5D,GAUH,OAVG,GAWH,aAXG,GAWatB,SAAS6B,QAXtB,GAWiC,oBAXjC,GAWwD7B,SAAS6B,QAXjE,GAW4E,OAX5E,GAYH,aAZG,GAYa7B,SAAS8B,aAZtB,GAYsC,yCAZtC,GAYkF9B,SAAS8B,aAZ3F,GAY2G,OAZ3G,GAaH,aAbG,GAaa9B,SAAShV,QAbtB,GAaiC,oBAbjC,GAawDgV,SAAShV,QAbjE,GAa4E,OAb5E,GAcH,aAdG,GAcagV,SAAS+B,WAdtB,GAcoC,uCAdpC,GAc8E/B,SAAS+B,WAdvF,GAcqG,OAdrG,GAeH,aAfG,GAea/B,SAASgC,KAftB,GAe8B,qBAf9B,GAesDhC,SAASiC,SAf/D,GAe2E,OAf3E,GAgBH,MAhBG,GAiBHV,QAjBG,GAiBO,OAjBP,GAkBH,OAlBJ;AAmBH;AACJ;AACDhmB,iBAAK2kB,SAAL,CAAe5kB,IAAf,CAAoB,sBAApB,EAA4CN,MAA5C;AACAO,iBAAK2kB,SAAL,CAAe5kB,IAAf,CAAoB,OAApB,EAA6B0K,MAA7B,CAAoC9M,IAApC;AACAP,cAAE,0BAAF,EAA8BO,IAA9B,CAAmCmoB,aAAa,YAAb,CAAnC;AACA;AACA1oB,cAAE,6BAAF,EAAiCO,IAAjC,CAAsCmoB,aAAa,eAAb,CAAtC;AACA1oB,cAAE,yBAAF,EAA6BO,IAA7B,CAAkCmoB,aAAa,WAAb,CAAlC;AACA1oB,cAAE,0BAAF,EAA8BO,IAA9B,CAAmCmoB,aAAa,WAAb,CAAnC;AAEH,SArIiC;;AAuIlC;AACAV,qBAAa,UAAUrnB,IAAV,EAAgB;AACzB,gBAAI4oB,WAAW,KAAKC,YAAL,EAAf;AACA,gBAAID,SAASvoB,MAAT,IAAmB,CAAvB,EAA0B;AACtBmD,sBAAM,WAAN;AACA,uBAAO,KAAP;AACH;AACD,gBAAIslB,SAAS9oB,KAAKgN,MAAL,GAAcA,MAAd,EAAb;AACA,gBAAIqC,QAAQ,UAAR,CAAJ,EAAyB;AACrB,oBAAIgZ,QAAQS,OAAO9mB,IAAP,CAAY,qBAAZ,EAAmCE,GAAnC,EAAZ;AACA,oBAAI0K,OAAOkc,OAAO9mB,IAAP,CAAY,oBAAZ,EAAkCE,GAAlC,EAAX;AACA,qBAAK6mB,kBAAL,CAAwBV,QAAQ,GAAR,GAAczb,IAAtC,EAHqB,CAGwB;AAC7C,qBAAKkb,cAAL;AACH;AACJ,SArJiC;AAsJlCV,2BAAmB,UAAUhhB,UAAV,EAAsB;AACrC,gBAAI4iB,cAAc3pB,EAAE,kDAAF,CAAlB;AAAA,gBACI4b,MAAM5b,EAAE,wCAAF,CADV;AAEA,gBAAI2pB,YAAY3oB,MAAZ,IAAsB4a,IAAI5a,MAAJ,GAAa,CAAvC,EAA0C;AACtCmD,sBAAM,WAAN;AACH,aAFD,MAEO;AACH,oBAAIwlB,YAAY3oB,MAAZ,IAAsBgP,QAAQ,WAAR,CAA1B,EAAgD;AAC5C,yBAAK,IAAI7O,IAAI,CAAb,EAAgBA,IAAIwoB,YAAY3oB,MAAhC,EAAwCG,GAAxC,EAA6C;AACzC,4BAAI6nB,QAAQW,YAAY5jB,EAAZ,CAAe5E,CAAf,EAAkBsD,OAAlB,CAA0B,IAA1B,EAAgC9B,IAAhC,CAAqC,qBAArC,EAA4DE,GAA5D,EAAZ;AACA,4BAAI0K,OAAOoc,YAAY5jB,EAAZ,CAAe5E,CAAf,EAAkBsD,OAAlB,CAA0B,IAA1B,EAAgC9B,IAAhC,CAAqC,oBAArC,EAA2DE,GAA3D,EAAX;AACA,6BAAK6mB,kBAAL,CAAwBV,QAAQ,GAAR,GAAczb,IAAtC,EAHyC,CAGI;AAChD;AACD,yBAAKkb,cAAL;AACH;AACJ;AAEJ,SAtKiC;AAuKlC;AACAmB,kBAAU,UAAUC,iBAAV,EAA6B;AACnC,gBAAIjnB,OAAO,IAAX;AACA,gBAAIomB,QAAQa,kBAAkB,WAAlB,CAAZ;AACA,gBAAItc,OAAOsc,kBAAkB,MAAlB,CAAX;AACA;AACA,gBAAIC,WAAW9pB,EAAE,+BAAF,EAAmC2C,IAAnC,CAAwC,IAAxC,CAAf;AACA,iBAAK,IAAIxB,IAAI,CAAb,EAAgBA,IAAI2oB,SAAS9oB,MAA7B,EAAqCG,GAArC,EAA0C;AACtC,oBAAI4oB,UAAUD,SAAS/jB,EAAT,CAAY5E,CAAZ,CAAd;AACA,oBAAI4oB,QAAQpnB,IAAR,CAAa,gBAAb,EAA+BE,GAA/B,MAAwCmmB,KAAxC,IAAiDe,QAAQpnB,IAAR,CAAa,eAAb,EAA8BE,GAA9B,MAAuC0K,IAAxF,IAAgGwc,QAAQ7Y,QAAR,CAAiB,UAAjB,CAApG,EAAkI;AAC9H;AACH;AACJ;AACD,gBAAI8Y,aAAa;AACbhB,uBAAOa,kBAAkB,WAAlB,CADM;AAEbV,+BAAeU,kBAAkB,gBAAlB,EAAoCpX,OAApC,CAA4C,CAA5C,CAFF;AAGbyW,0BAAUW,kBAAkB,gBAAlB,EAAoCpX,OAApC,CAA4C,CAA5C,CAHG;AAIb6W,2BAAWO,kBAAkB,gBAAlB,EAAoCpX,OAApC,CAA4C,CAA5C,CAJE;AAKbJ,0BAAU,MALG;AAMb+W,6BAAa,CANA;AAObT,yBAASkB,kBAAkB,SAAlB,CAPI;AAQbf,wBAAQe,kBAAkB,MAAlB,CARK;AASbd,sBAAMc,kBAAkB,MAAlB,CATO;AAUbtc,sBAAMsc,kBAAkB,MAAlB,CAVO;AAWbhB,0BAAUgB,kBAAkB,UAAlB,CAXG;AAYbZ,6BAAaY,kBAAkB,aAAlB;AAZA,aAAjB;AAcA,gBAAI1C,oBAAoBE,QAApB,CAA6B2B,QAAQ,GAAR,GAAczb,IAA3C,CAAJ,EAAsD;AAClD+Z,kCAAkBzT,SAAlB,CAA4B6V,kBAA5B,CAA+CV,QAAQ,GAAR,GAAczb,IAA7D;AACH;AACD4Z,gCAAoBE,QAApB,CAA6B2B,QAAQ,GAAR,GAAczb,IAA3C,IAAmDyc,UAAnD;;AAEA7C,gCAAoBE,QAApB,CAA6B,YAA7B,IAA6C,CAACF,oBAAoBE,QAApB,CAA6B,YAA7B,IAA6C,CAA7C,GAAiD2C,WAAW,UAAX,IAAyBA,WAAW,aAAX,CAA3E,EAAsGvX,OAAtG,CAA8G,CAA9G,CAA7C;AACA0U,gCAAoBE,QAApB,CAA6B,WAA7B,IAA4C,CAACF,oBAAoBE,QAApB,CAA6B,WAA7B,IAA4C,CAA5C,GAAgD2C,WAAW,eAAX,IAA8BA,WAAW,aAAX,CAA/E,EAA0GvX,OAA1G,CAAkH,CAAlH,CAA5C;AACA0U,gCAAoBE,QAApB,CAA6B,eAA7B,IAAgD,CAACF,oBAAoBE,QAApB,CAA6B,YAA7B,IAA6CF,oBAAoBE,QAApB,CAA6B,WAA7B,CAA9C,EAAyF5U,OAAzF,CAAiG,CAAjG,CAAhD;AACH,SA1MiC;;AA4MlCiX,4BAAoB,UAAUV,KAAV,EAAiB;AACjC,gBAAIpmB,OAAO,IAAX;AACA,gBAAIqnB,iBAAiB9C,oBAAoBE,QAApB,CAA6B2B,KAA7B,CAArB;AACA,mBAAO7B,oBAAoBE,QAApB,CAA6B2B,KAA7B,CAAP;AACA7B,gCAAoBE,QAApB,CAA6B,YAA7B,IAA6C,CAACF,oBAAoBE,QAApB,CAA6B,YAA7B,IAA6C4C,eAAe,UAAf,IAA6BA,eAAe,aAAf,CAA3E,EAA0GxX,OAA1G,CAAkH,CAAlH,CAA7C;AACA0U,gCAAoBE,QAApB,CAA6B,WAA7B,IAA4C,CAACF,oBAAoBE,QAApB,CAA6B,WAA7B,IAA4C4C,eAAe,eAAf,IAAkCA,eAAe,aAAf,CAA/E,EAA8GxX,OAA9G,CAAsH,CAAtH,CAA5C;AACA0U,gCAAoBE,QAApB,CAA6B,eAA7B,IAAgD,CAACF,oBAAoBE,QAApB,CAA6B,YAA7B,IAA6CF,oBAAoBE,QAApB,CAA6B,WAA7B,CAA9C,EAAyF5U,OAAzF,CAAiG,CAAjG,CAAhD;AACH,SAnNiC;;AAqNlC;AACA+W,sBAAc,YAAY;AACtB,gBAAID,WAAW,EAAf;AACA,iBAAKhC,SAAL,CAAe5kB,IAAf,CAAoB,gBAApB,EAAsCzB,IAAtC,CAA2C,YAAY;AACnDqoB,yBAASvjB,IAAT,CAAchG,EAAE2O,IAAF,CAAO3O,EAAE,IAAF,EAAQ6C,GAAR,EAAP,CAAd;AACH,aAFD;AAGA,mBAAO0mB,QAAP;AACH,SA5NiC;;AA8NlC;AACA3B,2BAAmB,YAAY;AAC3B,gBAAIsC,cAAc,EAAlB;AACA,gBAAIlB,KAAJ,EAAWE,QAAX,EAAqBC,aAArB,EAAoCC,WAApC,EAAiDe,IAAjD,EAAuDpB,IAAvD,EAA6Dxb,IAA7D,EAAmE0b,WAAnE;AACA,gBAAImB,aAAa,CAAjB;AACA,gBAAId,YAAY,CAAhB;AACA,gBAAI1N,MAAM5b,EAAE,+BAAF,EAAmC2C,IAAnC,CAAwC,UAAxC,CAAV;AACAiZ,gBAAI1a,IAAJ,CAAS,YAAY;AACjB,oBAAImpB,YAAYrqB,EAAE2O,IAAF,CAAO3O,EAAE,IAAF,EAAQ2C,IAAR,CAAa,qBAAb,EAAoCE,GAApC,EAAP,CAAhB;AACA,oBAAIwnB,SAAJ,EAAe;AACX,wBAAIhD,WAAW,EAAf;AACA2B,4BAAQqB,SAAR;AACAnB,+BAAYlpB,EAAE2O,IAAF,CAAO3O,EAAE,IAAF,EAAQ2C,IAAR,CAAa,mBAAb,EAAkC0E,IAAlC,EAAP,CAAD,GAAqD,CAAhE;AACA8hB,oCAAiBnpB,EAAE2O,IAAF,CAAO3O,EAAE,IAAF,EAAQ2C,IAAR,CAAa,wBAAb,EAAuC0E,IAAvC,EAAP,CAAD,GAA0D,CAA1E;AACA+hB,kCAAeppB,EAAE2O,IAAF,CAAO3O,EAAE,IAAF,EAAQ2C,IAAR,CAAa,sBAAb,EAAqC0E,IAArC,EAAP,CAAD,GAAwD,CAAtE;AACA8iB,2BAAOnqB,EAAE2O,IAAF,CAAO3O,EAAE,IAAF,EAAQ2C,IAAR,CAAa,iBAAb,EAAgCE,GAAhC,EAAP,CAAP;AACAkmB,2BAAO/oB,EAAE2O,IAAF,CAAO3O,EAAE,IAAF,EAAQ2C,IAAR,CAAa,eAAb,EAA8BE,GAA9B,EAAP,CAAP;AACA0K,2BAAOvN,EAAE2O,IAAF,CAAO3O,EAAE,IAAF,EAAQ2C,IAAR,CAAa,eAAb,EAA8BE,GAA9B,EAAP,CAAP,CARW,CAQyC;AACpDomB,kCAAcjpB,EAAE2O,IAAF,CAAO3O,EAAE,IAAF,EAAQ2C,IAAR,CAAa,sBAAb,EAAqCE,GAArC,EAAP,CAAd;AACA,wBAAI,OAAO0K,IAAP,IAAe,WAAf,IAA8BA,QAAQ,EAA1C,EAA8C;AAC1CA,+BAAO,CAAP;AACH;;AAED8Z,6BAAS,OAAT,IAAoBgD,SAApB;AACAhD,6BAAS,SAAT,IAAuBrnB,EAAE2O,IAAF,CAAO3O,EAAE,IAAF,EAAQ2C,IAAR,CAAa,kBAAb,EAAiC0E,IAAjC,EAAP,CAAvB;AACAggB,6BAAS,UAAT,IAAuB6B,SAASzW,OAAT,CAAiB,CAAjB,CAAvB;AACA4U,6BAAS,eAAT,IAA4B8B,cAAc1W,OAAd,CAAsB,CAAtB,CAA5B;AACA4U,6BAAS,aAAT,IAA0B+B,WAA1B;AACA/B,6BAAS,UAAT,IAAuB,CAAC6B,WAAWC,aAAZ,EAA2B1W,OAA3B,CAAmC,CAAnC,CAAvB;AACA4U,6BAAS,OAAT,IAAoB,CAAC6B,WAAWE,WAAZ,EAAyB3W,OAAzB,CAAiC,CAAjC,CAApB;AACA4U,6BAAS,WAAT,IAAwB,CAAC8B,gBAAgBC,WAAjB,EAA8B3W,OAA9B,CAAsC,CAAtC,CAAxB;AACA4U,6BAAS,QAAT,IAAqB8C,IAArB;AACA9C,6BAAS,MAAT,IAAmB,OAAO0B,IAAP,IAAe,WAAf,GAA6B,EAA7B,GAAkCA,IAArD;AACA1B,6BAAS,MAAT,IAAmB9Z,IAAnB;AACA8Z,6BAAS,aAAT,IAA0B4B,WAA1B;AACA5B,6BAAS,UAAT,IAAuBrnB,EAAE,IAAF,EAAQkR,QAAR,CAAiB,UAAjB,CAAvB;;AAEAkZ,iCAAaA,aAAa5X,WAAW6U,SAAS,OAAT,CAAX,CAA1B;AACAiC,gCAAYA,YAAY9W,WAAW6U,SAAS,WAAT,CAAX,CAAxB;;AAEA6C,gCAAYlB,QAAQ,GAAR,GAAczb,IAA1B,IAAkC8Z,QAAlC;AACH;AACJ,aAnCD;AAoCA6C,wBAAY,YAAZ,IAA4BE,WAAW3X,OAAX,CAAmB,CAAnB,CAA5B;AACAyX,wBAAY,eAAZ,IAA+B,CAACE,aAAad,SAAd,EAAyB7W,OAAzB,CAAiC,CAAjC,CAA/B;AACAyX,wBAAY,WAAZ,IAA2BZ,UAAU7W,OAAV,CAAkB,CAAlB,CAA3B;;AAEA,mBAAOyX,WAAP;AACH,SA9QiC;;AAgRlC;AACArC,iBAAS,UAAUlnB,IAAV,EAAgB;AACrB,gBAAIsG,WAAWtG,KAAKgN,MAAL,GAAcA,MAAd,GAAuBhL,IAAvB,CAA4B,UAA5B,CAAf;AACAsE,qBAAS/F,IAAT,CAAc,YAAY;AACtB,oBAAIgG,QAAQlH,EAAE,IAAF,CAAZ;AACA,oBAAImH,SAAS,IAAb;AACA,oBAAIC,WAAW,OAAf;AACA,wBAAQA,QAAR;AACI,yBAAK,OAAL;AACID,iCAASD,MAAMG,IAAN,EAAT;AACAH,8BAAMjG,WAAN,CAAkB,SAAlB,EAA6BO,QAA7B,CAAsC,WAAtC,EAAmDjB,IAAnD,CAAwD,+BAA+B4G,MAA/B,GAAwC,IAAhG;AACA;AACJ;AACI;AANR;AAQH,aAZD;AAaAxG,iBAAKgN,MAAL,GAAcpN,IAAd,CAAmB,+EAAnB;AACH,SAjSiC;;AAmSlC;AACA0nB,8BAAsB,UAAUtnB,IAAV,EAAgB;AAClC,gBAAI2pB,QAAQ,IAAZ;AACA,gBAAIrjB,WAAWtG,KAAKgN,MAAL,GAAcA,MAAd,GAAuBhL,IAAvB,CAA4B,YAA5B,CAAf;;AAEA,gBAAIqmB,QAAQhpB,EAAE2O,IAAF,CAAOhO,KAAKgN,MAAL,GAAcA,MAAd,GAAuBhL,IAAvB,CAA4B,gBAA5B,EAA8CE,GAA9C,EAAP,CAAZ;AACA,gBAAIqX,QAAQla,EAAE2O,IAAF,CAAOhO,KAAKgN,MAAL,GAAcA,MAAd,GAAuBhL,IAAvB,CAA4B,wBAA5B,EAAsDmY,QAAtD,GAAiEjY,GAAjE,EAAP,IAAiF,CAA7F;AACA,gBAAI0P,MAAMvS,EAAE2O,IAAF,CAAOhO,KAAKgN,MAAL,GAAcA,MAAd,GAAuBhL,IAAvB,CAA4B,sBAA5B,EAAoDmY,QAApD,GAA+DjY,GAA/D,EAAP,IAA+E,CAAzF;;AAEA,gBAAI,CAACykB,kBAAkBzT,SAAlB,CAA4B0W,cAA5B,CAA2ChY,GAA3C,CAAL,EAAsD;AAClDpO,sBAAM,SAAN;AACA,uBAAO,KAAP;AACH;AACD,gBAAI,CAACmjB,kBAAkBzT,SAAlB,CAA4B2W,QAA5B,CAAqCtQ,KAArC,CAAL,EAAkD;AAC9C/V,sBAAM,SAAN;AACA,uBAAO,KAAP;AACH;AACD;AACA,gBAAInE,EAAE,aAAF,EAAiB6C,GAAjB,MAA0B,MAA9B,EAAsC;AAClCynB,sBAAMlC,aAAN,CAAoB,YAAY;AAC5BnhB,6BAAS/F,IAAT,CAAc,YAAY;AACtB,4BAAIgG,QAAQlH,EAAE,IAAF,CAAZ;AACA,4BAAI6H,UAAU7H,EAAE2O,IAAF,CAAQzH,MAAMvE,IAAN,CAAW,OAAX,EAAoBE,GAApB,EAAR,IAAsC,CAApD;AACA,4BAAIuE,WAAW,OAAf;AACA,gCAAQA,QAAR;AACI,iCAAK,OAAL;AACIF,sCAAM3G,IAAN,CAAWsH,OAAX,EAAoB5G,WAApB,CAAgC,WAAhC,EAA6CO,QAA7C,CAAsD,SAAtD;AACA;AACJ;AACI;AALR;AAOH,qBAXD;AAYAb,yBAAKgN,MAAL,GAAcpN,IAAd,CAAmB,8EAA8E,yEAAjG;AACA+mB,sCAAkBzT,SAAlB,CAA4B4W,yBAA5B;AACH,iBAfD;AAgBH,aAjBD,MAiBO;AACHxjB,yBAAS/F,IAAT,CAAc,YAAY;AACtB,wBAAIgG,QAAQlH,EAAE,IAAF,CAAZ;AACA,wBAAI6H,UAAU7H,EAAE2O,IAAF,CAAQzH,MAAMvE,IAAN,CAAW,OAAX,EAAoBE,GAApB,EAAR,IAAsC,CAApD;AACA,wBAAIuE,WAAW,OAAf;AACA,4BAAQA,QAAR;AACI,6BAAK,OAAL;AACIF,kCAAM3G,IAAN,CAAWsH,OAAX,EAAoB5G,WAApB,CAAgC,WAAhC,EAA6CO,QAA7C,CAAsD,SAAtD;AACA;AACJ;AACI;AALR;AAOH,iBAXD;AAYAb,qBAAKgN,MAAL,GAAcpN,IAAd,CAAmB,8EAA8E,yEAAjG;AACA+mB,kCAAkBzT,SAAlB,CAA4B4W,yBAA5B;AACH;AACJ,SAtViC;;AAwVlC;AACAF,wBAAgB,UAAUG,CAAV,EAAa;AACzB,gBAAIC,KAAK,qBAAT;AACA,mBAAOA,GAAGC,IAAH,CAAQF,CAAR,CAAP;AACH,SA5ViC;AA6VlC;AACAF,kBAAU,UAAUnB,KAAV,EAAiB;AACvB,gBAAIwB,IAAI,eAAR;AACA,mBAAOA,EAAED,IAAF,CAAOvB,KAAP,CAAP;AACH,SAjWiC;;AAmWlC;AACAoB,mCAA2B,YAAY;AACnC,gBAAIK,gBAAgBxD,kBAAkBzT,SAAlB,CAA4B+T,iBAA5B,EAApB;AACAT,gCAAoBE,QAApB,GAA+ByD,aAA/B;AACA;AACA,gBAAIlP,MAAM5b,EAAE,+BAAF,EAAmC2C,IAAnC,CAAwC,UAAxC,CAAV;AACAiZ,gBAAI1a,IAAJ,CAAS,YAAY;AACjB,oBAAImpB,YAAYrqB,EAAE2O,IAAF,CAAO3O,EAAE,IAAF,EAAQ2C,IAAR,CAAa,qBAAb,EAAoCE,GAApC,EAAP,CAAhB;AACA,oBAAI0K,OAAOvN,EAAE2O,IAAF,CAAO3O,EAAE,IAAF,EAAQ2C,IAAR,CAAa,oBAAb,EAAmCE,GAAnC,EAAP,CAAX;AACA,oBAAIwnB,SAAJ,EAAe;AACX,wBAAIU,YAAYD,cAAcT,YAAY,GAAZ,GAAkB9c,IAAhC,CAAhB;AACAvN,sBAAE,IAAF,EAAQ2C,IAAR,CAAa,0BAAb,EAAyCpC,IAAzC,CAA8CwqB,UAAU,eAAV,CAA9C;AACA/qB,sBAAE,IAAF,EAAQ2C,IAAR,CAAa,qBAAb,EAAoCpC,IAApC,CAAyCwqB,UAAU,UAAV,CAAzC;AACA/qB,sBAAE,IAAF,EAAQ2C,IAAR,CAAa,sBAAb,EAAqCpC,IAArC,CAA0CwqB,UAAU,WAAV,CAA1C;AACH;AACJ,aATD;AAUA;AACA/qB,cAAE,0BAAF,EAA8BO,IAA9B,CAAmCuqB,cAAc,YAAd,CAAnC;AACA;AACA9qB,cAAE,6BAAF,EAAiCO,IAAjC,CAAsCuqB,cAAc,eAAd,CAAtC;AACA9qB,cAAE,yBAAF,EAA6BO,IAA7B,CAAkCuqB,cAAc,WAAd,CAAlC;AACA9qB,cAAE,0BAAF,EAA8BO,IAA9B,CAAmCuqB,cAAc,WAAd,CAAnC;AACH,SAzXiC;;AA2XlC;AACAvC,2BAAmB,YAAY;AAC3B,gBAAIyC,gBAAgBhrB,EAAE,iCAAF,EAAqCO,IAArC,EAApB;AACAP,cAAE,QAAF,EAAYO,IAAZ,CAAiByqB,aAAjB,EAAgC5oB,IAAhC;AACH,SA/XiC;AAgYlC;AACA0lB,2BAAmB,UAAUZ,UAAV,EAAsB;AACrClnB,cAAEsN,IAAF,CAAO;AACHC,sBAAM,MADH;AAEHqZ,uBAAO,KAFJ;AAGH7iB,qBAAK,sCAHF;AAIHzD,sBAAM;AACF4mB,gCAAYA;AADV,iBAJH;AAOH9J,0BAAU,MAPP;AAQH3P,yBAAS,UAAUnN,IAAV,EAAgB;AACrBN,sBAAE,QAAF,EAAYO,IAAZ,CAAiBD,IAAjB,EAAuB8B,IAAvB;AACH,iBAVE;AAWHwL,uBAAO,YAAY;AACfzJ,0BAAM,gBAAN;AACH;AAbE,aAAP;AAeH,SAjZiC;;AAmZlC;AACA8mB,qBAAa,YAAY;AACrBjrB,cAAEsN,IAAF,CAAO;AACHC,sBAAM,MADH;AAEHqZ,uBAAO,KAFJ;AAGH7iB,qBAAK,uCAHF;AAIHzD,sBAAM,EAJH;AAKH8c,0BAAU,MALP;AAMH3P,yBAAS,UAAUnN,IAAV,EAAgB;AACrBN,sBAAE,yBAAF,EAA6BO,IAA7B,CAAkCD,IAAlC;AACH,iBARE;AASHsN,uBAAO,YAAY;AACfzJ,0BAAM,mBAAN;AACH;AAXE,aAAP;AAaH,SAlaiC;;AAoalC+mB,wBAAgB,YAAY;AACxB,gBAAIC,cAAcnrB,EAAE,+CAAF,CAAlB;AACA,gBAAImrB,WAAJ,EAAiB;AACb,oBAAInC,QAAQhpB,EAAE2O,IAAF,CAAOwc,YAAYtoB,GAAZ,EAAP,CAAZ;AACA,oBAAIqX,QAAQla,EAAE2O,IAAF,CAAOwc,YAAYxd,MAAZ,GAAqBsC,IAArB,GAA4BA,IAA5B,GAAmC5I,IAAnC,EAAP,CAAZ;AACA,oBAAI+jB,UAAUprB,EAAE2O,IAAF,CAAOwc,YAAYxd,MAAZ,GAAqBsC,IAArB,GAA4B5I,IAA5B,EAAP,CAAd;AACA,oBAAI8iB,OAAOnqB,EAAE2O,IAAF,CAAOwc,YAAYxd,MAAZ,GAAqBhL,IAArB,CAA0B,sBAA1B,EAAkDE,GAAlD,EAAP,CAAX;AACA,oBAAIkmB,OAAO/oB,EAAE2O,IAAF,CAAOwc,YAAYxd,MAAZ,GAAqBhL,IAArB,CAA0B,sBAA1B,EAAkDE,GAAlD,EAAP,CAAX;AACA,oBAAI0K,OAAOvN,EAAE2O,IAAF,CAAOwc,YAAYxd,MAAZ,GAAqBhL,IAArB,CAA0B,sBAA1B,EAAkDE,GAAlD,EAAP,CAAX;AACA,oBAAI,OAAO0K,IAAP,IAAe,WAAf,IAA8BA,QAAQ,EAA1C,EAA8C;AAC1CA,2BAAO,CAAP;AACH;AACD,oBAAI0b,cAAckC,YAAYxd,MAAZ,GAAqBhL,IAArB,CAA0B,6BAA1B,EAAyDE,GAAzD,EAAlB;AACA,oBAAIgmB,WAAW7oB,EAAE,kBAAkBgpB,KAAlB,GAA0B,IAA5B,EAAkCvkB,OAAlC,CAA0C,IAA1C,EAAgDyM,QAAhD,CAAyD,UAAzD,CAAf,CAXa,CAWwE;AACrFiW,oCAAoBC,oBAApB,GAA2C;AACvCiD,+BAAWrB,KAD4B;AAEvC7O,oCAAgBD,QAAQ,CAFe;AAGvCmR,6BAASD,OAH8B;AAIvCjB,0BAAMA,IAJiC;AAKvCpB,0BAAM,OAAOA,IAAP,IAAe,WAAf,GAA6B,EAA7B,GAAkCA,IALD;AAMvCxb,0BAAMA,IANiC,EAM3B;AACZsb,8BAAUA,QAP6B;AAQvCI,iCAAaA;AAR0B,iBAA3C;AAUH;AACJ,SA7biC;;AA+blC;AACAd,oCAA4B,YAAY;AACpC,gBAAImD,QAAQ,KAAK/D,SAAL,CAAe5kB,IAAf,CAAoB,OAApB,CAAZ;AACA2kB,8BAAkBzT,SAAlB,CAA4BqX,cAA5B;AACA,gBAAI,CAAC/D,oBAAoBC,oBAAzB,EAA+C;AAC3CjjB,sBAAM,OAAN;AACA;AACH;AACD,gBAAIgjB,oBAAoBC,oBAApB,CAAyC,gBAAzC,KAA8D,CAAlE,EAAqE;AACjEjjB,sBAAM,QAAN;AACA;AACH;AACD,gBAAIgjB,oBAAoBC,oBAApB,CAAyC,aAAzC,KAA2D,MAA/D,EAAuE;AACnEjjB,sBAAM,gBAAN;AACA;AACH;;AAED,iBAAKylB,QAAL,CAAczC,oBAAoBC,oBAAlC;;AAEA,iBAAKqB,cAAL;AACAzoB,cAAE,QAAF,EAAYC,IAAZ;AACH,SApdiC;;AAsdlC;AACAmoB,uBAAe,UAAUmD,QAAV,EAAoB;AAC/B,gBAAI3P,MAAM,KAAK2L,SAAL,CAAe5kB,IAAf,CAAoB,UAApB,CAAV;AACA,gBAAImoB,gBAAgBxD,kBAAkBzT,SAAlB,CAA4B+T,iBAA5B,EAApB;AACA,gBAAIwC,aAAaU,cAAc,YAAd,CAAjB;AACA,gBAAIU,gBAAgBV,cAAc,eAAd,CAApB;AACA,gBAAIxB,YAAYwB,cAAc,WAAd,CAAhB;AACA,gBAAIV,aAAa,CAAb,IAAkB,YAAlB,IAAkCoB,gBAAgB,CAAhB,IAAqB,YAAvD,IAAuElC,YAAY,CAAZ,IAAiB,YAA5F,EAA0G;AACtGnlB,sBAAM,kBAAN;AACA,uBAAO,KAAP;AACH;;AAED,gBAAIsnB,oBAAoB,EAAxB;AACA7P,gBAAI1a,IAAJ,CAAS,YAAY;AACjB,oBAAImpB,YAAYrqB,EAAE,IAAF,EAAQ2C,IAAR,CAAa,qBAAb,EAAoCE,GAApC,EAAhB;AACA,oBAAIwnB,SAAJ,EAAe;AACX,wBAAIqB,mBAAmB,EAAvB;AACA,wBAAIvC,gBAAgBnpB,EAAE,IAAF,EAAQ2C,IAAR,CAAa,wBAAb,EAAuCuO,QAAvC,CAAgD,WAAhD,IAA+DlR,EAAE,IAAF,EAAQ2C,IAAR,CAAa,wBAAb,EAAuCmY,QAAvC,GAAkDjY,GAAlD,EAA/D,GAAyH7C,EAAE,IAAF,EAAQ2C,IAAR,CAAa,wBAAb,EAAuC0E,IAAvC,EAA7I;AACA,wBAAI+hB,cAAcppB,EAAE,IAAF,EAAQ2C,IAAR,CAAa,sBAAb,EAAqCuO,QAArC,CAA8C,WAA9C,IAA6DlR,EAAE,IAAF,EAAQ2C,IAAR,CAAa,sBAAb,EAAqCmY,QAArC,GAAgDjY,GAAhD,EAA7D,GAAqH7C,EAAE,IAAF,EAAQ2C,IAAR,CAAa,sBAAb,EAAqC0E,IAArC,EAAvI;AACA,wBAAIyhB,SAAS9oB,EAAE,IAAF,EAAQ2C,IAAR,CAAa,iBAAb,EAAgCE,GAAhC,EAAb;;AAEA6oB,qCAAiB,WAAjB,IAAgCrB,SAAhC;AACAqB,qCAAiB,eAAjB,IAAoCvC,aAApC;AACAuC,qCAAiB,aAAjB,IAAkCtC,WAAlC;AACAsC,qCAAiB,QAAjB,IAA6B5C,MAA7B;;AAEA2C,sCAAkBzlB,IAAlB,CAAuB0lB,gBAAvB;AACH;AACJ,aAfD;;AAiBA;AACA,gBAAIxE,aAAalnB,EAAE2O,IAAF,CAAO3O,EAAE,yBAAF,EAA6B6C,GAA7B,EAAP,CAAjB;AACA7C,cAAEsN,IAAF,CAAO;AACHC,sBAAM,MADH;AAEHqZ,uBAAO,KAFJ;AAGH+E,6BAAa,IAHV;AAIH;AACA5nB,qBAAK,yCALF;AAMHzD,sBAAM;AACF4mB,gCAAYA,UADV;AAEF0E,+BAAW1b,KAAKC,SAAL,CAAesb,iBAAf;AAFT,iBANH;AAUHrO,0BAAU,MAVP;AAWHyO,uBAAO,KAXJ;AAYHpe,yBAAS,UAAUnN,IAAV,EAAgB;AACrB,wBAAIA,KAAKmN,OAAL,IAAgB,IAApB,EAA0B;AACtB;AACA;AACA8d;AACA;AACH,qBALD,MAKO;AACHpnB,8BAAM7D,KAAKuE,GAAX;AACH;AACJ,iBArBE;AAsBH+I,uBAAO,YAAY;AACfzJ,0BAAM,qBAAN;AACH;AAxBE,aAAP;AA2BH,SAjhBiC;;AAqhBlCkkB,2BAAmB,UAAUyD,YAAV,EAAwB;AACvC;AACA;AACA,gBAAIlpB,OAAO,IAAX;AACA;AACA,gBAAIA,KAAK2kB,SAAL,CAAe5kB,IAAf,CAAoB,kCAApB,EAAwD3B,MAA5D,EAAoE;AAChEmD,sBAAM,mBAAN;AACA;AACH;AACD,gBAAIyX,MAAM5b,EAAE,+BAAF,EAAmC2C,IAAnC,CAAwC,UAAxC,CAAV;AACA,gBAAImoB,gBAAgBxD,kBAAkBzT,SAAlB,CAA4B+T,iBAA5B,EAApB;AACA,gBAAIwC,aAAaU,cAAc,YAAd,CAAjB;AACA,gBAAIU,gBAAgBV,cAAc,eAAd,CAApB;AACA,gBAAIxB,YAAYwB,cAAc,WAAd,CAAhB;AACA,gBAAIV,aAAa,CAAb,IAAkB,YAAlB,IAAkCoB,gBAAgB,CAAhB,IAAqB,YAAvD,IAAuElC,YAAY,CAAZ,IAAiB,YAA5F,EAA0G;AACtGnlB,sBAAM,kBAAN;AACA;AACH;;AAED,gBAAIsnB,oBAAoB,EAAxB;AACA,gBAAIM,iBAAiB,EAArB;AACAnQ,gBAAI1a,IAAJ,CAAS,YAAY;AACjB,oBAAImpB,YAAYrqB,EAAE,IAAF,EAAQ2C,IAAR,CAAa,qBAAb,EAAoCE,GAApC,EAAhB;AACA,oBAAIwnB,SAAJ,EAAe;AACX,wBAAIqB,mBAAmB,EAAvB;AACA,wBAAIvC,gBAAgBnpB,EAAE,IAAF,EAAQ2C,IAAR,CAAa,wBAAb,EAAuC0E,IAAvC,EAApB;AACA,wBAAI+hB,cAAcppB,EAAE,IAAF,EAAQ2C,IAAR,CAAa,sBAAb,EAAqC0E,IAArC,EAAlB;AACA,wBAAIyhB,SAAS9oB,EAAE,IAAF,EAAQ2C,IAAR,CAAa,iBAAb,EAAgCE,GAAhC,EAAb;AACA,wBAAImpB,OAAOhsB,EAAE,IAAF,EAAQ2C,IAAR,CAAa,eAAb,EAA8BE,GAA9B,EAAX;AACA,wBAAI0K,OAAOvN,EAAE,IAAF,EAAQ2C,IAAR,CAAa,eAAb,EAA8BE,GAA9B,EAAX;AACA,wBAAIomB,cAAcjpB,EAAE,IAAF,EAAQ2C,IAAR,CAAa,sBAAb,EAAqCE,GAArC,EAAlB;AACA,wBAAI8lB,UAAU3oB,EAAE2O,IAAF,CAAO3O,EAAE,IAAF,EAAQ2C,IAAR,CAAa,uBAAb,EAAsCE,GAAtC,EAAP,CAAd;;AAEA6oB,qCAAiB,WAAjB,IAAgCrB,SAAhC;AACAqB,qCAAiB,eAAjB,IAAoCvC,aAApC;AACAuC,qCAAiB,aAAjB,IAAkCtC,WAAlC;AACAsC,qCAAiB,QAAjB,IAA6B5C,MAA7B;AACA4C,qCAAiB,MAAjB,IAA2BM,IAA3B;AACAN,qCAAiB,MAAjB,IAA2Bne,IAA3B;AACAme,qCAAiB,SAAjB,IAA8B/C,OAA9B;;AAEA8C,sCAAkBzlB,IAAlB,CAAuB0lB,gBAAvB;;AAEA,wBAAIzC,eAAe,MAAnB,EAA2B;AACvB8C,uCAAe/lB,IAAf,CAAoB2iB,OAApB;AACH;AACJ;AACJ,aA1BD;;AA4BA,gBAAIoD,eAAe/qB,MAAnB,EAA2B;AACvBmD,sBAAM4nB,eAAe9lB,IAAf,CAAoB,GAApB,IAA2B,kBAAjC;AACA;AACH;;AAED,gBAAIihB,aAAalnB,EAAE2O,IAAF,CAAO3O,EAAE,yBAAF,EAA6B6C,GAA7B,EAAP,CAAjB;AACA7C,cAAEsN,IAAF,CAAO;AACHC,sBAAM,MADH;AAEHqZ,uBAAO,KAFJ;AAGH+E,6BAAa,IAHV;AAIH5nB,qBAAK,8CAJF;AAKHzD,sBAAM;AACF4mB,gCAAYA,UADV;AAEF0E,+BAAW1b,KAAKC,SAAL,CAAesb,iBAAf,CAFT;AAGFzb,6BAAS8b;AAHP,iBALH;AAUH1O,0BAAU,MAVP;AAWH3P,yBAAS,UAAUnN,IAAV,EAAgB;AACrB,wBAAIA,KAAKmN,OAAL,IAAgB,IAApB,EAA0B;AACtBtJ,8BAAM,MAAN;AACAP,+BAAOC,QAAP,CAAgBa,MAAhB;AACH,qBAHD,MAGO;AACH,4BAAI,OAAOpE,KAAK2rB,aAAZ,KAA8B,WAA9B,IAA6C3rB,KAAK2rB,aAAtD,EAAqE;AACjE,gCAAIpb,IAAIb,QAAQ1P,KAAKuE,GAAb,CAAR;AACA,gCAAIgM,CAAJ,EAAO;AACHjO,qCAAKylB,iBAAL,CAAuB,CAAvB;AACH;AACJ,yBALD,MAKO;AACHlkB,kCAAM7D,KAAKuE,GAAX;AACH;AACJ;AACJ,iBAzBE;AA0BH+I,uBAAO,UAAUiD,CAAV,EAAa;AAChB1M,0BAAM,YAAN;AACH;AA5BE,aAAP;AA+BH,SA3mBiC;;AA6mBlC;AACAmkB,uBAAe,UAAUwD,YAAV,EAAwB;AACnC;AACA,gBAAIlpB,OAAO,IAAX;AACA,gBAAIskB,aAAalnB,EAAE2O,IAAF,CAAO3O,EAAE,wBAAF,EAA4B6C,GAA5B,EAAP,CAAjB;;AAEA7C,cAAEsN,IAAF,CAAO;AACHC,sBAAM,MADH;AAEHqZ,uBAAO,KAFJ;AAGH+E,6BAAa,IAHV;AAIH5nB,qBAAK,0CAJF;AAKHzD,sBAAM;AACF4mB,gCAAYA,UADV;AAEFlX,6BAAS8b;AAFP,iBALH;AASH1O,0BAAU,MATP;AAUH3P,yBAAS,UAAUnN,IAAV,EAAgB;AACrB,wBAAIA,KAAKmN,OAAL,IAAgB,IAApB,EAA0B;AACtBtJ,8BAAM,MAAN;AACAP,+BAAOC,QAAP,CAAgBa,MAAhB;AACH,qBAHD,MAGO;AACH,4BAAI,OAAOpE,KAAK2rB,aAAZ,KAA8B,WAA9B,IAA6C3rB,KAAK2rB,aAAtD,EAAqE;AACjE,gCAAIpb,IAAIb,QAAQ,UAAU1P,KAAKuE,GAAvB,CAAR;AACA,gCAAIgM,CAAJ,EAAO;AACHjO,qCAAK0lB,aAAL,CAAmB,CAAnB;AACH;AACJ,yBALD,MAKO;AACHnkB,kCAAM,UAAU7D,KAAKuE,GAArB;AACH;AACJ;AACJ,iBAxBE;AAyBH+I,uBAAO,YAAY;AACfzJ,0BAAM,YAAN;AACH;AA3BE,aAAP;AA6BH,SAhpBiC;;AAkpBlCqkB,sBAAc,YAAY;AACtB,gBAAI0D,WAAWlsB,EAAE,QAAF,EAAY2C,IAAZ,CAAiB,+BAAjB,CAAf;AACA,gBAAIwpB,UAAUnsB,EAAE2O,IAAF,CAAOud,SAASrpB,GAAT,EAAP,CAAd;AACA,gBAAIspB,QAAQnrB,MAAR,IAAkB,CAAtB,EAAyB;AACrBkrB,yBAAS1qB,QAAT,CAAkB,OAAlB;AACA;AACH;AACD,gBAAI0lB,aAAalnB,EAAE2O,IAAF,CAAO3O,EAAE,0BAAF,EAA8BY,IAA9B,CAAmC,kBAAnC,CAAP,CAAjB;AACAZ,cAAEsN,IAAF,CAAO;AACHC,sBAAM,MADH;AAEHqZ,uBAAO,KAFJ;AAGH+E,6BAAa,IAHV;AAIH5nB,qBAAK,yCAJF;AAKHzD,sBAAM;AACF4mB,gCAAYA,UADV;AAEFiF,6BAASA;AAFP,iBALH;AASH/O,0BAAU,MATP;AAUH3P,yBAAS,UAAUnN,IAAV,EAAgB;AACrB,wBAAIA,KAAKmN,OAAL,IAAgB,IAApB,EAA0B;AACtBtJ,8BAAM,MAAN;AACAP,+BAAOC,QAAP,CAAgBa,MAAhB;AACH,qBAHD,MAGO;AACHP,8BAAM,OAAN;AACH;AACJ,iBAjBE;AAkBHyJ,uBAAO,YAAY;AACfzJ,0BAAM,YAAN;AACH;AApBE,aAAP;AAsBH,SAhrBiC;;AAkrBlCO,gBAAQ,YAAY;AAChB,iBAAKkP,KAAL;AACH;AAprBiC,KAAtC;;AAwrBA;;;AAGA,QAAI,CAACT,EAAEmU,iBAAP,EAA0B;AACtBnU,UAAEmU,iBAAF,GAAsB,YAAY;AAC9B,gBAAIA,iBAAJ,CAAsB;AAClB3mB,sBAAMX,EAAE,eAAF;AADY,aAAtB;AAGH,SAJD;AAKH;;AAED;;;AAGAA,MAAE,YAAY;AACVmT,UAAEmU,iBAAF;AACH,KAFD;AAIH,CAjuBD,EAiuBG1jB,MAjuBH,EAiuBW4b,MAjuBX;;AAmuBA;;;AAGA,CAAC,UAAUrM,CAAV,EAAanT,CAAb,EAAgB;AACb,aAASosB,eAAT,CAAyB/Y,IAAzB,EAA+B;AAC3B;;;;AAIA,YAAIC,cAAc;AACd3S,kBAAM;AADQ,SAAlB;AAGA;;;AAGA,aAAKA,IAAL,GAAY0S,KAAK1S,IAAjB;;AAEA;;;AAGA,aAAK0S,IAAL,GAAYrT,EAAE0Q,MAAF,CAAS2C,IAAT,CAAZ;;AAEA,aAAKO,KAAL;AACH;;AAGD5T,MAAE0Q,MAAF,CAAS0b,gBAAgBvY,SAAzB,EAAoC;AAChC;;;;AAIAD,eAAO,YAAY;AACf,gBAAIhR,OAAO,IAAX;;AAEAA,iBAAKypB,SAAL,GAAiBrsB,EAAE,+BAAF,CAAjB;AACA4C,iBAAK0pB,cAAL,GAAsBtsB,EAAE,4BAAF,CAAtB;AACA4C,iBAAK2pB,SAAL,GAAiBvsB,EAAE,4BAAF,CAAjB;;AAEA4C,iBAAKoR,SAAL;AACH,SAb+B;;AAehC;;;;AAIAA,mBAAW,YAAY;AACnB,gBAAIpR,OAAO,IAAX;;AAEAA,iBAAKypB,SAAL,CAAerpB,EAAf,CAAkB,OAAlB,EAA2B,YAAY;AACnCJ,qBAAK4pB,mBAAL;AACH,aAFD;AAGA5pB,iBAAK0pB,cAAL,CAAoBtpB,EAApB,CAAuB,OAAvB,EAAgC,YAAY;AACxCJ,qBAAK6pB,gBAAL;AACH,aAFD;AAGA7pB,iBAAK2pB,SAAL,CAAevpB,EAAf,CAAkB,OAAlB,EAA2B,YAAY;AACnCJ,qBAAK8pB,gBAAL;AACH,aAFD;AAIH,SAhC+B;AAiChC;AACAF,6BAAqB,YAAY;AAC7B,gBAAIG,QAAQP,gBAAgBvY,SAAhB,CAA0B+Y,eAA1B,EAAZ;AACA5sB,cAAEsN,IAAF,CAAO;AACHC,sBAAM,MADH;AAEHqZ,uBAAO,KAFJ;AAGH7iB,qBAAK,kCAHF;AAIHzD,sBAAMqsB,KAJH;AAKHvP,0BAAU,MALP;AAMH3P,yBAAS,UAAUnN,IAAV,EAAgB;AACrB,wBAAIA,IAAJ,EAAU;AACNN,0BAAE,4BAAF,EAAgCO,IAAhC,CAAqCD,IAArC;AACH;AACJ,iBAVE;AAWHsN,uBAAO,YAAY;AACfzJ,0BAAM,iBAAN;AACH;AAbE,aAAP;AAeH,SAnD+B;AAoDhC;AACAsoB,0BAAkB,YAAY;AAC1B,gBAAIE,QAAQP,gBAAgBvY,SAAhB,CAA0B+Y,eAA1B,EAAZ;AACA5sB,cAAEsN,IAAF,CAAO;AACHC,sBAAM,MADH;AAEHqZ,uBAAO,KAFJ;AAGH7iB,qBAAK,uCAHF;AAIHzD,sBAAMqsB,KAJH;AAKHvP,0BAAU,MALP;AAMH3P,yBAAS,UAAUnN,IAAV,EAAgB;AACrB,wBAAIA,IAAJ,EAAU;AACNN,0BAAE,mBAAF,EAAuBO,IAAvB,CAA4BD,IAA5B;AACH;AACJ,iBAVE;AAWHsN,uBAAO,YAAY;AACfzJ,0BAAM,gBAAN;AACH;AAbE,aAAP;AAeH,SAtE+B;;AAwEhCyoB,yBAAiB,YAAY;AACzB,gBAAI5nB,aAAahF,EAAE,yBAAF,CAAjB;AACA,gBAAI0C,WAAW,EAAf;AACA;AACAsC,uBAAWrC,IAAX,CAAgB,OAAhB,EAAyBzB,IAAzB,CAA8B,YAAY;AACtC,oBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA,oBAAI4C,KAAKC,GAAL,EAAJ,EAAgB;AACZ,wBAAIC,YAAYF,KAAKhC,IAAL,CAAU,MAAV,CAAhB;AACA,wBAAImC,YAAY/C,EAAE2O,IAAF,CAAO/L,KAAKC,GAAL,EAAP,CAAhB;AACAH,6BAASI,SAAT,IAAsBC,SAAtB;AACH;AACJ,aAPD;AAQA;AACAiC,uBAAWrC,IAAX,CAAgB,QAAhB,EAA0BzB,IAA1B,CAA+B,YAAY;AACvC,oBAAImP,SAASrQ,EAAE,IAAF,CAAb;AACA,oBAAI8C,YAAYuN,OAAOzP,IAAP,CAAY,MAAZ,CAAhB;AACAyP,uBAAO1N,IAAP,CAAY,iBAAZ,EAA+BzB,IAA/B,CAAoC,YAAY;AAC5C,wBAAI0B,OAAO5C,EAAE,IAAF,CAAX;AACA,wBAAI4C,KAAKC,GAAL,EAAJ,EAAgB;AACZH,iCAASI,SAAT,IAAsBF,KAAKC,GAAL,EAAtB;AACH;AACJ,iBALD;AAMH,aATD;AAUA,mBAAOH,QAAP;AACH,SAhG+B;;AAkGhC;AACAgqB,0BAAkB,YAAY;AAC1B,gBAAIC,QAAQP,gBAAgBvY,SAAhB,CAA0B+Y,eAA1B,EAAZ;AACAD,kBAAM,MAAN,IAAgB,KAAKJ,SAAL,CAAe3rB,IAAf,CAAoB,MAApB,CAAhB;;AAEA,gBAAIisB,OAAO7sB,EAAE,QAAF,CAAX,CAJ0B,CAIF;;AAExB6sB,iBAAKjsB,IAAL,CAAU,OAAV,EAAmB,cAAnB;AACAisB,iBAAKjsB,IAAL,CAAU,QAAV,EAAoB,EAApB;AACAisB,iBAAKjsB,IAAL,CAAU,QAAV,EAAoB,MAApB;AACAisB,iBAAKjsB,IAAL,CAAU,QAAV,EAAoB,yCAApB;AACA;AACA,iBAAK,IAAIksB,QAAT,IAAqBH,KAArB,EAA4B;AACxB,oBAAI,CAACA,MAAMI,cAAN,CAAqB5rB,CAArB,CAAL,EAA8B;AAC1B,wBAAI6e,QAAQhgB,EAAE,SAAF,CAAZ;AACAggB,0BAAMpf,IAAN,CAAW,MAAX,EAAmB,QAAnB;AACAof,0BAAMpf,IAAN,CAAW,MAAX,EAAmBksB,QAAnB;AACA9M,0BAAMpf,IAAN,CAAW,OAAX,EAAoB+rB,MAAMG,QAAN,CAApB;AACAD,yBAAKxf,MAAL,CAAY2S,KAAZ;AACH;AACJ;;AAEDhgB,cAAE,MAAF,EAAUqN,MAAV,CAAiBwf,IAAjB,EArB0B,CAqBF;AACxBA,iBAAKvb,MAAL,GAtB0B,CAsBX;AAClB,SA1H+B;;AA4HhC5M,gBAAQ,YAAY;AAChB,iBAAKkP,KAAL;AACH;AA9H+B,KAApC;;AAkIA;;;AAGA,QAAI,CAACT,EAAEiZ,eAAP,EAAwB;AACpBjZ,UAAEiZ,eAAF,GAAoB,YAAY;AAC5B,gBAAIA,eAAJ,CAAoB;AAChBzrB,sBAAMX,EAAE,eAAF;AADU,aAApB;AAGH,SAJD;AAKH;;AAED;;;AAGAA,MAAE,YAAY;AACVmT,UAAEiZ,eAAF;AACH,KAFD;AAIH,CA3KD,EA2KGxoB,MA3KH,EA2KW4b,MA3KX","file":"main.js","sourcesContent":["/**\n * Created by cdxiaqing1 on 2015/12/23.\n */\n/**\n * Created by cdxiaqing1 on 2015/9/1.\n * common ajax\n */\n\n$(function () {\n    $('input[name=\"customerCode\"]').hide();\n    /**\n     * 请求ajax地址\n     */\n    var urls = {\n        //地区级联\n        areaUrl: '/area/list.htm'\n    };\n    /**\n     * ajax回调函数\n     */\n    var callbacks = {\n        //搜索回调\n        searchCallback: function (data) {\n            $('.data-return').html(data);\n        },\n        //地区选择回调\n        areaCallback: function (data) {\n            var city_json = {};\n            var temp_html = '<option selected disabled value=\\'\\' class=\\'hide\\'>--请选择--</option>';\n            var node = $(this).attr('class') == 'prov' ? $('.city') : $('.dist');\n            if (data.result == true) {\n                city_json = data.messages.arealist;\n                if (city_json && city_json.length > 0) {\n                    node.removeClass('hide');\n                    $.each(city_json, function (i, obj) {\n                        temp_html += '<option value=' + obj.areaName + ' data-area-id=' + obj.areaId + ' data-level=' + obj.level + '>' + obj.areaName + '</option>';\n                    });\n                    node.html(temp_html);\n                } else {\n                    node.addClass('hide');\n\n                }\n            }\n        }\n\n    };\n    //门店限制\n\n    var shopInfo = {\n\n        init: function () {\n            this.btn = $('.show_btn');\n            this.shopInfoTd = $('.line_permit');\n            this.tdLineHeighgt = this.shopInfoTd.css('lineHeight');\n            this.tdHeighgt = this.shopInfoTd.height();\n            this.tdHeighgt_4 = parseInt(this.tdLineHeighgt) * 4;\n            this.styleShowType = false;\n            if (parseInt(this.tdHeighgt) > parseInt(this.tdHeighgt_4)) {\n                this.shopInfoTd.css('height', '100px');\n                this.btn.show();\n            } else {\n                this.shopInfoTd.css('height', 'auto');\n                this.btn.remove();\n            }\n        },\n        buttonBind: function () {\n            var _this = this;\n            this.btn.click(function () {\n                _this.shopInfoTd.css({\n                    'height': 'auto'\n                });\n                _this.btn.remove();\n\n            })\n        }\n    }\n\n    /**\n     * 搜索数据拼装\n     */\n    var indexRankFn = function (node) {\n        var userJson = {};\n        node.find('input').each(function () {\n            var self = $(this);\n            if (self.val()) {\n                var searchKey = $(this).attr('name');\n                var searchVal = $(this).val();\n                userJson[searchKey] = searchVal;\n            }\n        });\n        return userJson;\n    };\n\n    /**\n     *\n     * 配置地区级联，一页只能有一个地区级联选项，若有多个，使用ID进行配置\n     * 使用格式\n     * <div class=\"address_select inline\">\n     *     <select class=\"prov\" name=\"prov\"></select>\n     *     <select class=\"city\" name=\"city\"></select>\n     *     <select class=\"dist\" name=\"dist\"></select>\n     * </div>\n     */\n    $('.prov').on('change', function () {\n        var self = $(this);\n        $('.city').addClass('hide');\n        $('.dist').addClass('hide');\n        var id = $(this).find('option:selected').attr('data-area-id');\n        var level = parseInt($(this).find('option:selected').attr('data-level')) + 1;\n        userJson = {\n            parentId: id,\n            level: level\n        };\n        self.packajax({\n            ajax_url: urls.areaUrl,\n            user: userJson,\n            succ: function (data) {\n                callbacks.areaCallback.call(self, data)\n            }\n\n        });\n    });\n    $('.city').on('change', function () {\n        $('.dist').addClass('hide');\n        var id = $(this).find('option:selected').attr('data-area-id');\n        var level = parseInt($(this).find('option:selected').attr('data-level')) + 1;\n        userJson = {\n            id: id,\n            level: level\n        };\n        $(this).packajax({\n            ajax_url: urls.areaUrl,\n            user: userJson,\n            succ: function (data) {\n                callbacks.areaCallback.call(self, data)\n            }\n        });\n    });\n\n    shopInfo.init();\n    shopInfo.buttonBind();\n\n});\n\n\n\n/**\n * Created by cdxiaqing1 on 2015/12/23.\n */\n$(function () {\n    /**\n     * 请求ajax地址\n     */\n    var urls = {\n        JAVASCRIPT: 'javascript:;',\n        //运营-批量导出\n        exportMerchantDateUrl: '/purchase/merchant/exportData.htm',\n        merchantPurchaseQueryUrl: '/purchase/merchant/query.htm'\n\n    };\n    /**\n     * ajax回调函数\n     */\n    var callbacks = {\n        //入驻提交信息回调\n        userInfoCallback: function (data) {\n            if (data.result) {\n                window.location.href = data.messages.url;\n            } else {\n                console.log(data.messages);\n            }\n        },\n        //个人信息提交信息回调\n        venderInfoCallback: function (data) {\n            if (data.result) {\n                alert('保存成功')\n            } else {\n                alert('保存失败')\n            }\n        },\n        //搜索回调\n        searchCallback: function (data) {\n            $('.data-return').html(data);\n        },\n        //data-return被占用时的回调\n        forDataCallback: function (data) {\n            $('.data-return-dup').html(data);\n        },\n        //触发弹窗\n        showPopupCallback: function (data) {\n            $('.popup').html(data.messages.popup).show();\n        },\n        //首次触发弹窗回调确定后刷新页面\n        onPopupReload: function (data) {\n            var self = $(this);\n            if (data.result) {\n                var thisPopup = self.parents('.popup');\n                thisPopup.hide();\n                window.location.reload();\n            }\n        },\n        // 二次触发弹窗回调 1为点击确定后刷新页面的回调函数\n        onPopupCallback1: function (data) {\n            var self = $(this);\n            if (data.result) {\n                //更新弹窗内容\n                var thisPopup = self.parents('.popup');\n                thisPopup.html(data.messages.popup);\n                thisPopup.delegate('.med2btn', 'click', function () {\n                    thisPopup.hide();\n                    window.location.reload();\n                });\n            } else {\n                var thisPopup = self.parents('.popup');\n                thisPopup.html(data.messages.popup);\n                thisPopup.delegate('.med2btn', 'click', function () {\n                    thisPopup.hide();\n                    window.location.reload();\n                });\n                console.log(data.messages.msg);\n            }\n        },\n        // 二次触发弹窗回调 2为点击确定后跳转返回url的回调函数\n        onPopupCallback2: function (data) {\n            var self = $(this);\n            if (data.result) {\n                //更新弹窗内容\n                var thisPopup = self.parents('.popup');\n                thisPopup.html(data.messages.popup);\n                thisPopup.delegate('.med2btn', 'click', function () {\n                    thisPopup.hide();\n                    window.location.href = data.messages, url;\n                });\n            } else {\n                console.log(data.messages.msg);\n            }\n        }\n\n\n\n    };\n\n\n    /**\n     * 搜索数据拼装\n     * orderState：tab_card状态数据\n     * userJson:ajaxUpload接收数据，obj\n     */\n    var searchKeyFn = function (node) {\n        var searchItem = node.parents('.wrapper').find('.filter_search');\n        var tabItem = searchItem.parents('.wrapper').find('.tab_card');\n        //var userJson={};\n        //var state = tabItem.attr('name');\n        //var sValue = tabItem.find('.current').attr('value');\n        ////写入tab card数据\n        //userJson[state]=sValue;\n        //写入input数据\n        searchItem.find('input').each(function () {\n            var self = $(this);\n            if (self.val()) {\n                var searchKey = self.attr('name');\n                var searchVal = self.val();\n                userJson[searchKey] = searchVal;\n            }\n        });\n        //写入selcet数据\n        searchItem.find('select').find('option:selected').each(function () {\n            var self = $(this);\n            if (self.val()) {\n                var searchKey = self.data();\n                for (var i in searchKey) {\n                    userJson[i] = searchKey[i];\n                }\n            }\n        });\n        return userJson;\n    };\n    var indexRankFn = function (node) {\n        var userJson = {};\n        node.find('input').each(function () {\n            var self = $(this);\n            if (self.val()) {\n                var searchKey = $(this).attr('name');\n                var searchVal = $(this).val();\n                userJson[searchKey] = searchVal;\n            }\n        });\n        return userJson;\n    };\n    /**\n     * tap card 数据拼装\n     */\n    var tabKeyFn = function (node) {\n        var self = node;\n        var userJson = {};\n        var state = self.parents('.tab_card').attr('name');\n        var sValue = self.attr('value');\n        var sData = self.parents('.tab_card').data();\n        userJson = searchKeyFn(node.parents('.wrapper').find('.search_btn'));\n        userJson = sData;\n        userJson[state] = sValue;\n        return userJson;\n    };\n\n    var pageKetFn = function (node) {\n        var self = node;\n        var userJson = {};\n        var state = self.parents('.tab_card').attr('name');\n        var sValue = self.attr('value');\n        userJson = searchKeyFn(node.parents('.wrapper').find('.search_btn'));\n        userJson[state] = sValue;\n        return userJson;\n    };\n    /**\n     * 行间按钮data传递\n     */\n    var dataItemFn = function (node) {\n        var dataItem = null;\n\n        if (node.parents('tr').length != 0) {\n            dataItem = node.parents('tr').data();\n        } else if (node.parents('li').length != 0) {\n            dataItem = node.parents('li').data();\n        }\n        if (dataItem) {\n            return dataItem;\n        }\n\n    };\n    /**\n     * 单页按钮data传递，例如出库/批量出库页 出库按钮\n     */\n    var pageDataFn = function (node) {\n        var userJson = {};\n        var dataItem = {};\n        var userArray = [];\n        var dataKey = null;\n        var dataVal = null;\n        thisNode = node.parents('.main_content');\n        var beChecked = thisNode.find('.shop_table_list').find('tr');\n        if (beChecked.length != 0) {\n            $.each(beChecked, function (i) {\n                userJson = beChecked.eq(i).data('ids');\n                if (userJson) {\n                    userArray.push(userJson);\n                }\n            });\n            dataVal = userArray.join(',');\n            dataKey = 'ids';\n            dataItem[dataKey] = dataVal;\n\n        }\n        thisNode.find('input[type=text]').each(function () {\n            dataKey = thisNode.find('input[type=text]').attr('name');\n            dataVal = thisNode.find('input[type=text]').val();\n            dataItem[dataKey] = dataVal;\n        });\n        thisNode.find('textarea').each(function () {\n            dataKey = thisNode.find('textarea').attr('name');\n            dataVal = thisNode.find('textarea').val();\n            dataItem[dataKey] = dataVal;\n        });\n        thisNode.find('select').find('option:selected').each(function () {\n            var self = $(this);\n            if (self.val()) {\n                var dataVal = self.data();\n                for (var i in dataVal) {\n                    dataItem[i] = dataVal[i];\n                }\n            }\n        });\n\n        return dataItem;\n\n    };\n    /**\n     * popup内按钮data传递\n     */\n    var popupTxtFn = function (node) {\n        var popupNode = node.parents('.popup');\n        var dataKey = null;\n        var dataVal = null;\n        var dataValArr = [];\n        var dataItem = node.data();\n        popupNode.find('input[type=text]').each(function () {\n            dataKey = $(this).attr('name');\n            dataVal = $(this).val();\n            dataItem[dataKey] = dataVal;\n        });\n        popupNode.find('input[type=checkbox]:checked').each(function () {\n            var self = $(this);\n            dataKey = self.attr('name');\n            dataVal = self.val();\n            dataValArr.push(dataVal);\n            dataItem[dataKey] = dataValArr.join(',');\n        });\n        popupNode.find('input[type=radio]:checked').each(function () {\n            var self = $(this);\n            dataKey = self.attr('name');\n            dataVal = self.val();\n            dataItem[dataKey] = dataVal;\n        });\n        popupNode.find('textarea').each(function () {\n            dataKey = $(this).attr('name');\n            dataVal = $(this).val();\n            dataItem[dataKey] = dataVal;\n        });\n        popupNode.find('select').find('option:selected').each(function () {\n            var self = $(this);\n            if (self.val()) {\n                var dataVal = self.data();\n                for (var i in dataVal) {\n                    dataItem[i] = dataVal[i];\n                }\n            }\n        });\n        return dataItem;\n    };\n    /**\n     * 批量（导出，出库）传递data\n     * data-ids 字段不可变\n     */\n    var batchDataFn = function (node) {\n        var userJson;\n        var userArray = [];\n        var beChecked = node.parents('.tab_card,.account_detail_part').siblings('.data-return').find('.shop_table_list').find('input[type=checkbox]:checked');\n        $.each(beChecked, function (i) {\n            userJson = beChecked.eq(i).parents('tr').data('ids');\n            if (userJson) {\n                userArray.push(userJson);\n            }\n        });\n        return userArray;\n    };\n\n    /**\n     * 批量传递data 优化版\n     * 字段可变,行间可传递input、select\n     * @param node\n     * @returns {Array}\n     */\n    var batchDataFn2 = function (node) {\n        var userTr = null;\n        var userInput = null;\n        var eachUserJson = null;\n        var userJson = null;\n        var userArray = [];\n        var beChecked = node.parents('.tab_card,.account_detail_part').siblings('.data-return').find('.shop_table_list').find('input[type=checkbox]:checked:not(\".check_all\")');\n        $.each(beChecked, function (i) {\n            eachUserJson = {};\n            userTr = beChecked.eq(i).parents('tr').data();\n            userInput = beChecked.eq(i).parents('tr').find('select').find('option:selected').data();\n            for (var j in userTr) {\n                eachUserJson[j] = userTr[j]\n            }\n            for (var k in userInput) {\n                eachUserJson[k] = userInput[k]\n            }\n            userArray.push(eachUserJson);\n        });\n\n        return userArray;\n    };\n\n    /**\n     * 除popup之外的“保存”传参\n     * @param node\n     * @returns {*}\n     */\n    var saveTxtFn = function (node, parentCard) {\n        var parentNode = parentCard;\n        var dataKey = null;\n        var dataVal = null;\n        var dataValArr = [];\n        var dataItem = node.data();\n        parentNode.find('input[type=text]').each(function () {\n            dataKey = $(this).attr('name');\n            dataVal = $(this).val();\n            dataItem[dataKey] = dataVal;\n        });\n        parentNode.find('input[type=checkbox]:checked').each(function () {\n            var self = $(this);\n            dataKey = self.attr('name');\n            dataVal = self.val();\n            dataValArr.push(dataVal);\n            dataItem[dataKey] = dataValArr.join(',');\n        });\n        parentNode.find('input[type=radio]:checked').each(function () {\n            var self = $(this);\n            dataKey = self.attr('name');\n            dataVal = self.val();\n            dataItem[dataKey] = dataVal;\n        });\n        parentNode.find('textarea').each(function () {\n            dataKey = $(this).attr('name');\n            dataVal = $(this).val();\n            dataItem[dataKey] = dataVal;\n        });\n        parentNode.find('select').find('option:selected').each(function () {\n            var self = $(this);\n            if (self.val()) {\n                var dataVal = self.data();\n                for (var i in dataVal) {\n                    dataItem[i] = dataVal[i];\n                }\n            }\n        });\n        return dataItem;\n    };\n\n\n\n    /**\n     * 此方法用于行间的编辑按钮调用\n     * node:点击调用此方法的按钮dom元素\n     * @param node\n     */\n    var toEditFn = function (node) {\n        var editArea = node.parents('tr').find('.toEdit');\n        editArea.each(function () {\n            var $this = $(this);\n            var nowVal = null;\n            var editKind = $this.data('edit');\n            switch (editKind) {\n                case 'input':\n                    nowVal = $this.text();\n                    $this.removeClass('toEdit').addClass('beEditing').html('<input type=\"text\" value=\"' + nowVal + '\">');\n                    break;\n                case 'select':\n                    nowVal = $this.data('this');\n                    var optionList = $this.data('select').split(',');\n                    var valueList = $this.data('value').split(',');\n                    var temHtml = '<select>';\n                    for (var i in optionList) {\n                        temHtml += '<option value=\"' + valueList[i] + '\"data-show=' + optionList[i] + '>' + optionList[i] + '</option>'\n                    }\n                    temHtml += '</select>';\n                    $this.removeClass('toEdit').addClass('beEditing').html(temHtml).find('select').val(nowVal);\n                    break;\n                default:\n                    break;\n            }\n        })\n    };\n\n\n    /**\n     * 此方法用于行间的编辑按钮保存使用\n     * @param node 点击调用此方法的dom元素\n     * @param isAjax 是否需要发请求保存 true/false\n     * @param url  保存请求地址 '字符串'\n     * @param userJson 保存请求所需参数 json\n     * @param succ 保存成功后的回调\n     */\n    var toSaveFn = function (node, isAjax, url, userJson, succ) {\n        var editingArea = node.parents('tr').find('.beEditing');\n        editingArea.each(function () {\n            var $this = $(this);\n            var nowShow = null;\n            var thisVal = null;\n            var editKind = $this.data('edit');\n            switch (editKind) {\n                case 'input':\n                    nowShow = $this.find('input').val();\n                    $this.html(nowShow).removeClass('beEditing').addClass('toEdit');\n                    break;\n                case 'select':\n                    nowShow = $this.find('option:selected').data('show');\n                    thisVal = $this.find('option:selected').val();\n                    $this.html(nowShow).data('this', thisVal).removeClass('beEditing').addClass('toEdit');\n                    break;\n                default:\n                    break;\n            }\n        });\n        if (isAjax) {\n            node.packajax({\n                ajax_url: url,\n                user: userJson,\n                succ: succ\n            });\n        }\n\n    };\n    /**\n     * 全局变量，用于复制粘贴\n     * @type {Array}\n     */\n    var inputList = [];\n    /**\n     *  此方法用于行间的复制按钮保存使用\n     * @param node 点击调用此方法的dom元素\n     * @param copyType 获取值的方式，字符串，beTxt/beVal\n     */\n    var toCopyFn = function (node, copyType) {\n        inputList = [];\n        if (copyType == 'beTxt') {\n            node.parents('tr').find('td[data-edit]').each(function () {\n                inputList.push($(this).text())\n            });\n        } else if (copyType == 'beVal') {\n            node.parents('tr').find('td[data-edit]').each(function () {\n                inputList.push($(this).find('input').val())\n            });\n        }\n    };\n    /**\n     * 此方法用于行间的黏贴按钮保存使用\n     * @param node 点击调用此方法的dom元素\n     */\n    var toPasteFn = function (node) {\n        console.log(inputList);\n        node.parents('tr').find('td[data-edit]').each(function (i) {\n            $(this).find('input').val(inputList[i]);\n        });\n\n    };\n\n    /**\n     *  单一按钮传参,需要将按钮本身和父级dom传进来\n     * @param node 点击调用此方法的dom元素\n     * @param parentNode 内含input，select，textarea的父级dom节点\n     * @returns {*}\n     */\n    var singleBtnFn = function (node, parentNode) {\n        var dataItem = node.data();\n        parentNode.find('textarea').each(function () {\n            dataKey = $(this).attr('name');\n            dataVal = $(this).val();\n            dataItem[dataKey] = dataVal;\n        });\n        parentNode.find('input[type=text]').each(function () {\n            dataKey = $(this).attr('name');\n            dataVal = $(this).val();\n            dataItem[dataKey] = dataVal;\n        });\n        parentNode.find('input[type=checkbox]:checked').each(function () {\n            var self = $(this);\n            dataKey = self.attr('name');\n            dataVal = self.val();\n            dataValArr.push(dataVal);\n            dataItem[dataKey] = dataValArr.join(',');\n        });\n        parentNode.find('input[type=radio]:checked').each(function () {\n            var self = $(this);\n            dataKey = self.attr('name');\n            dataVal = self.val();\n            dataItem[dataKey] = dataVal;\n        });\n        parentNode.find('select').find('option:selected').each(function () {\n            var self = $(this);\n            if (self.val()) {\n                var dataVal = self.data();\n                for (var i in dataVal) {\n                    dataItem[i] = dataVal[i];\n                }\n            }\n        });\n        return dataItem;\n    };\n\n\n\n\n\n    /********************************调用函数的分割线*************************************************/\n\n\n\n\n\n    //运营-采购单管理-搜索按钮\n    $('#merchantSearchBtn').on('click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        self.packajax({\n            ajax_url: urls.merchantPurchaseQueryUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n    //运营-采购模块-采购单切换-tab_card\n    $('#merchantTabBtn ul li').on('click', function () {\n        var self = $(this);\n        var userJson = tabKeyFn(self);\n        self.packajax({\n            ajax_url: urls.merchantPurchaseQueryUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n    //采购单查询\n    $('.wrapper').delegate('#pageIndexMerchantPurchase .smallbtn', 'click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        var index = 'index';\n        userJson[index] = self.siblings('.page_skip').find('input').val();\n        self.packajax({\n            ajax_url: urls.merchantPurchaseQueryUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n    //采购单查询\n    $('.wrapper').delegate('#pageIndexMerchantPurchase ul li.pageNum', 'click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        var index = 'index';\n        userJson[index] = self.text();\n        self.packajax({\n            ajax_url: urls.merchantPurchaseQueryUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n    //采购单查询-上一页\n    $('.wrapper').delegate('#pageIndexMerchantPurchase ul li.frontPage', 'click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        var index = 'index';\n        userJson[index] = parseInt(self.parents('ul').find('.current').text()) - 1;\n        self.parents('ul').find('.current').removeClass('current');\n        self.parents('#pageIndexMerchantPurchase').find('li').eq(userJson[index]).addClass('current');\n        self.packajax({\n            ajax_url: urls.merchantPurchaseQueryUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n    //采购单查询-下一页\n    $('.wrapper').delegate('#pageIndexMerchantPurchase ul li.nextPage', 'click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        var index = 'index';\n        userJson[index] = parseInt(self.parents('ul').find('.current').text()) + 1;\n        self.parents('ul').find('.current').removeClass('current');\n        self.parents('#pageIndexMerchantPurchase').find('li').eq(userJson[index]).addClass('current');\n        self.packajax({\n            ajax_url: urls.merchantPurchaseQueryUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n    //采购管理-批量出库\n    $('.tab_card').delegate('#exportMerchantDate', 'click', function () {\n        var self = $(this);\n        var userArray = batchDataFn(self);\n        var ids = userArray.join(',');\n        if (ids.length > 0) {\n            window.location.href = urls.exportMerchantDateUrl + '?purchaseIds=' + ids;\n        } else {\n            alert('请选择要导出的数据');\n        }\n\n    });\n});\n\n\n\n/**\n * Created by cdxiaqing1 on 2015/12/23.\n */\n/**\n * Created by cdxiaqing1 on 2015/8/18.\n * pop ajax\n */\n$(function () {\n    /**\n     * 请求ajax地址\n     */\n    var urls = {\n        JAVASCRIPT: 'javascript:;',\n\n\n        //商品管理\n        myProductLibUrl: 'indexRank.html',\n        myProductSKULibUrl: 'wareSkuSearchRank.html',\n        editPageUrl: 'edit.html',\n\n        productUpShelfUrl: 'shelf.html?status=2',\n        productDownShelfUrl: 'shelf.html?status=3',\n        batchIngressShelfUrl: '/vender/b/product/shelf.htm',\n        importUpShelfUrl: '/vender/b/product/importUpShelf',\n        importDownShelfUrl: '/vender/b/product/importDownShelf',\n        editAreaCatUrl: 'editAreaCat.html',\n        itemDelUrl: '/vender/b/product/delete.htm',\n        areaDelUrl: '/vender/b/product/deleteLimit',\n        //商品区域价查询、保存\n        areaPriceSearchUrl: '/vender/b/product/areaPriceRank.htm',\n        areaPriceSaveUrl: '/vender/b/product/areaPriceRank.htm',\n        //协议价查询、删除和修改\n        agreementPriceSearchUrl: '/vender/b/product/discountBank.htm',\n        agreementPriceDeleteUrl: '/vender/b/product/delete.htm',\n        agreementPriceDModifyUrl: '/vender/b/product/modify.htm',\n        agreementPriceUpdataUrl: '/vender/b/product/updateAreaPrice.htm',\n        //结算统计\n        settleAccountSearchUrl: '/vender/b/stat/indexRank.htm',\n        //入驻提交用户信息\n        //userInfoUrl:'/join/submitInfo.htm',\n        //userInfoUrl:'/join/submitInfo.htm'\n        //渠道管理-账期维护\n        channelSetAccount: '/这里写URL',\n        //账期管理\n        standingBookSearch: '/vender/b/account/query.htm',\n        scopeSearch: '/vender/b/account/scopequery.htm',\n        paymentSearch: '/vender/b/account/paymentquery.htm',\n\n\n        //渠道管理--经销商列表--经销商列表搜索\n        bSellerManageSellersUrl: '/vender/b/channel/merchant/b_seller_manage/indexQuery.html',\n        //渠道管理--经销商列表--查看--启用经销商\n        bSellerManageDetailUserStatusOnUrl: '/vender/b/channel/merchant/b_seller_manage/statusOn.html',\n        //渠道管理--经销商列表--查看--禁用经销商\n        bSellerManageDetailUserStatusOffUrl: '/vender/b/channel/merchant/b_seller_manage/statusOff.html',\n        //渠道管理--经销商列表--账期维护--保存账期\n        bSellerManageSaveAccountUrl: '/vender/b/channel/merchant/b_seller_manage/saveAccount.html',\n        //渠道管理--首营认证--首营认证列表搜索\n        bSellerFirstSearchUrl: '/vender/b/channel/merchant/b_seller_first/indexQuery.html',\n        //渠道管理--首营认证--编辑审核--审核通过\n        bSellerManageDetailAuditPassUrl: '/vender/b/channel/merchant/b_seller_first/auditPass.html',\n        //渠道管理--首营认证--编辑审核--进入驳回资质页面\n        bSellerManageDetailToAuditDenyUrl: '/vender/b/channel/merchant/b_seller_first/toAuditDeny.html',\n        //渠道管理--首营认证--编辑审核--驳回资质\n        bSellerManageDetailAuditDenyUrl: '/vender/b/channel/merchant/b_seller_first/auditDeny.html',\n        //渠道管理--采购目录维护--经销商列表搜索\n        bSellerWareRelationshipSellersSearchUrl: '/vender/b/channel/merchant/b_seller_ware_relationship/indexQuery.html',\n        //渠道管理--采购目录维护--编辑商品--搜索列表\n        bSellerWareRelationshipEditBtnUrl: '/vender/b/channel/merchant/b_seller_ware_relationship/editQuery.html',\n        //渠道管理--采购目录维护--编辑商品--单个删除商品\n        bSellerWareRelationshipSingleDeleteUrl: '/vender/b/channel/merchant/b_seller_ware_relationship/singleDelete.html',\n        //渠道管理--采购目录维护--编辑商品--批量删除商品\n        bSellerWareRelationshipBatchDeleteUrl: '/vender/b/channel/merchant/b_seller_ware_relationship/batchDelete.html',\n        //渠道管理--采购目录维护--编辑商品--编辑商品后保存\n        bSellerWareRelationshipUpdateUrl: '/vender/b/channel/merchant/b_seller_ware_relationship/update.html',\n        //渠道管理--采购目录维护--导入新商品--搜索列表\n        bSellerWareRelationshipAddSearchBtnUrl: '/vender/b/channel/merchant/b_seller_ware_relationship/addQuery.html',\n        //渠道管理--采购目录维护--导入新商品--单个导入商品\n        bSellerWareRelationshipSingleSaveUrl: '/vender/b/channel/merchant/b_seller_ware_relationship/singleSave.html',\n        //渠道管理--采购目录维护--导入新商品--批量导入商品\n        bSellerWareRelationshipBatchSaveUrl: '/vender/b/channel/merchant/b_seller_ware_relationship/batchSave.html',\n        //渠道管理--会员等级--搜索\n        bSellerCategoryIndexQueryUrl: '/vender/b/channel/merchant/b_seller_category/indexQuery.html',\n\n        //采购单模块\n        venderBPurchaseQueryUrl: '/vender/b/purchase/query.htm',\n        venderBAuditPurchaseUrl: '/vender/b/purchase/remote/audit.htm',\n        venderBOrderQueryUrl: '/vender/b/order/query.htm',\n        venderBDisagreePurchaseUrl: '/vender/b/purchase/remote/disagree.htm',\n        venderBRejectPurchaseUrl: '/vender/b/purchase/remote/reject.htm',\n        venderBModifyPurchseOrderUrl: '/vender/b/purchase/remote/modifyPurchase.htm',\n        venderBSavePurchseSkuUrl: '/vender/b/purchase/remote/savePurchaseSku.htm',\n        venderBDelPurchseSkuUrl: '/vender/b/purchase/remote/delPurchaseSku.htm',\n        venderBShowProductUrl: '/vender/b/purchase/remote/showProduct.htm',\n        venderBQueryProductUrl: '/vender/b/purchase/searchProduct.htm',\n        venderBStockoutUrl: '/vender/b/order/remote/stockout.htm',\n\n        //卖家模块\n        bSellerDetailSellersUrl: '/vender/b/detail/index.htm',\n\n        //商品批量上传\n        importSkus: '/vender/b/product/importSkus',\n\n        //商品批量上传结果\n        importResult: '/vender/b/product/importInfo.htm',\n\n        //图片批量上传\n        importImgs: '/vender/b/product/importImgs.htm',\n        //图片批量上传结果\n        importImgsResult: '/vender/b/product/importImgInfo.htm'\n    };\n\n    var importStatus = {\n        skuStatus: -999,\n        imgStatus: -999\n    }\n\n    var intervals = {\n        //商品批量导入状态查询\n        skuInterval: null,\n        //图片批量导入状态查询\n        imgInterval: null\n    }\n\n    /**\n     * ajax回调函数\n     */\n    var callbacks = {\n        //入驻提交信息回调\n        userInfoCallback: function (data) {\n            if (data.result) {\n                window.location.href = data.messages.url;\n            } else {\n                console.log(data.messages);\n            }\n        },\n        //个人信息提交信息回调\n        venderInfoCallback: function (data) {\n            if (data.result) {\n                alert('保存成功')\n            } else {\n                alert('保存失败')\n            }\n        },\n        //搜索回调\n        searchCallback: function (data) {\n            $('.data-return').html(data);\n        },\n        //data-return被占用时的回调\n        forDataCallback: function (data) {\n            $('.data-return-dup').html(data);\n        },\n        //触发弹窗\n        showPopupCallback: function (data) {\n            $('.loading').remove();\n            $('.popup').html(data.messages.popup).show();\n        },\n        showPopup: function (text, reload) {\n            var closeClass = reload ? 'ok_close' : 'just_close';\n            var popupContent = '<div class=\"popup_card\">\\\n                <div class=\"popup_close\"> <div class=\"close_css\"></div> </div> \\\n                <div class=\"popup_sure\"> \\\n                    <div class=\"popup_title\">提示信息</div> \\\n                    <div class=\"popup_content\"> \\\n                        <div class=\"popup_sure_txt\">' + text + '</div> \\\n                        <div class=\"btnarea1\"> <div class=\"med2btn btnblue ' + closeClass + '\" id=\"flush_page_btn\"><a >关闭</a></div></div> \\\n                    </div>\\\n                 </div>\\\n            </div>';\n            $('.popup').html(popupContent).show();\n        },\n        //首次触发弹窗回调确定后刷新页面\n        onPopupReload: function (data) {\n            var self = $(this);\n            if (data.result) {\n                var thisPopup = self.parents('.popup');\n                thisPopup.hide();\n                window.location.reload();\n            }\n        },\n        // 二次触发弹窗回调 1为点击确定后刷新页面的回调函数\n        onPopupCallback1: function (data) {\n            var self = $(this);\n            if (data.result) {\n                //更新弹窗内容\n                var thisPopup = self.parents('.popup');\n                thisPopup.html(data.messages.popup);\n                thisPopup.delegate('.med2btn', 'click', function () {\n                    thisPopup.hide();\n                    window.location.reload();\n                });\n            } else {\n                var thisPopup = self.parents('.popup');\n                thisPopup.html(data.messages.popup);\n                thisPopup.delegate('.med2btn', 'click', function () {\n                    thisPopup.hide();\n                    window.location.reload();\n                });\n                console.log(data.messages.msg);\n            }\n        },\n        // 二次触发弹窗回调 2为点击确定后跳转返回url的回调函数\n        onPopupCallback2: function (data) {\n            var self = $(this);\n            if (data.result) {\n                //更新弹窗内容\n                var thisPopup = self.parents('.popup');\n                thisPopup.html(data.messages.popup);\n                thisPopup.delegate('.med2btn', 'click', function () {\n                    thisPopup.hide();\n                    window.location.href = data.messages, url;\n                });\n            } else {\n                console.log(data.messages.msg);\n            }\n        },\n        //商品上传成功\n        uploadSuccessAllCallback: function (data, isImg) {\n            if (isImg) {\n                clearIntervalIfNotNull(intervals.imgInterval);\n            } else {\n                clearIntervalIfNotNull(intervals.skuInterval);\n            }\n            var source = $('#template_item_import2').html();\n            var template = Handlebars.compile(source);\n            var html = template(data);\n            $('.popup').html(html).show();\n        },\n        //图片上传成功（部分）\n        uploadImgsSuccessPartCallback: function (data, openResult) {\n            clearIntervalIfNotNull(intervals.imgInterval);\n            if (typeof data !== 'undefined' && data) {\n                //importSku接口返回数据\n                var source = $('#template_item_import3').html();\n                var template = Handlebars.compile(source);\n                var html = template(data);\n                $('.popup').html(html);\n                $('.popup').find('.popup_title').html('图片导入');\n                $('.popup').find('.popup_sure_subtxt').html('共' + data.totalNum + '条数据，成功' + data.successNum + '条，失败' + data.failNum + '条，如下表显示：');\n                data.fails.map(function (item) {\n                    $('.error_list').append('<li>图片' + item + '失败</li>');\n                });\n                $('.popup_sure_txt').append('<div class=\\'popup_sure_subtxt\\' style=\\'text-align:left;\\'><p>上传失败原因：<br/>1.图片尺寸及大小不符合规则；<br/>2.文件命名方式不符合规则；<br/>3.对应商品未录入商品库；<br/>4.上传文件或商品发生重复。<br/>请核查，如无以上问题，请联络运营人员。</p></div>');\n                $('.popup').show();\n            } else {\n                //无数据，从接口查询,显示三角形\n                $.ajax({\n                    type: 'get',\n                    url: urls.importImgsResult,\n                    timeout: 2000,\n                    success: function (data) {\n                        if (data && data.totalNum !== data.successNum) {\n                            if (openResult) {\n                                callbacks.uploadImgsSuccessPartCallback(data, true);\n                            }\n                        } else if (data && data.totalNum == data.successNum && openResult && data.totalNum) {\n                            //全部成功\n                            callbacks.uploadSuccessAllCallback(data, true);\n                        } else if (openResult) {\n                            //失败\n                            callbacks.uploadFailedCallback('', true);\n                        }\n                        $('#item_images_btn').parent().find('.triangle').show();\n                        $('#item_images_btn').removeClass('uploading').html('图片导入');\n                    },\n                    error: function () {\n                        console.log('获取图片导入状态失败');\n                    }\n                });\n            }\n\n        },\n        //商品上传成功（部分）\n        uploadSuccessPartCallback: function (data, openResult) {\n            clearIntervalIfNotNull(intervals.skuInterval);\n            if (typeof data !== 'undefined' && data) {\n                //importSku接口返回数据\n                var source = $('#template_item_import3').html();\n                var template = Handlebars.compile(source);\n                var html = template(data);\n                $('.popup').html(html);\n                data.repeatRows.map(function (item) {\n                    $('.error_list').append('<li>商品' + item + '重复</li>');\n                });\n                data.failRows.map(function (item) {\n                    $('.error_list').append('<li>商品' + item + '失败</li>');\n                });\n                data.parseFailRows.map(function (item) {\n                    $('.error_list').append('<li>第' + item + '行解析失败</li>');\n                });\n                $('.popup').show();\n            } else {\n                //无数据，从接口查询,显示三角形\n                $.ajax({\n                    type: 'get',\n                    url: urls.importResult,\n                    timeout: 2000,\n                    success: function (data) {\n                        if (data && data.totalNum !== data.successNum) {\n                            //部分成功\n                            if (openResult) {\n                                callbacks.uploadSuccessPartCallback(data, true);\n                            }\n                        } else if (data && data.totalNum == data.successNum && openResult && data.totalNum) {\n                            //全部成功\n                            callbacks.uploadSuccessAllCallback(data, false);\n                        } else if (openResult) {\n                            //失败\n                            callbacks.uploadFailedCallback('', false);\n                        }\n                        $('#item_import_btn').parent().find('.triangle').show();\n                        $('#item_import_btn').removeClass('uploading').html('商品导入');\n                    },\n                    error: function () {\n                        console.log('获取商品导入状态失败');\n                    }\n                });\n            }\n\n        },\n        //上传失败\n        uploadFailedCallback: function (msg, isImg) {\n            var source = $('#template_item_import4').html();\n            var template = Handlebars.compile(source);\n            var html = template();\n            $('.popup').html(html);\n            $('.tips_red').html('导入失败！');\n            if (typeof msg !== 'undefined' && msg.length) {\n                $('.popup_sure_txt').append('<p class=\\'popup_sure_subtxt\\'>' + msg + '</div>');\n            }\n            if (typeof isImg !== 'undefined' && isImg) {\n                $('.popup').find('.popup_title').html('图片导入');\n                $('.popup_sure_txt').append('<div class=\\'popup_sure_subtxt\\' style=\\'text-align:left;\\'><p>上传失败原因：<br/>1.图片尺寸及大小不符合规则；<br/>2.文件命名方式不符合规则；<br/>3.对应商品未录入商品库；<br/>4.上传文件或商品发生重复。<br/>请核查，如无以上问题，请联络运营人员。</p></div>');\n                clearIntervalIfNotNull(intervals.imgInterval);\n            } else {\n                clearIntervalIfNotNull(intervals.skuInterval);\n            }\n            $('.popup').show();\n        },\n        //上传中\n        uploadLoadingDisplay: function (isImg) {\n            var source = $('#template_item_import2').html();\n            var template = Handlebars.compile(source);\n            var html = template();\n            $('.popup').html(html);\n            $('.popup').find('.tips_blue').html('导入中...').addClass('tips_yellow');\n            if (typeof isImg !== 'undefined' && isImg) {\n                $('.popup').find('.popup_title').html('图片导入');\n                $('.popup').find('.popup_sure_subtxt').html('注：当显示为导入中状态时，图片数量较多，系统需要更多时间上传商品，请耐心等待。');\n            } else {\n                $('.popup').find('.popup_sure_subtxt').html('注：当显示为导入中状态时，商品数量较多，系统需要更多时间上传商品，请耐心等待。');\n            }\n            $('.popup').show();\n        },\n        //上传中调接口\n        uploadLoadingCallback: function (isImg) {\n            if (typeof isImg !== 'undefined' && isImg) {\n                intervals.imgInterval = setInterval(function () {\n                    importImgsStatusFn(true);\n                }, 1000);\n            } else {\n                intervals.skuInterval = setInterval(function () {\n                    importStatusFn(true);\n                }, 1000);\n            }\n        },\n        //上传按钮状态\n        uploadStatusCallback: function (data, showResult) {\n            if (data == 1) {\n                //导入中\n                importStatus.skuStatus = 1;\n                $('#item_import_btn').addClass('uploading').html('导入中...');\n                $('#item_import_btn').parent().find('triangle').hide();\n            } else if (data == 2) {\n                //导入完成\n                //clearIntervalIfNotNull(intervals.skuInterval);\n                importStatus.skuStatus = 2;\n                $('#item_import_btn').removeClass('uploading').html('商品导入');\n                //导入出错，显示红三角\n                //callbacks.uploadSuccessPartCallback();\n                if (typeof showResult !== 'undefined' && showResult) {\n                    callbacks.uploadSuccessPartCallback(null, showResult);\n                } else {\n                    callbacks.uploadSuccessPartCallback();\n                }\n            } else {\n                importStatus.skuStatus = -999;\n            }\n\n        },\n        //图片导入按钮状态\n        uploadImgsStatusCallback: function (data, showResult) {\n            if (data == 1) {\n                //导入中\n                importStatus.imgStatus = 1;\n                $('#item_images_btn').addClass('uploading').html('导入中...');\n                $('#item_images_btn').parent().find('triangle').hide();\n            } else if (data == 2) {\n                //导入完成\n                //clearIntervalIfNotNull(intervals.imgInterval);\n                importStatus.imgStatus = 2;\n                $('#item_images_btn').removeClass('uploading').html('图片导入');\n                //导入出错，显示红三角\n                //callbacks.uploadImgsSuccessPartCallback();\n                if (typeof showResult !== 'undefined' && showResult) {\n                    callbacks.uploadImgsSuccessPartCallback(null, showResult);\n                } else {\n                    callbacks.uploadImgsSuccessPartCallback();\n                }\n            } else {\n                importStatus.imgStatus = -999;\n            }\n\n        },\n        importCallback: function (title, msg) {\n            var source = $('#template_item_import4').html();\n            var template = Handlebars.compile(source);\n            var html = template();\n            $('.popup').html(html);\n            $('.popup').find('.popup_title').html(title);\n            $('.popup').find('.tips_red').html(msg);\n        }\n\n    };\n\n\n    /**\n     * 搜索数据拼装\n     * orderState：tab_card状态数据\n     * userJson:ajaxUpload接收数据，obj\n     */\n    var searchKeyFn = function (node) {\n        var searchItem = node.parents('.wrapper').find('.filter_search');\n        var tabItem = searchItem.parents('.wrapper').find('.tab_card');\n        var userJson = {};\n        //var state = tabItem.attr('name');\n        //var sValue = tabItem.find('.current').attr('value');\n        ////写入tab card数据\n        //userJson[state]=sValue;\n        //写入input数据\n        searchItem.find('input').each(function () {\n            var self = $(this);\n            if (self.val()) {\n                var searchKey = self.attr('name');\n                var searchVal = $.trim(self.val());\n                userJson[searchKey] = searchVal;\n            }\n        });\n        //写入selcet数据\n        searchItem.find('select').find('option:selected').each(function () {\n            var self = $(this);\n            if (self.val()) {\n                var searchKey = self.data();\n                for (var i in searchKey) {\n                    userJson[i] = searchKey[i];\n                }\n            }\n        });\n        return userJson;\n    };\n    /**\n     * 弹窗上的搜索按钮\n     * @param node\n     * @returns {{}}\n     */\n    var searchKeyPopupFn = function (node) {\n        var searchItem = node.parents('.popup').find('.filter_search');\n        var userJson = {};\n        //写入input数据\n        searchItem.find('input').each(function () {\n            var self = $(this);\n            if (self.val()) {\n                var searchKey = self.attr('name');\n                var searchVal = $.trim(self.val());\n                userJson[searchKey] = searchVal;\n            }\n        });\n        //写入selcet数据\n        searchItem.find('select').find('option:selected').each(function () {\n            var self = $(this);\n            if (self.val()) {\n                var searchKey = self.data();\n                for (var i in searchKey) {\n                    userJson[i] = searchKey[i];\n                }\n            }\n        });\n        return userJson;\n    };\n    var indexRankFn = function (node) {\n        var userJson = {};\n        node.find('input').each(function () {\n            var self = $(this);\n            if (self.val()) {\n                var searchKey = $(this).attr('name');\n                var searchVal = $(this).val();\n                userJson[searchKey] = searchVal;\n            }\n        });\n        return userJson;\n    };\n    /**\n     * tap card 数据拼装\n     */\n    var tabKeyFn = function (node) {\n        var self = node;\n        var userJson = {};\n        var state = self.parents('.tab_card').attr('name');\n        var sValue = self.attr('value');\n        var sData = self.parents('.tab_card').data();\n        userJson = searchKeyFn(node.parents('.wrapper').find('.search_btn'));\n        userJson = sData;\n        userJson[state] = sValue;\n        return userJson;\n    };\n\n    var pageKetFn = function (node) {\n        var self = node;\n        var userJson = {};\n        var state = self.parents('.tab_card').attr('name');\n        var sValue = self.attr('value');\n        userJson = searchKeyFn(node.parents('.wrapper').find('.search_btn'));\n        userJson[state] = sValue;\n        return userJson;\n    };\n    /**\n     * 行间按钮data传递\n     */\n    var dataItemFn = function (node) {\n        var dataItem = null;\n\n        if (node.parents('tr').length != 0) {\n            dataItem = node.parents('tr').data();\n        } else if (node.parents('li').length != 0) {\n            dataItem = node.parents('li').data();\n        }\n        if (dataItem) {\n            return dataItem;\n        }\n\n    };\n    /**\n     * 单页按钮data传递，例如出库/批量出库页 出库按钮\n     */\n    var pageDataFn = function (node) {\n        var userJson = {};\n        var dataItem = {};\n        var userArray = [];\n        var dataKey = null;\n        var dataVal = null;\n        thisNode = node.parents('.main_content');\n        var beChecked = thisNode.find('.shop_table_list').find('tr');\n        if (beChecked.length != 0) {\n            $.each(beChecked, function (i) {\n                userJson = beChecked.eq(i).data('ids');\n                if (userJson) {\n                    userArray.push(userJson);\n                }\n            });\n            dataVal = userArray.join(',');\n            dataKey = 'ids';\n            dataItem[dataKey] = dataVal;\n\n        }\n        thisNode.find('input[type=text]').each(function () {\n            dataKey = thisNode.find('input[type=text]').attr('name');\n            dataVal = thisNode.find('input[type=text]').val();\n            dataItem[dataKey] = dataVal;\n        });\n        thisNode.find('textarea').each(function () {\n            dataKey = thisNode.find('textarea').attr('name');\n            dataVal = thisNode.find('textarea').val();\n            dataItem[dataKey] = dataVal;\n        });\n        thisNode.find('select').find('option:selected').each(function () {\n            var self = $(this);\n            if (self.val()) {\n                var dataVal = self.data();\n                for (var i in dataVal) {\n                    dataItem[i] = dataVal[i];\n                }\n            }\n        });\n\n        return dataItem;\n\n    };\n    /**\n     * popup内按钮data传递\n     */\n    var popupTxtFn = function (node) {\n        var popupNode = node.parents('.popup');\n        var dataKey = null;\n        var dataVal = null;\n        var dataValArr = [];\n        var dataItem = node.data();\n        popupNode.find('input[type=text]').each(function () {\n            dataKey = $(this).attr('name');\n            dataVal = $(this).val();\n            dataItem[dataKey] = dataVal;\n        });\n        popupNode.find('input[type=checkbox]:checked').each(function () {\n            var self = $(this);\n            dataKey = self.attr('name');\n            dataVal = self.val();\n            dataValArr.push(dataVal);\n            dataItem[dataKey] = dataValArr.join(',');\n        });\n        popupNode.find('input[type=radio]:checked').each(function () {\n            var self = $(this);\n            dataKey = self.attr('name');\n            dataVal = self.val();\n            dataItem[dataKey] = dataVal;\n        });\n        popupNode.find('textarea').each(function () {\n            dataKey = $(this).attr('name');\n            dataVal = $(this).val();\n            dataItem[dataKey] = dataVal;\n        });\n        popupNode.find('select').find('option:selected').each(function () {\n            var self = $(this);\n            if (self.val()) {\n                var dataVal = self.data();\n                for (var i in dataVal) {\n                    dataItem[i] = dataVal[i];\n                }\n            }\n        });\n        return dataItem;\n    };\n    /**\n     * 批量（导出，出库）传递data\n     * data-ids 字段不可变\n     */\n    var batchDataFn = function (node) {\n        var userJson;\n        var userArray = [];\n        var beChecked = node.parents('.tab_card,.account_detail_part').siblings('.data-return').find('.shop_table_list').find('input[type=checkbox]:checked');\n        $.each(beChecked, function (i) {\n            userJson = beChecked.eq(i).parents('tr').data('ids');\n            if (userJson) {\n                userArray.push(userJson);\n            }\n        });\n        return userArray;\n    };\n\n    /**\n     * 批量传递data 优化版\n     * 字段可变,行间可传递input、select\n     * @param node\n     * @returns {Array}\n     */\n    var batchDataFn2 = function (node) {\n        var userTr = null;\n        var userInput = null;\n        var eachUserJson = null;\n        var userJson = null;\n        var userArray = [];\n        var beChecked = node.parents('.tab_card,.account_detail_part').siblings('.data-return').find('.shop_table_list').find('input[type=checkbox]:checked:not(\".check_all\")');\n        $.each(beChecked, function (i) {\n            eachUserJson = {};\n            userTr = beChecked.eq(i).parents('tr').data();\n            userInput = beChecked.eq(i).parents('tr').find('select').find('option:selected').data();\n            for (var j in userTr) {\n                eachUserJson[j] = userTr[j]\n            }\n            for (var k in userInput) {\n                eachUserJson[k] = userInput[k]\n            }\n            userArray.push(eachUserJson);\n        });\n\n        return userArray;\n    };\n\n    /**\n     * 除popup之外的“保存”传参\n     * @param node\n     * @returns {*}\n     */\n    var saveTxtFn = function (node, parentCard) {\n        var parentNode = parentCard;\n        var dataKey = null;\n        var dataVal = null;\n        var dataValArr = [];\n        var dataItem = node.data();\n        parentNode.find('input[type=text]').each(function () {\n            dataKey = $(this).attr('name');\n            dataVal = $(this).val();\n            dataItem[dataKey] = dataVal;\n        });\n        parentNode.find('input[type=checkbox]:checked').each(function () {\n            var self = $(this);\n            dataKey = self.attr('name');\n            dataVal = self.val();\n            dataValArr.push(dataVal);\n            dataItem[dataKey] = dataValArr.join(',');\n        });\n        parentNode.find('input[type=radio]:checked').each(function () {\n            var self = $(this);\n            dataKey = self.attr('name');\n            dataVal = self.val();\n            dataItem[dataKey] = dataVal;\n        });\n        parentNode.find('textarea').each(function () {\n            dataKey = $(this).attr('name');\n            dataVal = $(this).val();\n            dataItem[dataKey] = dataVal;\n        });\n        parentNode.find('select').find('option:selected').each(function () {\n            var self = $(this);\n            if (self.val()) {\n                var dataVal = self.data();\n                for (var i in dataVal) {\n                    dataItem[i] = dataVal[i];\n                }\n            }\n        });\n        return dataItem;\n    };\n\n\n\n    /**\n     * 此方法用于行间的编辑按钮调用\n     * node:点击调用此方法的按钮dom元素\n     * @param node\n     */\n    var toEditFn = function (node) {\n        var editArea = node.parents('tr').find('.toEdit');\n        editArea.each(function () {\n            var $this = $(this);\n            var nowVal = null;\n            var nowName = null;\n            var editKind = $this.data('edit');\n            var editType = $this.data('type');\n            switch (editKind) {\n                case 'input':\n                    nowVal = $this.text();\n                    if (nowVal == '--') {\n                        nowVal = '';\n                    }\n                    nowName = $this.attr('name');\n                    if (editType == 'long') {\n                        $this.removeClass('toEdit').addClass('beEditing').html('<input type=\"text\" class=\"inputOnlyLong\" name=\"' + nowName + '\" value=\"' + nowVal + '\">');\n                    } else {\n                        $this.removeClass('toEdit').addClass('beEditing').html('<input type=\"text\" class=\"inputOnlyFloat\" name=\"' + nowName + '\" value=\"' + nowVal + '\">');\n                    }\n                    break;\n                case 'select':\n                    nowVal = $this.data('this');\n                    var optionList = $this.data('select').split(',');\n                    var valueList = $this.data('value').split(',');\n                    var temHtml = '<select>';\n                    for (var i in optionList) {\n                        temHtml += '<option value=\"' + valueList[i] + '\"data-show=' + optionList[i] + '>' + optionList[i] + '</option>'\n                    }\n                    temHtml += '</select>';\n                    $this.removeClass('toEdit').addClass('beEditing').html(temHtml).find('select').val(nowVal);\n                    break;\n                default:\n                    break;\n            }\n        })\n    };\n\n\n    /**\n     * 此方法用于行间的编辑按钮保存使用\n     * @param node 点击调用此方法的dom元素\n     * @param isAjax 是否需要发请求保存 true/false\n     * @param url  保存请求地址 '字符串'\n     * @param userJson 保存请求所需参数 json\n     * @param succ 保存成功后的回调\n     */\n    var toSaveFn = function (node, isAjax, url, userJson, succ) {\n        var editingArea = node.parents('tr').find('.beEditing');\n        editingArea.each(function () {\n            var $this = $(this);\n            var nowShow = null;\n            var thisVal = null;\n            var editKind = $this.data('edit');\n            switch (editKind) {\n                case 'input':\n                    nowShow = $this.find('input').val();\n                    $this.html(nowShow).removeClass('beEditing').addClass('toEdit');\n                    break;\n                case 'select':\n                    nowShow = $this.find('option:selected').data('show');\n                    thisVal = $this.find('option:selected').val();\n                    $this.html(nowShow).data('this', thisVal).removeClass('beEditing').addClass('toEdit');\n                    break;\n                default:\n                    break;\n            }\n        });\n        if (isAjax) {\n            node.packajax({\n                ajax_url: url,\n                user: userJson,\n                succ: succ\n            });\n        }\n\n    };\n    /**\n     * 全局变量，用于复制粘贴\n     * @type {Array}\n     */\n    var inputList = [];\n    /**\n     *  此方法用于行间的复制按钮保存使用\n     * @param node 点击调用此方法的dom元素\n     * @param copyType 获取值的方式，字符串，beTxt/beVal\n     */\n    var toCopyFn = function (node, copyType) {\n        inputList = [];\n        if (copyType == 'beTxt') {\n            node.parents('tr').find('td[data-edit]').each(function () {\n                inputList.push($(this).text())\n            });\n        } else if (copyType == 'beVal') {\n            node.parents('tr').find('td[data-edit]').each(function () {\n                inputList.push($(this).find('input').val())\n            });\n        }\n    };\n    /**\n     * 此方法用于行间的黏贴按钮保存使用\n     * @param node 点击调用此方法的dom元素\n     */\n    var toPasteFn = function (node) {\n        //console.log(inputList);\n        node.parents('tr').find('td[data-edit]').each(function (i) {\n            $(this).find('input').val(inputList[i]);\n        });\n\n    };\n\n    /**\n     *  单一按钮传参,需要将按钮本身和父级dom传进来\n     * @param node 点击调用此方法的dom元素\n     * @param parentNode 内含input，select，textarea的父级dom节点\n     * @returns {*}\n     */\n    var singleBtnFn = function (node, parentNode) {\n        var dataItem = node.data();\n        parentNode.find('textarea').each(function () {\n            dataKey = $(this).attr('name');\n            dataVal = $(this).val();\n            dataItem[dataKey] = dataVal;\n        });\n        parentNode.find('input[type=text]').each(function () {\n            dataKey = $(this).attr('name');\n            dataVal = $(this).val();\n            dataItem[dataKey] = dataVal;\n        });\n        parentNode.find('input[type=checkbox]:checked').each(function () {\n            var self = $(this);\n            dataKey = self.attr('name');\n            dataVal = self.val();\n            dataValArr.push(dataVal);\n            dataItem[dataKey] = dataValArr.join(',');\n        });\n        parentNode.find('input[type=radio]:checked').each(function () {\n            var self = $(this);\n            dataKey = self.attr('name');\n            dataVal = self.val();\n            dataItem[dataKey] = dataVal;\n        });\n        parentNode.find('select').find('option:selected').each(function () {\n            var self = $(this);\n            if (self.val()) {\n                var dataVal = self.data();\n                for (var i in dataVal) {\n                    dataItem[i] = dataVal[i];\n                }\n            }\n        });\n        return dataItem;\n    };\n\n\n    /**\n     * 进入页面时查询商品导入状态,showResult:是否展示导入结果弹窗\n     */\n    var importStatusFn = function (showResult) {\n        $.ajax({\n            url: urls.importStatus,\n            type: 'get',\n            timeout: 2000,\n            success: function (data) {\n                callbacks.uploadStatusCallback(data, showResult);\n            },\n            error: function (data) {\n                clearIntervalIfNotNull(intervals.skuInterval);\n            }\n        });\n    };\n    /**\n     * 进入页面时查询图片导入状态,showResult:是否展示导入结果弹窗\n     */\n    var importImgsStatusFn = function (showResult) {\n        $.ajax({\n            url: urls.importImgsStatus,\n            type: 'get',\n            timeout: 2000,\n            success: function (data) {\n                callbacks.uploadImgsStatusCallback(data, showResult);\n            },\n            error: function () {\n                clearIntervalIfNotNull(intervals.imgInterval);\n            }\n        });\n    };\n    /**\n     * clearInterval\n     */\n    var clearIntervalIfNotNull = function (interval) {\n        if (interval) {\n            clearInterval(interval);\n        }\n    }\n\n    /**\n     * 商品管理 - 根据商品状态切换tab_card按钮状态\n     */\n    var changeTabButtonStatesFn = function () {\n        var wareStatus = $('[name=\"wareStatus\"] option:selected').attr('data-ware-status');\n        var parent = $('#b_product_state_tab');\n        var batchBtn = parent.find('.ingress_goods_btn');\n        var importBtn = parent.find('.import_goods_btn');\n        var delBtn = parent.find('.item_del_btn');\n        switch (Number(wareStatus)) {\n            case 1:\n                //待审核\n                batchBtn.hide();\n                importBtn.hide();\n                delBtn.show();\n                break;\n            case 2:\n                //正在售卖（上架）\n                batchBtn.show();\n                batchBtn.removeClass('btngray').addClass('btnblue').html('批量下架').attr('id', 'batchIngressBtn').data('status', '3');\n                importBtn.html('导入下架').attr('id', 'batchImportDownBtn').data('status', '3').show();\n                delBtn.hide();\n                break;\n            case 3:\n                //下架\n                batchBtn.show();\n                batchBtn.removeClass('btngray').addClass('btnblue').html('批量上架').attr('id', 'batchIngressBtn').data('status', '2');\n                importBtn.html('导入上架').attr('id', 'batchImportUpBtn').data('status', '2').show();\n                delBtn.show();\n                break;\n            case 8:\n                //已驳回\n                batchBtn.hide();\n                importBtn.hide();\n                delBtn.show();\n                break;\n            default:\n                //全部或其他\n                batchBtn.show();\n                batchBtn.removeClass('btnblue').addClass('btngray').html('批量上/下架').attr('id', '');\n                importBtn.hide();\n                delBtn.show();\n                break;\n        }\n    }\n\n\n\n    /********************************调用函数的分割线*************************************************/\n\n\n\n\n\n    /* 分页通用 */\n\n    $('.wrapper').delegate('#pageIndexOrder .pageNum', 'click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        var index = 'index';\n        var thisUrl = self.parents('#pageIndexOrder').data('baseurl');\n        userJson[index] = self.text();\n        self.parents('ul').find('.current').removeClass('current');\n        self.addClass('current');\n        self.packajax({\n            ajax_url: thisUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n    //上一页\n    $('.wrapper').delegate('#pageIndexOrder ul li.frontPage', 'click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        var index = 'index';\n        var thisUrl = self.parents('#pageIndexOrder').data('baseurl');\n        userJson[index] = parseInt(self.parents('ul').find('.current').text()) - 1;\n        self.parents('ul').find('.current').removeClass('current');\n        self.parents('#pageIndexOrder').find('li').eq(userJson[index]).addClass('current');\n        self.packajax({\n            ajax_url: thisUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n    //下一页\n    $('.wrapper').delegate('#pageIndexOrder ul li.nextPage', 'click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        var index = 'index';\n        var thisUrl = self.parents('#pageIndexOrder').data('baseurl');\n        userJson[index] = parseInt(self.parents('ul').find('.current').text()) + 1;\n        self.parents('ul').find('.current').removeClass('current');\n        self.parents('#pageIndexOrder').find('li').eq(userJson[index]).addClass('current');\n        self.packajax({\n            ajax_url: thisUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n    //分页点击跳转\n    $('.wrapper').delegate('#pageIndexOrder .smallbtn', 'click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        var index = 'index';\n        var thisUrl = self.parents('#pageIndexOrder').data('baseurl');\n        userJson[index] = self.siblings('.page_skip').find('input').val();\n        self.parents('#pageIndexOrder').find('ul').find('.current').removeClass('current');\n        self.parents('#pageIndexOrder').find('li').eq(userJson[index]).addClass('current');\n        self.packajax({\n            ajax_url: thisUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n\n\n    /*弹窗上的分页通用*/\n\n    $('.popup').delegate('#pageIndexOrder .pageNum', 'click', function () {\n        var self = $(this);\n        var userJson = searchKeyPopupFn(self);\n        var index = 'index';\n        var thisUrl = self.parents('#pageIndexOrder').data('baseurl');\n        var thisPin = self.parents('#pageIndexOrder').data('user-pin');\n        var thisPurchaseId = self.parents('#pageIndexOrder').data('purchase-id');\n        if (thisPin) {\n            userJson['userPin'] = thisPin;\n            userJson['PurchaseId'] = thisPurchaseId;\n        }\n        userJson[index] = self.text();\n        self.parents('ul').find('.current').removeClass('current');\n        self.addClass('current');\n        self.packajax({\n            ajax_url: thisUrl,\n            user: userJson,\n            succ: callbacks.forDataCallback\n        });\n    });\n    //弹窗上一页\n    $('.popup').delegate('#pageIndexOrder ul li.frontPage', 'click', function () {\n        var self = $(this);\n        var userJson = searchKeyPopupFn(self);\n        var index = 'index';\n        var thisUrl = self.parents('#pageIndexOrder').data('baseurl');\n        var thisPin = self.parents('#pageIndexOrder').data('user-pin');\n        var thisPurchaseId = self.parents('#pageIndexOrder').data('purchase-id');\n        if (thisPin) {\n            userJson['userPin'] = thisPin;\n            userJson['PurchaseId'] = thisPurchaseId;\n        }\n        userJson[index] = parseInt(self.parents('ul').find('.current').text()) - 1;\n        self.parents('ul').find('.current').removeClass('current');\n        self.parents('#pageIndexOrder').find('li').eq(userJson[index]).addClass('current');\n        self.packajax({\n            ajax_url: thisUrl,\n            user: userJson,\n            succ: callbacks.forDataCallback\n        });\n    });\n    //弹窗下一页\n    $('.popup').delegate('#pageIndexOrder ul li.nextPage', 'click', function () {\n        var self = $(this);\n        var userJson = searchKeyPopupFn(self);\n        var index = 'index';\n        var thisUrl = self.parents('#pageIndexOrder').data('baseurl');\n        var thisPin = self.parents('#pageIndexOrder').data('user-pin');\n        var thisPurchaseId = self.parents('#pageIndexOrder').data('purchase-id');\n        if (thisPin) {\n            userJson['userPin'] = thisPin;\n            userJson['PurchaseId'] = thisPurchaseId;\n        }\n        userJson[index] = parseInt(self.parents('ul').find('.current').text()) + 1;\n        self.parents('ul').find('.current').removeClass('current');\n        self.parents('#pageIndexOrder').find('li').eq(userJson[index]).addClass('current');\n        self.packajax({\n            ajax_url: thisUrl,\n            user: userJson,\n            succ: callbacks.forDataCallback\n        });\n    });\n    //弹窗分页点击跳转\n    $('.popup').delegate('#pageIndexOrder .smallbtn', 'click', function () {\n        var self = $(this);\n        var userJson = searchKeyPopupFn(self);\n        var index = 'index';\n        var thisUrl = self.parents('#pageIndexOrder').data('baseurl');\n        var thisPin = self.parents('#pageIndexOrder').data('user-pin');\n        var thisPurchaseId = self.parents('#pageIndexOrder').data('purchase-id');\n        if (thisPin) {\n            userJson['userPin'] = thisPin;\n            userJson['PurchaseId'] = thisPurchaseId;\n        }\n        userJson[index] = self.siblings('.page_skip').find('input').val();\n        self.parents('#pageIndexOrder').find('ul').find('.current').removeClass('current');\n        self.parents('#pageIndexOrder').find('li').eq(userJson[index]).addClass('current');\n        self.packajax({\n            ajax_url: thisUrl,\n            user: userJson,\n            succ: callbacks.forDataCallback\n        });\n    });\n\n\n\n    /**\n     * 账期管理\n     */\n    $('#standingBookSearchBtn').on('click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        self.packajax({\n            ajax_url: urls.standingBookSearch,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n\n\n    /**\n     * 调整记录查询\n     */\n    $('#paymentSearchBtn').on('click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        self.packajax({\n            ajax_url: urls.paymentSearch,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n    /**\n     * 逾期查询\n     */\n    $('#scopeSearchBtn').on('click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        self.packajax({\n            ajax_url: urls.scopeSearch,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n\n\n\n\n    //商品-协议价-编辑-test\n    $('.main_content').delegate('.edit_discount', 'click', function () {\n        var $this = $(this);\n        toEditFn($this);\n        $this.parents('td').html('<div class=\"btnblue smallbtn inline save_discount\">保存</div>')\n    });\n    //商品-协议价-保存-test\n    $('.main_content').delegate('.save_discount', 'click', function () {\n        var $this = $(this);\n        var parentNode = $this.parents('tr');\n        var userJson = singleBtnFn($this, parentNode);\n        toSaveFn($this, true, urls.agreementPriceDModifyUrl, userJson, callbacks.showPopupCallback);\n        //$this.parents('td').html('<div class=\"btnblue medbtn inline del_discount\">删除</div> <div class=\"btnblue medbtn inline edit_discount\">修改</div>')\n    });\n    //商品模块-协议价删除\n    $('.main_content').delegate('.del_discount', 'click', function () {\n        var self = $(this);\n        var userJson = {};\n        var userJsonStr = '';\n        var skuids = [];\n        var nowRow = $(this).parents('.shop_table_list').find('tr').size() - 1;\n        var thisRow = parseInt($(this).parents('td').attr('rowspan'));\n\n        if (confirm('是否删除？')) {\n            skuids.push($(this).parents('tr').data());\n            for (var i = 0; i < thisRow - 1; i++) {\n                skuids.push($(this).parents('tr').next().data());\n                $(this).parents('tr').next().remove()\n            }\n            $(this).parents('tr').remove();\n            userJson['deletMessage'] = JSON.stringify(skuids);\n            self.packajax({\n                ajax_url: urls.agreementPriceDeleteUrl,\n                user: userJson,\n                succ: callbacks.showPopupCallback\n            });\n        }\n\n    });\n    /**\n     * 商品区域价：编辑、复制、粘贴、保存 js\n     * start\n     */\n    //编辑\n    $('.main_content').delegate('.edit_area_price', 'click', function () {\n        var $this = $(this);\n        toEditFn($this);\n        $this.addClass('save');\n        $this.siblings('.copy_area_price').addClass('active');\n    });\n    //复制\n    $('.main_content').delegate('.copy_area_price.active', 'click', function () {\n        var $this = $(this);\n        if ($this.siblings('.save').length > 0) {\n            toCopyFn($this, 'beVal');\n        } else {\n            toCopyFn($this, 'beTxt');\n        }\n        $this.parents('table').find('.paste_area_price').addClass('active');\n    });\n    //粘贴\n    $('.main_content').delegate('.paste_area_price.active', 'click', function () {\n        var $this = $(this);\n        toEditFn($this);\n        $this.siblings('.edit_area_price').addClass('save');\n        toPasteFn($this);\n    });\n    //保存\n    $('.main_content').delegate('.edit_area_price.save', 'click', function () {\n        var $this = $(this);\n        var parentNode = $this.parents('tr');\n        var userJson = singleBtnFn($this, parentNode);\n        toSaveFn($this, true, urls.agreementPriceUpdataUrl, userJson, callbacks.showPopupCallback);\n        $this.removeClass('save');\n    });\n\n    /**\n     * 商品区域价：编辑、复制、粘贴、保存 js\n     * end\n     */\n\n    //供应商 - 增加商品 - 选择类目\n    $('.category_list').category({\n        url: '/vender/b/product/category.json',\n        select: false\n    });\n    //从店铺导入-查询-类目\n    $('.sort_select').category({\n        url: '/vender/b/product/category.json',\n        nodata: 'hidden'\n    });\n\n\n    $('#add_goods_s2').on('click', function () {\n        var sort3 = $('.sort3 .current')\n        if (sort3.length === 1) {\n            window.location.href = urls.editPageUrl + '?catId1=' + $('.sort1 .current').attr('cid') + '&catId2=' + $('.sort2 .current').attr('cid') + '&catId3=' + $('.sort3 .current').attr('cid');\n        } else {\n            alert('请选择三级类目')\n        }\n    });\n    /**\n     * 商品模块\n     * BEGIN\n     */\n    //BEGIN\n    //供应商 - 我的产品库 - 搜索\n    $('#b_product_lib_search_btn').on('click', function () {\n        var self = $(this);\n        changeTabButtonStatesFn();\n        var userJson1 = searchKeyFn(self);\n        var userJsonLine = $('.filter_con').find('span.current').data();\n        var userJson = $.extend({}, userJson1, userJsonLine);\n        self.packajax({\n            ajax_url: urls.myProductLibUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n    //供应商 - 商品sku - 搜索\n    $('#b_ware_sku_search_btn').on('click', function () {\n        var self = $(this);\n        var userJson1 = searchKeyFn(self);\n        var userJsonLine = $('.filter_con').find('span.current').data();\n        var userJson = $.extend({}, userJson1, userJsonLine);\n        self.packajax({\n            ajax_url: urls.myProductSKULibUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n    //供应商 - 我的产品库 - 搜索 filter_con\n    $('.filter_con').find('span').on('click', function () {\n        var self = $(this);\n        var userJson1 = searchKeyFn(self);\n        var userJsonLine = self.data();\n        var userJson = $.extend({}, userJson1, userJsonLine);\n        if (userJson) {\n            $('.filter_con').find('.current').removeClass('current');\n            self.addClass('current');\n            self.packajax({\n                ajax_url: urls.myProductLibUrl,\n                user: userJson,\n                succ: callbacks.searchCallback\n            });\n        }\n\n    });\n\n    //供应商 - 我的产品库 - 分页\n    $('.wrapper').delegate('#b_page_index_my_product_lib ul li', 'click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        var index = 'index';\n        userJson[index] = self.text();\n        self.packajax({\n            ajax_url: urls.myProductLibUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n    $('.wrapper').delegate('#b_page_index_my_product_lib .smallbtn', 'click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        var index = 'index';\n        userJson[index] = self.siblings('.page_skip').find('input').val();\n        self.packajax({\n            ajax_url: urls.myProductLibUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n\n    //供应商 - 我的产品库 - 上架\n    $('.data-return').delegate('.b_product_up_shelf_btn', 'click', function () {\n        var self = $(this);\n        var userJson = dataItemFn(self);\n        self.packajax({\n            ajax_url: urls.productUpShelfUrl,\n            user: userJson,\n            succ: callbacks.showPopupCallback\n        });\n    });\n    //供应商 - 我的产品库 - 下架\n    $('.data-return').delegate('.b_product_down_shelf_btn', 'click', function () {\n        var self = $(this);\n        var userJson = dataItemFn(self);\n        self.packajax({\n            ajax_url: urls.productDownShelfUrl,\n            user: userJson,\n            succ: callbacks.showPopupCallback\n        });\n    });\n\n    //供应商 - 我的产品库 - 限销区域 - 编辑\n    $('.area_edit_btn').on('click', function () {\n        var self = $(this);\n        var userJsonArr = batchDataFn(self);\n        var wareIds = userJsonArr.join(',');\n        if (wareIds.length) {\n            window.location.href = '/vender/b/product/editLimit?wareId=' + wareIds;\n        } else {\n            callbacks.showPopup('商品不能为空，请选择后重新操作！', false);\n        }\n    });\n\n    //供应商 - 我的产品库 - 限销区域 - 删除\n    $('.area_del_btn').on('click', function () {\n        var self = $(this);\n        var userJsonArr = batchDataFn(self);\n        var wareIds = userJsonArr.join(',');\n        if (wareIds.length) {\n            var userJson = {};\n            userJson['wareIds'] = userJsonArr.join(',');\n            self.packajax({\n                ajax_url: urls.areaDelUrl,\n                user: userJson,\n                succ: function (r) {\n                    if (r && r.result) {\n                        callbacks.showPopup('删除成功！', true);\n                    } else {\n                        callbacks.showPopup(r.messages || '删除失败，请稍后再试！', false);\n                    }\n                },\n                error: function (r) {\n                    callbacks.showPopup('系统繁忙，请稍后再试！', false);\n                }\n            });\n        } else {\n            callbacks.showPopup('商品不能为空，请选择后重新操作！', false);\n        }\n    });\n\n    //供应商 - 我的产品库 - 模板下载\n\n    $('#temp_download_btn').on('click', function () {\n        //加载模板下载对话框\n        var tempObjects = {\n            templates: [{\n                    title: '京东医药城养生保健导入模板',\n                    fileLink: '//yaojingcai.jd.com/yangsheng.xlsx'\n                },\n                {\n                    title: '京东医药城药品导入模板',\n                    fileLink: '//yaojingcai.jd.com/yaopin.xlsx'\n                },\n                {\n                    title: '京东医药城医疗器械导入模板 ',\n                    fileLink: '//yaojingcai.jd.com/qixie.xlsx'\n                },\n                {\n                    title: '商品批量上下架导入模板',\n                    fileLink: '//yaojingcai.jd.com/shangxiajia.xlsx'\n                }\n            ]\n        };\n        var source = $('#template_temp_download').html();\n        var template = Handlebars.compile(source);\n        var html = template(tempObjects);\n        $('.popup').html(html).show();\n    });\n\n    //供应商 - 我的产品库 - 商品导入\n\n    //页面初始化，获取导入状态\n    importStatusFn();\n    $('#importFile').change(function () {\n        //显示文件路径\n        $('.popup_fileupload .file_txt').html($('#importFile').val());\n    });\n\n    $('.popup').delegate('#popup_item_import_btn', 'click', function () {\n        if ($(this).hasClass('btngray') || $('#importFile').val().length == 0) return;\n        $(this).addClass('btngray');\n        //异步加载jquery.form.js\n        if (typeof $.fn.ajaxSubmit == 'undefined') {\n            $.getScript('//yaojingcai.jd.com/js/jquery.form.min.js', function () {\n                $('#importForm').submit();\n            });\n        } else {\n            $('#importForm').submit();\n        }\n\n    });\n    $('.btnarea').delegate('.triangle', 'click', function () {\n        if ($(this).next().attr('id') == 'item_import_btn') {\n            //商品导入提示\n            callbacks.uploadSuccessPartCallback(null, true);\n        } else {\n            //图片导入提示\n            callbacks.uploadImgsSuccessPartCallback(null, true);\n        }\n    });\n\n    $('#importForm').submit(function () {\n        //商品导入操作\n        callbacks.uploadLoadingDisplay();\n        $(this).ajaxSubmit({\n            type: 'post',\n            url: urls.importSkus,\n            timeout: 30000,\n            success: function (obj) {\n                callbacks.uploadLoadingCallback();\n                if (obj) {\n                    obj = $.parseJSON(obj);\n                }\n                // HS.modal.progress.close();\n                if (obj.isSuccess) {\n                    importStatus.skuStatus = 1;\n                    callbacks.uploadStatusCallback(1);\n                } else {\n                    //导入失败\n                    callbacks.uploadStatusCallback(importStatus.skuStatus);\n                    callbacks.uploadFailedCallback(obj.msg);\n                }\n            },\n            error: function () {\n                callbacks.uploadStatusCallback(-999);\n                //callbacks.uploadFailedCallback();\n                callbacks.uploadFailedCallback('系统繁忙，请稍后再试！');\n            }\n        });\n        return false; //不刷新页面\n    });\n    $('#item_import_btn').on('click', function () {\n        if (importStatus.skuStatus == 1) {\n            //导入中\n            callbacks.uploadLoadingDisplay();\n            callbacks.uploadLoadingCallback();\n        } else {\n            //导入完成\n            var source = $('#template_item_import1').html();\n            var template = Handlebars.compile(source);\n            var html = template();\n            $('.popup').html(html).show();\n            $('#importFile').val('');\n        }\n    });\n\n    //供应商 - 我的产品库 - 图片导入\n\n    //页面初始化，获取导入状态\n    importImgsStatusFn();\n    $('#importImages').change(function () {\n        //显示文件路径\n        $('.popup_fileupload .file_txt').html($('#importImages').val());\n    });\n\n    $('.popup').delegate('#popup_image_import_btn', 'click', function () {\n        if ($(this).hasClass('btngray') || $('#importImages').val().length == 0) return;\n        $(this).addClass('btngray');\n        //异步加载jquery.form.js\n        if (typeof $.fn.ajaxSubmit == 'undefined') {\n            $.getScript('//yaojingcai.jd.com/js/jquery.form.min.js', function () {\n                $('#importImageForm').submit();\n            });\n        } else {\n            $('#importImageForm').submit();\n        }\n\n    });\n    $('#importImageForm').submit(function () {\n        //图片导入操作\n        callbacks.uploadLoadingDisplay(true);\n        $(this).ajaxSubmit({\n            type: 'post',\n            url: urls.importImgs,\n            timeout: 30000,\n            success: function (obj) {\n                // HS.modal.progress.close();\n                callbacks.uploadLoadingCallback(true);\n                if (obj) {\n                    obj = $.parseJSON(obj);\n                }\n                if (obj.isSuccess) {\n                    importStatus.imgStatus = 1;\n                    callbacks.uploadImgsStatusCallback(1);\n                } else {\n                    //导入失败\n                    callbacks.uploadImgsStatusCallback(importStatus.skuStatus);\n                    callbacks.uploadFailedCallback(obj.msg, true);\n                }\n            },\n            error: function (err) {\n                callbacks.uploadImgsStatusCallback(-999);\n                //callbacks.uploadFailedCallback('',true);\n                callbacks.uploadFailedCallback('系统繁忙，请稍后再试！', true);\n            }\n        });\n        return false; //不刷新页面\n    });\n    $('#item_images_btn').on('click', function () {\n        if (importStatus.imgStatus == 1) {\n            //导入中\n            callbacks.uploadLoadingDisplay(true);\n            callbacks.uploadLoadingCallback(true);\n        } else {\n            //导入完成\n            var source = $('#template_image_import').html();\n            var template = Handlebars.compile(source);\n            var html = template();\n            $('.popup').html(html).show();\n            $('#importImages').val('');\n        }\n    });\n    //供应商 - 我的产品库 - 删除（ 已下架/已驳回 ）\n    $('.tab_card').delegate('#itemDelBtn', 'click', function () {\n        var self = $(this);\n        var userJsonArr = batchDataFn(self);\n        //非下架或非驳回商品不能删除\n        var canDelete = true;\n        for (var i = 0; i < userJsonArr.length; i++) {\n            var wareState = Number(self.parents('.tab_card').next().find('[data-ids=\"' + userJsonArr[i] + '\"]').attr('data-ware-state'));\n            if (wareState == 2) {\n                callbacks.showPopup('已上架商品不能删除，请取消选择后重新操作！', false);\n                return;\n            }\n        }\n        var userJson = {};\n        userJson = self.data();\n        userJson['ids'] = userJsonArr.join(',');\n        self.packajax({\n            ajax_url: urls.itemDelUrl,\n            user: userJson,\n            succ: callbacks.showPopupCallback\n        });\n    });\n\n    //供应商 - 我的产品库 - 批量上/下架\n    $('.tab_card').delegate('#batchIngressBtn', 'click', function () {\n        var self = $(this);\n        var userJsonArr = batchDataFn(self);\n        var userJson = {};\n        userJson = self.data();\n        userJson['ids'] = userJsonArr.join(',');\n        self.packajax({\n            ajax_url: urls.batchIngressShelfUrl,\n            user: userJson,\n            succ: callbacks.showPopupCallback\n        });\n    });\n    //供应商 - 我的产品库 - 导入上/下架\n    $('.tab_card').delegate('#batchImportUpBtn', 'click', function () {\n        var source = $('#template_item_import6').html();\n        var template = Handlebars.compile(source);\n        var html = template();\n        $('.popup').html(html).show();\n        $('#importUpFile').val('');\n    });\n    $('.tab_card').delegate('#batchImportDownBtn', 'click', function () {\n        var source = $('#template_item_import5').html();\n        var template = Handlebars.compile(source);\n        var html = template();\n        $('.popup').html(html).show();\n        $('#importDownFile').val('');\n    });\n    $('#importDownFile,#importUpFile').change(function () {\n        //显示文件路径\n        $('.popup_fileupload .file_txt').html($(this).val());\n    });\n    $('.popup').delegate('#popup_item_down_btn', 'click', function () {\n        //异步加载jquery.form.js\n        if (typeof $.fn.ajaxSubmit == 'undefined') {\n            $.getScript('//yaojingcai.jd.com/js/jquery.form.min.js', function () {\n                $('#importDownForm').submit();\n            });\n        } else {\n            $('#importDownForm').submit();\n        }\n\n    });\n    $('.popup').delegate('#popup_item_up_btn', 'click', function () {\n        //异步加载jquery.form.js\n        if (typeof $.fn.ajaxSubmit == 'undefined') {\n            $.getScript('//yaojingcai.jd.com/js/jquery.form.min.js', function () {\n                $('#importUpForm').submit();\n            });\n        } else {\n            $('#importUpForm').submit();\n        }\n\n    });\n    $('#importUpForm').submit(function () {\n        callbacks.importCallback('导入上架', '上传执行中');\n        $('.popup .btnarea1').hide();\n        //导入上架操作\n        $(this).ajaxSubmit({\n            type: 'post',\n            url: urls.importUpShelfUrl,\n            timeout: 30000,\n            success: function (obj) {\n                obj = $.parseJSON(obj);\n                if (obj && obj.isSuccess) {\n                    if (parseInt(obj.successNum) == parseInt(obj.totalNum)) {\n                        $('.popup').find('.tips_red').html('导入成功').removeClass('tips_red').addClass('tips_blue');\n                    } else {\n                        var source = $('#template_item_import3').html();\n                        var template = Handlebars.compile(source);\n                        var html = template(obj);\n                        $('.popup').html(html);\n                        obj.repeatRows.map(function (item) {\n                            $('.error_list').append('<li>行 ' + item + ' 失败</li>');\n                        });\n                        obj.failRows.map(function (item) {\n                            $('.error_list').append('<li>行 ' + item + ' 失败</li>');\n                        });\n                        obj.parseFailRows.map(function (item) {\n                            $('.error_list').append('<li>行 ' + item + ' 失败</li>');\n                        });\n                        $('.popup .btnarea1').show();\n                        $('.popup').show();\n                    }\n                } else {\n                    $('.popup').find('.tips_red').html('系统繁忙，请稍后再试！');\n                    $('.popup .btnarea1').show();\n                }\n            },\n            error: function (err) {\n                $('.popup').find('.tips_red').html('系统繁忙，请稍后再试！');\n                $('.popup .btnarea1').show();\n            }\n        });\n        return false; //不刷新页面\n    });\n    $('#importDownForm').submit(function () {\n        callbacks.importCallback('导入下架', '上传执行中');\n        $('.popup .btnarea1').hide();\n        //导入上架操作\n        $(this).ajaxSubmit({\n            type: 'post',\n            url: urls.importDownShelfUrl,\n            timeout: 30000,\n            success: function (obj) {\n                obj = $.parseJSON(obj);\n                if (obj && obj.isSuccess) {\n                    if (parseInt(obj.successNum) == parseInt(obj.totalNum)) {\n                        $('.popup').find('.tips_red').html('导入成功').removeClass('tips_red').addClass('tips_blue');\n                    } else {\n                        var source = $('#template_item_import3').html();\n                        var template = Handlebars.compile(source);\n                        var html = template(obj);\n                        $('.popup').html(html);\n                        obj.repeatRows.map(function (item) {\n                            $('.error_list').append('<li>行 ' + item + ' 失败</li>');\n                        });\n                        obj.failRows.map(function (item) {\n                            $('.error_list').append('<li>行 ' + item + ' 失败</li>');\n                        });\n                        obj.parseFailRows.map(function (item) {\n                            $('.error_list').append('<li>行 ' + item + ' 失败</li>');\n                        });\n                        $('.popup .btnarea1').show();\n                        $('.popup').show();\n                    }\n                } else {\n                    $('.popup').find('.tips_red').html('系统繁忙，请稍后再试！');\n                    $('.popup .btnarea1').show();\n                }\n            },\n            error: function (err) {\n                $('.popup').find('.tips_red').html('系统繁忙，请稍后再试！');\n                $('.popup .btnarea1').show();\n            }\n        });\n        return false; //不刷新页面\n    });\n    //供应商 - 编辑区域 - 保存\n    $('.data-return').delegate('.b_area_cat_save_btn', 'click', function () {\n        var self = $(this);\n        var userJson = dataItemFn(self);\n        self.packajax({\n            ajax_url: urls.editAreaCatUrl,\n            user: userJson,\n            succ: function (data) {\n                callbacks.onPopupCallback1.call(self, data)\n            }\n        });\n    });\n\n    //商品模块-搜索区域价格按钮（供应商）\n    $('#areaPriceSearchBtn').on('click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        self.packajax({\n            ajax_url: urls.areaPriceSearchUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n\n    //商品模块-协议价格查询\n    $('#discountSearchBtn').on('click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        self.packajax({\n            ajax_url: urls.agreementPriceSearchUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n\n\n    /**\n     * 商品模块\n     * END\n     */\n\n    /**\n     * 采购单模块\n     * BEGIN\n     */\n    //BEGIN\n    //采购模块-搜索按钮（供应商）\n    $('#venderBPurchaseSearchBtn').on('click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        self.packajax({\n            ajax_url: urls.venderBPurchaseQueryUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n    //拒绝\n    $('.wrapper').delegate('.disagree_purchase_btn', 'click', function () {\n        var self = $(this);\n        var parentNode = self.parents('.main_content');\n        var userJson = singleBtnFn(self, parentNode);\n        self.packajax({\n            ajax_url: urls.venderBDisagreePurchaseUrl,\n            user: userJson,\n            succ: callbacks.showPopupCallback\n        });\n    });\n    //审核\n    $('.wrapper').delegate('.audit_purchase_btn', 'click', function () {\n        var self = $(this);\n        var parentNode = self.parents('.main_content');\n        var userJson = singleBtnFn(self, parentNode);\n        self.packajax({\n            ajax_url: urls.venderBAuditPurchaseUrl,\n            user: userJson,\n            succ: callbacks.showPopupCallback\n        });\n    });\n    //展示商品\n    $('.wrapper').delegate('.add_purchase_order_sku_btn', 'click', function () {\n        var self = $(this);\n        var parentNode = self.parents('.main_content');\n        var userJson = singleBtnFn(self, parentNode);\n        self.packajax({\n            ajax_url: urls.venderBShowProductUrl,\n            user: userJson,\n            succ: callbacks.showPopupCallback\n        });\n    });\n    //搜索商品\n    $('.popup').delegate('.vender_search_purchase_product_btn', 'click', function () {\n        var self = $(this);\n        var userJson = searchKeyPopupFn(self);\n        self.packajax({\n            ajax_url: urls.venderBQueryProductUrl,\n            user: userJson,\n            succ: callbacks.forDataCallback\n        });\n    });\n\n    $('.popup').delegate('.reject_purchase_btn', 'click', function () {\n        var self = $(this);\n        var userJson = popupTxtFn(self);\n        var allInput = self.parents('.popup').find('textarea');\n        self.checkForm({\n            node: allInput,\n            errorTips: 'border',\n            succ: function () {\n                self.packajax({\n                    ajax_url: urls.venderBRejectPurchaseUrl,\n                    user: userJson,\n                    succ: function (data) {\n                        callbacks.onPopupCallback1.call(self, data)\n                    }\n                });\n            }\n        });\n\n    });\n\n\n    //保存order\n    $('.wrapper').delegate('.modify_purchase_order_btn', 'click', function () {\n        var self = $(this);\n        var parentNode = self.parents('.order_detail_part');\n        var userJson = singleBtnFn(self, parentNode);\n        self.packajax({\n            ajax_url: urls.venderBModifyPurchseOrderUrl,\n            user: userJson,\n            succ: callbacks.showPopupCallback\n        });\n    });\n    //编辑sku\n    $('.wrapper').delegate('.edit_purchase_sku_btn', 'click', function () {\n        var $this = $(this);\n        toEditFn($this);\n        $this.parents('td').html('<div class=\"btnblue smallbtn inline save_purchase_sku_btn\">保存</div>')\n    });\n    //保存sku\n    $('.wrapper').delegate('.save_purchase_sku_btn', 'click', function () {\n        var self = $(this);\n        var parentNode = self.parents('tr'); //父级tr\n        var userJson = singleBtnFn(self, parentNode); //拼装数据\n        var skuNumDom = parentNode.find('input[name=skuNum]'); //采购数量dom\n        var discountDom = parentNode.find('input[name=perSkuReduce]'); //优惠金额dom\n        var totalNumDom = parentNode.find('.total_num'); //总价dom\n        var eachPriceDom = parentNode.find('.each_price').find('input'); //采购价dom\n        var skuNum = Number(skuNumDom.val()); //采购数量\n        var eachPrice = Number(eachPriceDom.val()); //采购价\n        var discount = Number(discountDom.val()); //优惠价格\n        var totalNum = skuNum * eachPrice; //总价= 采购数量*采购价\n        var flag = true;\n\n        totalNumDom.html(totalNum); //写入总价\n\n        if (skuNum > 100000) {\n            alert('采购数量不能大于10万');\n            flag = false;\n        }\n        if (totalNum > 1000000) {\n            alert('单个商品采购总价不能大于100万');\n            flag = false;\n        }\n        if (discount > totalNum) {\n            alert('优惠价不能大于总价');\n            flag = false;\n        }\n        if (flag) {\n            self.packajax({\n                ajax_url: urls.venderBSavePurchseSkuUrl,\n                user: userJson,\n                succ: callbacks.showPopupCallback\n            });\n        }\n\n    });\n    //删除sku\n    $('.wrapper').delegate('.del_purchase_sku_btn', 'click', function () {\n        var self = $(this);\n        var parentNode = self.parents('tr');\n        var userJson = singleBtnFn(self, parentNode);\n        if (confirm('是否删除')) {\n            self.packajax({\n                ajax_url: urls.venderBDelPurchseSkuUrl,\n                user: userJson,\n                succ: callbacks.showPopupCallback\n            });\n        }\n\n    });\n\n    //采购--订单查询按钮\n    $('#venderBOrderSearchBtn').on('click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        self.packajax({\n            ajax_url: urls.venderBOrderQueryUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n    //上药出库操作\n    $('.wrapper').delegate('.b_stock_out_btn', 'click', function () {\n        var self = $(this);\n        var parentNode = self.parents('.main_content');\n        var userJson = singleBtnFn(self, parentNode);\n        self.packajax({\n            ajax_url: urls.venderBStockoutUrl,\n            user: userJson,\n            succ: callbacks.showPopupCallback\n        });\n    });\n    //END\n\n    /**\n     * 卖家管理\n     */\n    //公司信息-公司资质-经营类目-保证金信息 切换\n    $('#sellerManageDetailBtn ul li').on('click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        self.packajax({\n            ajax_url: urls.bSellerDetailSellersUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n\n    /**\n     * 渠道管理Start-----------------------------------------------------\n     */\n    //渠道管理--经销商列表--经销商列表搜索\n    $('#bSellerInfoSearchBtn').on('click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        self.packajax({\n            ajax_url: urls.bSellerManageSellersUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n\n    //渠道管理--经销商管理--经销商列表--搜索--切换会员状态\n    $('#sellerManageAuthStatusBtn ul li').on('click', function () {\n        var self = $(this);\n        //var userJson1 = tabKeyFn(self);\n        //var userJson2 = searchKeyFn($('#bSellerInfoSearchBtn'));\n        //var userJson = $.extend({},userJson1,userJson2);\n        //for(var key in userJson){\n        //\talert(key + \"...\" + userJson[key]);\n        //}\n\n        var userJson = searchKeyFn($('#bSellerInfoSearchBtn')); //搜索框 +Tab\n        self.packajax({\n            ajax_url: urls.bSellerManageSellersUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n\n\n    //渠道管理--经销商列表--查看--启用经销商\n    $('.filter_search').delegate('#bSellerManageDetailUserStatusOnBtn', 'click', function () {\n        var userJson = {};\n        userJson['userPin'] = $('#userPin').val();\n        var self = $(this);\n        if (confirm('是否启用？')) {\n            self.packajax({\n                ajax_url: urls.bSellerManageDetailUserStatusOnUrl,\n                user: userJson,\n                succ: callbacks.showPopupCallback\n            });\n        }\n        return false; //防止自动刷新\n    });\n\n    //渠道管理--经销商列表--查看--禁用经销商\n    $('.filter_search').delegate('#bSellerManageDetailUserStatusOffBtn', 'click', function () {\n        var userJson = {};\n        userJson['userPin'] = $('#userPin').val();\n        var self = $(this);\n        if (confirm('是否禁用？')) {\n            self.packajax({\n                ajax_url: urls.bSellerManageDetailUserStatusOffUrl,\n                user: userJson,\n                succ: callbacks.showPopupCallback\n            });\n        }\n        return false; //防止自动刷新\n    });\n\n\n    //渠道管理--经销商管理 -- 账期维护 -- 效果\n    $('.account_detail_part .to_set_account').on('click', function () {\n        $('.account_set_item').show();\n        $('.account_detail_part.open_account').hide();\n    });\n    $('.account_detail_part  #amountTotal').on('keyup', function () {\n        var num = parseFloat($('#amountTotal').val()).toFixed(2) - parseFloat($('#amountUsed').text()).toFixed(2);\n        if (!num) {\n            num = '';\n        }\n        if (num < 0) {\n            num = 0;\n        }\n        $('#amountAvailable').text(num);\n    });\n\n    //渠道管理--经销商列表--账期维护--保存账期\n    $('.main_content').delegate('.account_set', 'click', function () {\n\n        //如果“账期状态”是关闭，且数据库中的也是“关闭”，那么不能保存\n        if ($('#amountStatus').val() == 0 && $('#amountStatusOri').val() == 0) {\n            alert('账期已经关闭，不能保存');\n            return false;\n        }\n\n        if (parseFloat($('#amountTotal').val()) < parseFloat($('#amountUsed').text())) {\n            alert('“信用总额”必须大于等于“已用额度”');\n            return false;\n        }\n\n        var self = $(this);\n        var parentCard = self.parents('.account_set_item');\n        var userJson = {};\n        var allInput = parentCard.find('input');\n        var temHtml = '<div class=\"loading\"></div>';\n        $(this).checkForm({\n            node: allInput,\n            errorTips: 'border',\n            succ: function () {\n                userJson = saveTxtFn(self, parentCard);\n                $('body').append(temHtml);\n                self.packajax({\n                    ajax_url: urls.bSellerManageSaveAccountUrl,\n                    user: userJson,\n                    succ: callbacks.showPopupCallback\n                });\n            }\n        });\n    });\n\n\n    //渠道管理--首营认证--首营认证列表搜索--搜索\n    $('#bSellerFirstSearchBtn').on('click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        self.packajax({\n            ajax_url: urls.bSellerFirstSearchUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n\n    //渠道管理--首营认证--首营认证列表搜索--切换审核状态\n    $('#sellerFirstCertiStatusBtn ul li').on('click', function () {\n        var self = $(this);\n        //var userJson1 = tabKeyFn(self);\n        //var userJson2 = searchKeyFn($('#bSellerFirstSearchBtn'));\n        //var userJson = $.extend({},userJson1,userJson2);\n\n        var userJson = searchKeyFn($('#sellerFirstCertiStatusBtn')); //搜索框 + tab\n        self.packajax({\n            ajax_url: urls.bSellerFirstSearchUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n\n\n    //渠道管理--首营认证--编辑审核--审核通过\n    $('.filter_search').delegate('#bSellerManageDetailAuditPassBtn', 'click', function () {\n        var userJson = {};\n        userJson['userPin'] = $('#userPin').val();\n        userJson['mobile'] = $('#mobile').val();\n        userJson['companyName'] = $('#companyName').val();\n        var self = $(this);\n        if (confirm('是否审核通过？')) {\n            self.packajax({\n                ajax_url: urls.bSellerManageDetailAuditPassUrl,\n                user: userJson,\n                succ: callbacks.showPopupCallback\n            });\n        }\n        return false; //防止自动刷新\n    });\n\n    //渠道管理--首营认证--编辑审核--进入驳回资质页面\n    $('.filter_search').delegate('#bSellerManageDetailToAuditDenyBtn', 'click', function () {\n        var userJson = {};\n        userJson['userPin'] = $('#userPin').val();\n        userJson['mobile'] = $('#mobile').val();\n        var self = $(this);\n        self.packajax({\n            ajax_url: urls.bSellerManageDetailToAuditDenyUrl,\n            user: userJson,\n            succ: callbacks.showPopupCallback\n        });\n        return false; //防止自动刷新\n    });\n\n    //渠道管理--首营认证--编辑审核--驳回资质\n    $('.popup').delegate('#bSellerManageDetailAuditDenyBtn', 'click', function () {\n\n        if ($('#auditComment').val() == null || $('#auditComment').val() == '') {\n            alert('请输入驳回建议');\n            return false;\n        }\n\n        var userJson = {};\n        userJson['userPin'] = $('#userPin').val();\n        userJson['mobile'] = $('#mobile').val();\n        userJson['auditComment'] = $('#auditComment').val();\n\n        var self = $(this);\n\n        self.packajax({\n            ajax_url: urls.bSellerManageDetailAuditDenyUrl,\n            user: userJson,\n            succ: callbacks.showPopupCallback\n        });\n\n        return false; //防止自动刷新\n    });\n\n\n    //渠道管理--采购目录维护--经销商列表搜索\n    $('#bSellerWareRelationshipSellersSearchBtn').on('click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        self.packajax({\n            ajax_url: urls.bSellerWareRelationshipSellersSearchUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n\n    //渠道管理--采购目录维护--编辑商品--搜索列表\n    $('#bSellerWareRelationshipEditBtn').on('click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        userJson['userPin'] = $('#userPin').val();\n        self.packajax({\n            ajax_url: urls.bSellerWareRelationshipEditBtnUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n\n    //渠道管理--采购目录维护--编辑商品--编辑\n    $('.main_content').delegate('.edit_channel_catalog_btn', 'click', function () {\n        var $this = $(this);\n        toEditFn($this);\n        $this.parents('td').html('<div class=\"btnblue medbtn inline save_channel_catalog_btn\">保存</div>')\n    });\n\n\n    //渠道管理--采购目录维护--编辑商品--编辑后保存\n    $('.main_content').delegate('.save_channel_catalog_btn', 'click', function () {\n        var userJson = {};\n        var thisTr = $(this).parents('tr');\n        userJson = thisTr.data(); //获取id值\n        userJson['amountScopeId'] = thisTr.find('select:eq(0)').val(); //获取select值\n        var $this = $(this);\n        toSaveFn($this, true, urls.bSellerWareRelationshipUpdateUrl, userJson, callbacks.showPopupCallback);\n        $this.parents('td').html('<div class=\"btnblue medbtn inline edit_channel_catalog_btn\">编辑</div>' + ' <div class=\"btnblue medbtn inline\">删除</div>')\n    });\n\n\n    //渠道管理--采购目录维护--编辑商品--批量删除商品\n    $('.main_content').delegate('#batchDeleteSellerWareRelationshipBtn', 'click', function () {\n\n        var userJson = {};\n        var dataItem = {};\n        var userArray = [];\n        var amountJson = {};\n        var amountArray = [];\n        var dataVal = null;\n        thisNode = $(this).parents('.main_content');\n        var beChecked = thisNode.find('.shop_table_list').find('tr');\n        if (beChecked.length != 0) {\n            var num = 0; //选择条数\n            $.each(beChecked, function (i) {\n                if (i == 0) {\n                    return true; //第一个tr不参与\n                }\n\n                //如果checkbox选中\n                if (beChecked.eq(i).find('input[type=checkbox]').prop('checked')) {\n                    num++; //判断是否有checkbox选中\n                    userJson = beChecked.eq(i).data('ids');\n                    if (userJson) {\n                        userArray.push(userJson);\n                    }\n                }\n            });\n            if (num == 0) { //如果没有选择记录\n                alert('请选择一条或多条记录');\n                return false;\n            }\n            dataVal = userArray.join(',');\n            dataItem['ids'] = dataVal;\n        }\n\n        var self = $(this);\n        //var userJson = pageDataFn(self);\n\n        if (confirm('是否删除')) {\n            self.packajax({\n                ajax_url: urls.bSellerWareRelationshipBatchDeleteUrl,\n                user: dataItem,\n                succ: callbacks.showPopupCallback\n            });\n        }\n        return false; //防止刷新页面\n    });\n\n    //渠道管理--采购目录维护--编辑商品--单个删除商品\n    $('.main_content').delegate('.singleDeleteSellerWareRelationshipBtn', 'click', function () {\n        var self = $(this);\n        var userJson = dataItemFn(self);\n        if (confirm('是否删除')) {\n            self.packajax({\n                ajax_url: urls.bSellerWareRelationshipSingleDeleteUrl,\n                user: userJson,\n                succ: callbacks.showPopupCallback\n            });\n        }\n        return false; //防止刷新页面\n    });\n\n    //渠道管理--采购目录维护--导入新商品--搜索列表\n    $('#bSellerWareRelationshipAddSearchBtn').on('click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        userJson['userPin'] = $('#userPin').val();\n        self.packajax({\n            ajax_url: urls.bSellerWareRelationshipAddSearchBtnUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n\n    //渠道管理--采购目录维护--导入新商品--批量导入商品\n    $('.main_content').delegate('#batchSaveSellerWareRelationshipBtn', 'click', function () {\n\n        var userJson = {};\n        var dataItem = {};\n        var userArray = [];\n        var amountJson = {};\n        var amountArray = [];\n        var dataVal = null;\n        var dataVal2 = null;\n        thisNode = $(this).parents('.main_content');\n        var beChecked = thisNode.find('.shop_table_list').find('tr');\n        if (beChecked.length != 0) {\n            var num = 0; //选择条数\n            var validErr = 0; //错误条数\n            $.each(beChecked, function (i) {\n                if (i == 0) {\n                    return true; //第一个tr不参与\n                }\n\n                //如果checkbox选中\n                if (beChecked.eq(i).find('input[type=checkbox]').prop('checked')) {\n                    num++; //判断是否有checkbox选中\n                    userJson = beChecked.eq(i).data('wareIds');\n                    if (userJson) {\n                        userArray.push(userJson);\n                    }\n                    //获得账期\n                    amountJson = beChecked.eq(i).find('select').val();\n                    if (amountJson) {\n                        amountArray.push(amountJson);\n                    } else {\n                        validErr++;\n                        alert('请选择账期');\n                        return false;\n                    }\n                }\n            });\n            if (num == 0) { //如果没有选择记录\n                alert('请选择一条或多条记录');\n                return false;\n            }\n\n            if (validErr > 0) { //如果验证失败，那么返回false\n                return false;\n            }\n            dataVal = userArray.join(',');\n            dataItem['wareIds'] = dataVal;\n\n            dataVa2 = amountArray.join(',');\n            dataItem['amountScopeIds'] = dataVa2;\n        }\n        var self = $(this);\n        //var userJson = pageDataFn(self);\n        dataItem['userPin'] = $('#userPin').val();\n        var temHtml = '<div class=\"loading\"></div>';\n        if (confirm('是否导入')) {\n            $('body').append(temHtml);\n            self.packajax({\n                ajax_url: urls.bSellerWareRelationshipBatchSaveUrl,\n                user: dataItem,\n                succ: callbacks.showPopupCallback\n            });\n        }\n        return false; //防止刷新页面\n\n    });\n\n    //渠道管理--采购目录维护--导入新商品--单个导入商品\n    $('.main_content').delegate('.singleSaveSellerWareRelationshipBtn', 'click', function () {\n        var self = $(this);\n        var userJson = dataItemFn(self);\n        userJson['userPin'] = $('#userPin').val();\n\n        //获得账期select\n        var amoungtScopeId = $(this).parents('tr').find('select:eq(0)').val();\n        if (amoungtScopeId == undefined || amoungtScopeId == '' || amoungtScopeId == null) {\n            alert('请选择账期');\n            return false;\n        }\n        userJson['amountScopeId'] = amoungtScopeId; //获取select值\n        var temHtml = '<div class=\"loading\"></div>';\n        if (confirm('是否导入')) {\n            $('body').append(temHtml);\n            self.packajax({\n                ajax_url: urls.bSellerWareRelationshipSingleSaveUrl,\n                user: userJson,\n                succ: callbacks.showPopupCallback\n            });\n        }\n        return false; //防止刷新页面\n    });\n\n\n    //渠道管理--会员等级--搜索\n    $('#bSellerCategoryIndexQuery').on('click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        self.packajax({\n            ajax_url: urls.bSellerCategoryIndexQueryUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n    /**\n     * 渠道管理END-----------------------------------------------------\n     */\n\n\n    //结算统计--搜索\n    $('#settleaccountSeacherBnt').on('click', function () {\n        var self = $(this);\n        var userJson = searchKeyFn(self);\n        self.packajax({\n            ajax_url: urls.settleAccountSearchUrl,\n            user: userJson,\n            succ: callbacks.searchCallback\n        });\n    });\n\n\n});\n\n\n\n/**\n * Created by cdxiaqing1 on 2015/12/23.\n */\n\n(function (w, $) {\n    function addGoodsProperty(opts) {\n        /**\n         * 默认参数配置\n         * @type {{node: null}}\n         */\n        var defaultOpts = {\n            node: null\n        };\n        /**\n         * 属性选择容器\n         */\n        this.node = opts.node;\n        this.propertyBox = opts.node.find('.property_item');\n        this.imgBox = opts.node.find('.property_img');\n\n        /**\n         * 当前勾选属性的index\n         */\n        this.propertyIndex = 0;\n        /**\n         * 当前勾选属性的key\n         */\n        this.propertyKey = 0;\n        /**\n         * 当前勾选属性的value\n         */\n        this.propertyVal = 0;\n        /**\n         * 参数合并\n         */\n        this.opts = $.extend(opts);\n\n        this._init();\n    }\n\n\n    $.extend(addGoodsProperty.prototype, {\n        /**\n         * 初始化入口\n         * @private\n         */\n        _init: function () {\n            var self = this;\n            self.proItem = self.propertyBox.find('.property_goods');\n            self.goodsTotal = self.node.find('.goods_total').parents('.item');\n            self._addEvent();\n            self._setIndex();\n            self._propertyManageBind();\n        },\n        /**\n         * 类目tab初始化\n         * @private\n         */\n        _setIndex: function () {\n            var self = this;\n            self.proItem.each(function (index, item) {\n                $(item).attr('index', index);\n            });\n\n        },\n        /**\n         * 渲染\n         * @param data\n         * @param index\n         * @private\n         */\n        _renderProduct: function (data, index) {\n\n        },\n        _propertyManageBind: function () {\n            var self = this;\n            //属性管理 0-新增 1-编辑 2-保存 3-取消\n            self.node.parents('body').delegate('.add_property', 'click', function () {\n                self._attributeManage($(this), 0);\n            });\n\n            self.node.parents('body').delegate('.edit_property', 'click', function () {\n                self._attributeManage($(this), 1);\n            });\n\n            self.node.parents('body').delegate('.save_property', 'click', function () {\n                self._attributeManage($(this), 2);\n            });\n\n            self.node.parents('body').delegate('.cancel_property', 'click', function () {\n                self._attributeManage($(this), 3);\n            });\n        },\n        /**\n         * 事件绑定\n         * @private\n         */\n        _addEvent: function () {\n            var self = this;\n\n            //勾选属性框事件绑定\n            self.proItem.delegate('input[type=checkbox]', 'change', function () {\n                var eachValObj = {};\n                var $this = $(this);\n                var beCheckedLength = self.proItem.find('input[type=checkbox]:checked').length;\n                var propertyName = $this.parents('.checktd').siblings('.sort_tree').find('span').data('value');\n                eachValObj = $this.data();\n\n                self._goodsTotal(beCheckedLength);\n                if ($this.prop('checked')) {\n                    self._newSkuImg(eachValObj, propertyName);\n                } else {\n                    self._delSkuImg(eachValObj);\n                }\n\n\n                var skuDatas = self._getPropertys();\n                skuDatas = self._adapterSkuData(skuDatas);\n                self._renderPropertyTable(skuDatas, $('#ipt_venderType').val() == 'true');\n\n            });\n\n            //添加库存自动计算\n            $('.property_table').delegate('input[name=stock]', 'change', function () {\n                self._addTotal();\n            });\n            //\"上传图片\"（移动至图片上传区域）按钮事件绑定\n            self.node.delegate('.upload_img', 'click', function () {\n                var thisImgArea = $(this).parents('.img_show');\n                self._moveImgArea(thisImgArea);\n            });\n            //上传图片功能\n            self.node.delegate('.upload_img_btn', 'click', function () {\n                $('#uploadImg').on('change', function () {\n                    var uploadData = {\n                        format: $('.img_size').text()\n                    };\n                    var lisLi = $('.upload_dom').prev('.img_show').find('ul').find('li');\n                    if (lisLi.find('img').length < 6) {\n                        self._uploadImg(uploadData);\n                    } else {\n                        alert('最多只能上传6张哦');\n                    }\n                });\n            });\n            //图片空间选择图片\n            self.node.delegate('.image_space_list li:not(.current)', 'click', function () {\n                var $this = $(this);\n                var lisLi = $('.upload_dom').prev('.img_show').find('ul').find('li');\n                if (lisLi.find('img').length < 6) {\n                    var imgSrc = $this.find('img').attr('src');\n                    var lis = lisLi.find('p');\n                    $this.addClass('current');\n                    lis.eq(0).parent('li').html('<div class=\"img-icon\"><i class=\"del\"></i></div><img src=\"' + imgSrc + '\">');\n                } else {\n                    alert('最多只能上传6张哦');\n                }\n            });\n\n            //上传商品資質功能\n            self.node.delegate('.upload_qual_btn', 'click', function () {\n                $('#uploadQual').on('change', function () {\n                    var uploadData = {\n                        format: $('.qual_size').text()\n                    };\n                    var lisLi = $('.upload_qual').prev('.qual_show').find('ul').find('li');\n                    if (lisLi.find('img').length < 10) {\n                        self._uploadQual(uploadData);\n                    } else {\n                        alert('最多只能上传10张哦');\n                    }\n                });\n            });\n            ////sku数据拼装log\n            //self.node.delegate('.property_table th','click',function(){\n            //    console.log(self._getPropertysTableData())\n            //});\n            //保存并铺货\n            self.node.delegate('.b_save_post_goods', 'click', function () {\n                var $this = $(this);\n                var pcDes = self.node.find('.nicEdit-main').html();\n                var userJson = self._commitData(true, true);\n                var allInput = self.node.find('input,select');\n                var temHtml = '<div class=\"loading\"></div>';\n                var imgFlag = true;\n                if ($.trim(pcDes) == '') {\n                    alert('添加商品描述')\n                } else {\n                    $('.img_show').each(function () {\n                        var imgLen = $(this).find('img').length;\n                        if (imgLen < 1 || imgLen > 5) {\n                            imgFlag = false;\n                        }\n                    });\n                    if (imgFlag) {\n                        var spuState = $('#spuState').val();\n                        if (typeof spuState == 'undefined') {\n                            spuState = 2;\n                        }\n                        var isStand = $('#isStand').val();\n                        var typeStand = $('#type').val();\n                        var str = '';\n                        if (isStand == '1') {\n                            str = '/vender/b/standproduct/publish?spuState=' + spuState + '&type=' + typeStand;\n                        } else {\n                            str = '/vender/b/product/publish.htm?spuState=' + spuState;\n                        }\n                        $this.checkForm({\n                            node: allInput,\n                            errorTips: 'border',\n                            failfun: 'scroll',\n                            succ: function () {\n                                $('body').append(temHtml);\n                                $.ajax({\n                                    url: str,\n                                    data: userJson,\n                                    type: 'post',\n                                    success: function (data) {\n                                        $('.loading').remove();\n                                        $('.popup').html(data.messages.popup).show();\n                                    },\n                                    error: function () {\n                                        $('.loading').remove();\n                                        alert('商品保存失败，请稍后再试');\n                                    }\n                                });\n                            }\n                        });\n                    } else if (!imgFlag) {\n                        alert('商品图片至少1张，至多5张哦');\n                    }\n                }\n\n            });\n            //删除上传的图片\n            self.node.find('.property_img').delegate('.img-icon .del', 'click', function () {\n                var $li = $(this).parents('li');\n                var $liIndex = $li.index();\n                var thisSrc = $li.find('img').attr('src');\n                var $list = $('.image_space_list').find('li.current');\n                $list.each(function (i) {\n                    if (thisSrc == $list.eq(i).find('img').attr('src')) {\n                        $list.eq(i).removeClass('current');\n                    }\n                });\n                $li.find('img').remove();\n                if ($liIndex === 0) {\n                    $li.html('<p>主图</p>')\n                } else {\n                    $li.html('<p>细节图</p>');\n                }\n                $(this).remove();\n\n            });\n            //使用商品图片\n            self.node.find('.property_img').delegate('.use_main_img', 'click', function () {\n                var mainHtml = null;\n                var $this = $(this);\n                $('.img_show').eq(0).find('.img_area').find('li').each(function (i) {\n                    mainHtml = $(this).html();\n                    $this.parents('.img_show').find('.img_area').find('li').eq(i).html(mainHtml);\n                });\n            });\n\n            //Input交互\n            self.node.find('input').on('keyup', function () {\n                var $this = $(this);\n                var maxLen = $this.data('maxlength');\n                var thisLen = $this.val().length;\n                var leftLen = parseInt(maxLen) - parseInt(thisLen);\n                if (leftLen >= 0) {\n                    var leftLenInt = leftLen > 9 ? leftLen : '0' + leftLen;\n                    var lentips = '还能输入' + leftLenInt + '个字';\n                    $this.removeClass('error');\n                    if (maxLen) {\n                        $this.siblings('span').text(lentips).css('visibility', 'visible');\n                    }\n                }\n\n            });\n\n            //勾选后，编辑商品属性\n            self.goodsTotal.delegate('.edit_attr', 'click', function () {\n                $(this).parents('.edit_attr_detail').hide();\n                self.node.find('.choose_attr_detail').show();\n            });\n            self.node.find('.property_item').delegate('.choose_attr', 'click', function () {\n                $(this).parents('.choose_attr_detail').hide();\n                self.node.find('.edit_attr_detail').show();\n            });\n\n            //根据经营名称获取经营范围列表\n            self.node.find('.range-name').change(function () {\n                var catId = $(this).val();\n                self.getScopeList(catId, '');\n            });\n\n            //选择经营范围\n            self.node.find('.range-content').delegate('input[type=\"radio\"]', 'click', function () {\n                var scopeObj = $(this).data();\n                $(this).parent().siblings().find('input[type=\"radio\"]').attr('checked', false);\n                var resultParent = $('.range-result');\n                resultParent.find('#scopeId').val(scopeObj.scopeName);\n                resultParent.find('#scopeId').removeClass('must');\n                resultParent.find('.scopeId').val(scopeObj.scopeId);\n                resultParent.find('.scopeName').val(scopeObj.scopeName);\n                resultParent.find('.warePoolId').val(scopeObj.warePoolId);\n            });\n\n            //筛选经营范围\n            self.node.find('.range-condition').delegate('.search_btn', 'click', function () {\n                var keyword = $.trim($(this).parent().find('input').val());\n                var catId = $.trim($('.range-name').val());\n                self.getScopeList(catId, keyword);\n            })\n\n            //是否拆零\n            self.node.find('#isSplit').change(function () {\n                var packTypeHtml = '';\n                var splitType = $(this).find('option:selected').attr('data-attr-value');\n                switch (splitType) {\n                    case '是':\n                        packTypeHtml = '\\\n                        <option selected=\"\" disabled=\"\" value=\"\" class=\"hide\">--请选择--</option>\\\n                        <option value=\"1\" data-attr-value=\"不拆零(小包)\" data-attr-id=\"101\" data-attr-value-id=\"1\">不拆零(小包)</option>';\n                        break;\n                    case '否':\n                        packTypeHtml = '\\\n                        <option selected=\"\" disabled=\"\" value=\"\" class=\"hide\">--请选择--</option>\\\n                        <option value=\"2\" data-attr-value=\"中包\" data-attr-id=\"101\" data-attr-value-id=\"2\">中包</option>\\\n                        <option value=\"3\" data-attr-value=\"件装\" data-attr-id=\"101\" data-attr-value-id=\"3\">件装</option> ';\n                        break;\n                    default:\n                        packTypeHtml = '<option selected=\"\" disabled=\"\" value=\"\" class=\"hide\">--请选择--</option>';\n                }\n                self.node.find('#splitUnit').html(packTypeHtml);\n            });\n\n        },\n        /**\n         * 属性管理\n         */\n        _attributeManage: function (node, index) {\n            var self = this;\n            var popupCard = node.parents('.popup_card');\n            var thisTr = node.parents('tr');\n            var cloneTr = popupCard.find('.size_list').find('table').find('tr:last-child');\n            var lastTr = popupCard.find('.size_list').find('table');\n            var newBtn = '';\n\n            switch (index) {\n                case 0: //新增\n                    var lastIndex = parseInt(cloneTr.find('.this_index').text());\n                    if (isNaN(lastIndex)) {\n\n                    } else {\n                        newBtn = '<div class=\"smallbtn btnblue inline edit_property\"><a>编辑</a></div><div class=\"smallbtn btnblue inline save_property\"><a>保存</a></div><div class=\"smallbtn btnblue inline cancel_property\"><a>取消</a></div>';\n                        $(lastTr).append(cloneTr.clone());\n                        popupCard.find('.size_list').find('table').find('tr:last-child').find('.this_act').html(newBtn);\n                        popupCard.find('.size_list').find('table').find('tr:last-child').attr('data-id', '');\n                    }\n\n                    break;\n                case 1: //编辑\n                    newBtn = '<div class=\"smallbtn btnblue inline save_property\"><a>保存</a></div><div class=\"smallbtn btnblue inline cancel_property\"><a>删除</a></div>';\n\n                    thisTr.find('td').not($('.this_act')).not($('.this_index')).not($('.this_color')).each(function () {\n                        var thisVal = $(this).text();\n                        var thisName = $(this).attr('name');\n                        var temHtml = '<input type=\"text\" value=\"' + thisVal + '\"name=\"' + thisName + '\">';\n                        $(this).html(temHtml);\n                    });\n                    node.parents('td').html(newBtn);\n                    break;\n                case 2: //保存\n                    newBtn = '<div class=\"smallbtn btnblue inline edit_property\"><a>编辑</a></div>';\n                    thisTr.find('td').not($('.this_act')).not($('.this_index')).not($('.this_color')).each(function () {\n                        var thisVal = $(this).find('input').val();\n                        $(this).html(thisVal);\n                    });\n                    node.parents('td').html(newBtn);\n                    break;\n                case 3: //取消\n                    thisTr.remove();\n                    break;\n                default:\n                    break;\n            }\n            //刷新序号\n            popupCard.find('td.this_index').each(function () {\n                var updataIndex = $(this).parents('tr').index();\n                $(this).html(updataIndex);\n            });\n\n        },\n        /**\n         * 库存总数input框逻辑\n         * @param num\n         * @private\n         */\n        _goodsTotal: function (num) {\n            var self = this;\n\n            //有勾选属性时 总库存禁止输入\n            if (num > 0) {\n                self.goodsTotal.find('.edit_attr_detail').show();\n                self.goodsTotal.find('input').attr('disabled', 'disabled');\n                self._addTotal();\n\n            } else {\n                self.goodsTotal.find('input').removeAttr('disabled');\n                self.goodsTotal.find('.edit_attr_detail').hide();\n            }\n        },\n        _addTotal: function () {\n            var self = this;\n            var stockTotal = 0;\n            $('.property_table').find('input[name=stock]').each(function () {\n                stockTotal += Number($(this).val());\n            });\n            self.goodsTotal.find('.goods_total').find('input').val(stockTotal);\n        },\n        /**\n         * 根据勾选的获取sku数据\n         * @returns {Array}\n         * @private\n         */\n        _getPropertys: function () {\n            var self = this;\n            var datas = [];\n            var obj = {};\n            self.proItem.each(function (i, item) {\n                obj = {};\n                var $item = $(item);\n                var property = $item.find('.sort_tree span');\n                var checkboxs = $item.find('.checktd input');\n                var checkbox;\n                var checkboxData = [];\n                var checkboxObj = {};\n\n                for (var i = 0; i < checkboxs.length; i++) {\n                    if (checkboxs.eq(i).prop('checked')) {\n                        checkbox = checkboxs.eq(i);\n                        checkboxObj = {};\n                        checkboxObj.attrId = checkbox.attr('data-id');\n                        checkboxObj.value = checkbox.attr('data-value');\n                        // checkboxObj.value = checkbox.parents('td').text();\n                        checkboxData.push(checkboxObj);\n                    }\n                }\n\n                if (checkboxData.length) {\n                    obj.checkboxs = checkboxData;\n                    datas.push(obj);\n                    obj.attrId = property.attr('data-id');\n                    // obj.key = property.attr('data-attr-key');\n                    obj.value = property.attr('data-value');\n                    // obj.value = property.text();\n                }\n            });\n            //console.log(datas);\n            return datas;\n        },\n        /**\n         * 适配为渲染table所需的数据格式\n         * @param propertys\n         * @returns {{headData: Array, list: *}}\n         * @private\n         */\n\n        _adapterSkuData: function (propertys) {\n            var self = this;\n            var headData = [];\n            var skuListData = [];\n            var item = {};\n            var nowTableTr = $('.property_table').find('tr[data-key]');\n            var nowTableArr = [];\n\n            var obj1, obj2;\n\n            if (!propertys.length) {\n                console.log('选择的销售属性为空');\n            }\n\n            obj1 = propertys[0];\n            for (var i = 0; i < propertys.length; i++) {\n                if (i == 0) {\n                    obj1 = self._renderData(obj1);\n                } else {\n                    obj2 = propertys[i];\n                    obj1 = self._renderData(obj1, obj2);\n                }\n                var headTd = {};\n                headTd.text = propertys[i].value;\n                headData.push(headTd);\n            }\n\n\n            for (var j = 0, nl = nowTableTr.size(); j < nl; j++) {\n                var trEach = nowTableTr[j];\n                var nowTableObj = {};\n                var nowKey = $(trEach).data('key');\n                var nowPrice = $(trEach).find('input[name=price]').val();\n                var nowWholesalePrice = $(trEach).find('input[name=wholesalePrice]').val();\n                var nowstock = $(trEach).find('input[name=stock]').val();\n                var nowPackageNum = $(trEach).find('input[name=packageNum]').val();\n                var nowskuAlias = $(trEach).find('input[name=skuAlias]').val();\n                nowTableObj.nowKey = nowKey;\n                nowTableObj.nowPrice = nowPrice;\n                nowTableObj.nowWholesalePrice = nowWholesalePrice;\n                nowTableObj.nowstock = nowstock;\n                nowTableObj.nowPackageNum = nowPackageNum;\n                nowTableObj.nowskuAlias = nowskuAlias;\n                nowTableArr.push(nowTableObj);\n            }\n\n\n            for (var k in obj1) {\n                var newTrData = obj1[k];\n                //console.log(newTrData.key);\n                for (var m in nowTableArr) {\n                    var nowTrData = nowTableArr[m];\n                    //console.log(nowTrData.nowKey);\n                    if (newTrData.key == nowTrData.nowKey) {\n                        //console.log(nowTrData.nowPrice);\n                        newTrData.price = nowTrData.nowPrice;\n                        newTrData.wholesalePrice = nowTrData.nowWholesalePrice;\n                        newTrData.stock = nowTrData.nowstock;\n                        newTrData.packageNum = nowTrData.nowPackageNum;\n                        newTrData.skuAlias = nowTrData.nowskuAlias;\n                    }\n                }\n            }\n\n            //console.log(obj1);\n\n            // return obj1;\n            return {\n                headData: headData,\n                list: obj1\n            };\n        },\n        /**\n         * 适配为渲染table所需的数据格式\n         * @param obj1\n         * @param obj2\n         * @returns {Array}\n         * @private\n         */\n        _renderData: function (obj1, obj2) {\n            var result = [];\n            var obj = {};\n            var saleAttr = {};\n            var nowTableTr = $('.property_table').find('tr[data-key]');\n            if (!obj2) {\n                // console.log('第一个初始化的情况');\n                for (var i = 0; i < obj1.checkboxs.length; i++) {\n                    var check1 = obj1.checkboxs[i];\n\n                    obj = {};\n                    obj.tds = [];\n                    var td2 = {};\n                    td2.rowspan = 1;\n                    td2.text = check1.value;\n                    obj.tds.push(td2);\n\n                    obj.saleAttrs = [];\n                    saleAttr = {};\n                    saleAttr.saleAttr = {};\n                    saleAttr.saleAttr.attrId = obj1.attrId;\n                    saleAttr.saleAttr.value = obj1.value;\n                    saleAttr.children = [{\n                        attrId: check1.attrId,\n                        value: check1.value\n                    }];\n                    obj.saleAttrs.push(saleAttr);\n\n                    if (obj1.value == '颜色') {\n                        obj.color = check1.attrId;\n                    }\n\n                    obj.key = check1.attrId;\n                    obj.value = check1.value;\n\n\n                    //if(nowTableTr[i]){\n                    //    var tr1 = nowTableTr[i];\n                    //    if($(tr1).data('key') == check1.attrId){\n                    //        obj.price = $(tr1).find('input[name=price]').val();\n                    //        obj.stock = $(tr1).find('input[name=stock]').val();\n                    //        obj.skuAlias = $(tr1).find('input[name=skuAlias]').val();\n                    //    }\n                    //}\n\n                    result.push(obj);\n                }\n                return result;\n            }\n            // console.log('大于1个的情况');\n            for (var i = 0; i < obj1.length; i++) {\n                var check1 = obj1[i];\n                for (var j = 0; j < obj2.checkboxs.length; j++) {\n                    var check2 = obj2.checkboxs[j];\n                    var saleAttrs1 = check1.saleAttrs;\n\n                    obj = {};\n                    obj.tds = [];\n                    var td2 = {};\n                    td2.rowspan = 1;\n                    td2.text = check2.value;\n                    obj.tds.push(td2);\n\n                    obj.saleAttrs = saleAttrs1.concat([]);\n\n                    var saleAttr2 = {};\n                    saleAttr2.saleAttr = {};\n                    saleAttr2.saleAttr.attrId = obj2.attrId;\n                    saleAttr2.saleAttr.value = obj2.value;\n                    saleAttr2.children = [{\n                        attrId: check2.attrId,\n                        value: check2.value\n                    }];\n                    obj.saleAttrs.push(saleAttr2);\n\n                    if (check1.color) {\n                        obj.color = check1.color;\n                    }\n                    if (obj2.value == '颜色') {\n                        obj.color = check2.attrId;\n                    }\n\n                    obj.key = check1.key + '-' + check2.attrId;\n\n                    obj.value = check2.value;\n\n                    result.push(obj);\n                }\n\n                for (var k = check1.tds.length - 1; k >= 0; k--) {\n                    var td1 = check1.tds[k];\n                    // console.log(td1.rowspan);\n                    td1.rowspan = td1.rowspan * obj2.checkboxs.length;\n                    result[i * j].tds.unshift(td1);\n\n                }\n\n\n            }\n\n            //console.log(result);\n            return result;\n\n        },\n        /**\n         * 渲染表格\n         * @param data\n         * @returns {boolean}\n         * @private\n         */\n        _renderPropertyTable: function (data, showWholesale) {\n            //console.log(data);\n            var self = this;\n            if (!data.list) {\n                $('.property_table').html('').data('skuDatas', null);\n                return false;\n            }\n            var tmp;\n            if (showWholesale) {\n                tmp = [\n                    '<table>',\n                    '<thead>',\n                    '<tr>',\n                    '{{#each headData}}<th>{{text}}</th>{{/each}}',\n                    '<th>零售价</th>',\n                    '<th>批发价</th>',\n                    '<th>库存</th>',\n                    '<th class=\"hide\">包装数量</th>',\n                    '<th>sku别名</th>',\n                    '</tr>',\n                    '</thead>',\n                    '<tbody>',\n                    '{{#each list}}<tr {{#if color}} data-color=\"{{color}}\"{{/if}} data-key=\"{{key}}\">',\n                    '{{#each tds}}<td rowspan=\"{{rowspan}}\">{{text}}</td>{{/each}}',\n                    '<td><input class=\"inputOnlyFloat\" type=\"text\" name=\"price\" maxlength=\"8\" value=\"{{price}}\"></td>',\n                    '<td><input class=\"inputOnlyFloat\" type=\"text\" name=\"wholesalePrice\" maxlength=\"8\"  value=\"{{wholesalePrice}}\" placeholder=\"此项为必填项\" data-must=\"must\"></td>',\n                    '<td><input class=\"inputOnlyLong\" type=\"text\" name=\"stock\" maxlength=\"9\" value=\"{{stock}}\"></td>',\n                    '<td class=\"hide\"><input type=\"text\" name=\"packageNum\" value=\"1\"></td>',\n                    '<td><input type=\"text\" name=\"skuAlias\" value=\"{{skuAlias}}\"></td>',\n                    '</tr>{{/each}}',\n                    '</tbody>',\n                    '</table>'\n                ].join('');\n            } else {\n                tmp = [\n                    '<table>',\n                    '<thead>',\n                    '<tr>',\n                    '{{#each headData}}<th>{{text}}</th>{{/each}}',\n                    '<th>价格</th>',\n                    '<th>库存</th>',\n                    '<th>包装数量</th>',\n                    '<th>sku别名</th>',\n                    '</tr>',\n                    '</thead>',\n                    '<tbody>',\n                    '{{#each list}}<tr {{#if color}} data-color=\"{{color}}\"{{/if}} data-key=\"{{key}}\">',\n                    '{{#each tds}}<td rowspan=\"{{rowspan}}\">{{text}}</td>{{/each}}',\n                    '<td><input class=\"inputOnlyFloat\" type=\"text\" name=\"price\" maxlength=\"8\" value=\"{{price}}\"></td>',\n                    '<td><input class=\"inputOnlyLong\" type=\"text\" name=\"stock\" maxlength=\"9\" value=\"{{stock}}\"></td>',\n                    '<td><input type=\"text\" name=\"packageNum\" value=\"{{packageNum}}\"></td>',\n                    '<td><input type=\"text\" name=\"skuAlias\" value=\"{{skuAlias}}\"></td>',\n                    '</tr>{{/each}}',\n                    '</tbody>',\n                    '</table>'\n                ].join('');\n            }\n\n\n            template = Handlebars.compile(tmp);\n            html = template(data);\n            $('.property_table').html(html).data('skuDatas', data.list);\n\n            //更新库存量\n            var stockTotal = 0;\n            $('.property_table').find('input[name=stock]').each(function () {\n                stockTotal += Number($(this).val());\n            });\n            self.goodsTotal.find('.goods_total').find('input').val(stockTotal);\n        },\n        /**\n         * 新增颜色新增组图\n         * @param eachValObj\n         * @param name\n         * @private\n         */\n        _newSkuImg: function (eachValObj, name) {\n            var self = this;\n            var imgAreaNode = self.node.find('.img_goods');\n            var imgHtml = '<div class=\"img_show clear\">' +\n                '<div class=\"title fl\">' +\n                '<p data-key=\"' + eachValObj.id + '\" data-color=\"' + eachValObj.value + '\" data-color-id=\"' + eachValObj.id + '\"><i class=\"need\">*</i>' + eachValObj.value + '</p>' +\n                '<span>至少5张</span>' +\n                '</div>' +\n                '<div class=\"img_area\">' +\n                '<ul>' +\n                '<li><p>主图</p></li>' +\n                '<li><p>细节图</p></li>' +\n                '<li><p>细节图</p></li>' +\n                '<li><p>细节图</p></li>' +\n                '<li><p>细节图</p></li>' +\n                '<li><p>细节图</p></li>' +\n                '</ul>' +\n                '</div>' +\n                '<div class=\"btnblue medbtn fr use_main_img\">使用商品图片</div>' +\n                '<div class=\"upload_img fr\">上传图片<div class=\"upload_btn\"></div></div>' +\n                '</div>';\n\n            if (name === '颜色') {\n                $(imgAreaNode).append(imgHtml);\n\n            }\n\n        },\n        /**\n         * 取消颜色check删除组图\n         * @param eachValObj\n         * @param name\n         * @private\n         */\n        _delSkuImg: function (eachValObj) {\n            $('.property_img').find('.img_show').each(function () {\n                var key = $(this).find('p').data('key');\n                if (key == eachValObj.id) {\n                    $(this).remove();\n                }\n\n            })\n\n        },\n        /**\n         * 获取表格的值\n         * @returns {*}\n         * @private\n         */\n        _getPropertysTableData: function () {\n            var self = this;\n            var trs = $('.property_table tbody tr');\n            var skuDatas = null;\n\n            if ($('.property_table').data('skuDatas')) {\n                skuDatas = $('.property_table').data('skuDatas');\n            } else {\n                var data = self._adapterSkuData(self._getPropertys());\n                skuDatas = data.list;\n                //self._renderPropertyTable(skuDatas);\n            }\n\n            var result = [];\n            if (!trs.length) {\n                return [];\n            }\n            trs.each(function (i, el) {\n                var tr = $(el);\n                var obj = {};\n                var key = tr.attr('data-key');\n                obj.stock = tr.find('input[name=stock]').val();\n                obj.price = tr.find('input[name=\"price\"]').val();\n                obj.wholesalePrice = tr.find('input[name=\"wholesalePrice\"]').val();\n                obj.packageNum = tr.find('input[name=\"packageNum\"]').val();\n                obj.skuAlias = tr.find('input[name=\"skuAlias\"]').val();\n                for (var i = 0; i < skuDatas.length; i++) {\n                    if (key == skuDatas[i].key) {\n                        obj.saleAttrs = skuDatas[i].saleAttrs;\n                    }\n                }\n\n                if (tr.attr('data-color')) {\n\n                    self.imgBox.find('.img_show').each(function () {\n                        var $this = $(this);\n                        var imgData = $this.find('p').data('color-id');\n                        var imgDataColor = imgData == tr.attr('data-color');\n\n                        //console.log(imgData);\n                        if (imgDataColor) {\n                            var skuImages = [];\n                            $this.find('.img_area').find('img').each(function () {\n                                var skuImagesObj = {};\n                                var imgSrc = $(this).attr('src');\n                                var imgSrcIndex = $(this).parents('li').index();\n                                if (imgSrc) {\n                                    skuImagesObj.imagePath = imgSrc;\n                                    skuImagesObj.imageIndex = imgSrcIndex + 1;\n                                    skuImagesObj.colorId = imgData;\n                                }\n                                skuImages.push(skuImagesObj);\n                            });\n                            obj.skuImages = skuImages;\n\n                        }\n                    });\n                }\n\n                result.push(obj);\n            });\n            // console.log('skuList:', result);\n            return result;\n\n        },\n        _getAddTableData: function () {\n            $table = $('addTable'); //后来添加的table数据\n            var priceList = [];\n            //\n            $table.find('input').each(function (index, obj) {\n                var a = {},\n                    $t = $(obj);\n                a.priceLevel = $t.attr('data-priceLevel');\n                a.levelName = $t.attr('data-levelName');\n                a.priceValue = $t.attr('data-priceValue');\n            });\n            return priceList;\n        },\n        /**\n         * 获取商品资质数据\n         * @returns {*}\n         * @private\n         */\n        _getWareQualifiesData: function () {\n            var self = this;\n            var obj = [];\n\n            self.imgBox.find('.qual_show').each(function () {\n                var $this = $(this);\n                $this.find('.img_area').find('img').each(function () {\n                    var skuImagesObj = {};\n                    var imgSrc = $(this).attr('src');\n                    var imgSrcIndex = $(this).parents('li').index();\n                    if (imgSrc) {\n                        skuImagesObj.imagePath = imgSrc;\n                        skuImagesObj.imageIndex = imgSrcIndex + 1;\n                    }\n                    obj.push(skuImagesObj);\n                });\n            });\n            return obj;\n\n        },\n        /**\n         * 移动“上传图片模块”至当前组图下方\n         * @private\n         */\n        _moveImgArea: function (node) {\n            var self = this;\n            var imgAreaNode = self.node.find('.upload_dom');\n            $(node).after(imgAreaNode);\n\n        },\n\n        /**\n         * 上传图片\n         * @param uploadData\n         * @private\n         */\n        _uploadImg: function (uploadData) {\n            $.ajaxFileUpload({\n                type: 'POST', //当要提交自定义参数时，这个参数要设置成POST\n                //url: '/vender/image/upload.htm', //用于文件上传的服务器端请求地址\n                url: '/vender/image/upload.htm', //用于文件上传的服务器端请求地址\n                data: uploadData, //自定义参数\n                secureuri: false, //是否需要安全协议，一般设置为false\n                fileElementId: 'uploadImg', //文件上传域的id\n                dataType: 'text', //返回值类型 一般设置为json\n                success: function (data, status) {\n                    data = eval('(' + data + ')');\n                    if (data.result == true) {\n                        var images = data.messages.list;\n                        var lis = $('.upload_dom').prev('.img_show').find('ul').find('li p');\n                        for (var i = 0; i < images.length; i++) {\n                            if (images[i].code == 0) {\n                                lis.eq(i).parent('li').html('<div class=\"img-icon\"><i class=\"del\"></i></div><img src=\"' + images[i].imgName + '\">');\n                            } else {\n                                // alert(images[i].msg);\n                            }\n                        }\n                    }\n                },\n                error: function (e) {\n                    // console.log(e);\n                }\n            })\n        },\n        /**\n         * 上传商品資質\n         * @param uploadData\n         * @private\n         */\n        _uploadQual: function (uploadData) {\n            $.ajaxFileUpload({\n                type: 'POST', //当要提交自定义参数时，这个参数要设置成POST\n                //url: '/vender/image/upload.htm', //用于文件上传的服务器端请求地址\n                url: '/vender/image/uploadQual.htm', //用于文件上传的服务器端请求地址\n                data: uploadData, //自定义参数\n                secureuri: false, //是否需要安全协议，一般设置为false\n                fileElementId: 'uploadQual', //文件上传域的id\n                dataType: 'text', //返回值类型 一般设置为json\n                success: function (data, status) {\n                    data = eval('(' + data + ')');\n                    if (data.result == true) {\n                        var images = data.messages.list;\n                        var lis = $('.upload_qual').prev('.qual_show').find('ul').find('li p');\n                        for (var i = 0; i < images.length; i++) {\n                            if (images[i].code == 0) {\n                                lis.eq(i).parent('li').html('<div class=\"img-icon\"><i class=\"del\"></i></div><img src=\"' + images[i].imgName + '\">');\n                            } else {\n                                alert(images[i].msg);\n                            }\n                        }\n                    }\n                },\n                error: function (e) {}\n            })\n        },\n        /**\n         * 拼接SPU数据\n         * @returns {{}}\n         * @private\n         */\n        _spuData: function () {\n            var self = this;\n            var spuJson = {}; //spu\n\n\n            //写入input数据\n            self.node.find('input[type=text]').each(function () {\n                var $this = $(this);\n                if ($this.val() != '' && $this.data('sort') == 'bWare') {\n                    var spuKey = $this.attr('name');\n                    var spuVal = $this.val();\n                    spuJson[spuKey] = spuVal;\n                }\n            });\n            //写入selcet数据\n            self.node.find('select').find('option:selected').each(function () {\n                var $this = $(this);\n                if ($this.val() != '' && $this.parents('select').data('sort') == 'bWare') {\n                    var spuKey = $this.data();\n                    for (var i in spuKey) {\n                        spuJson[i] = spuKey[i];\n                    }\n                }\n            });\n            //spu主图\n            self.imgBox.find('.img_show').each(function () {\n                var $this = $(this);\n                var imgDataColor = $this.find('p').attr('data-sort') == 'bWare';\n                var spuImages = [];\n\n                if (imgDataColor) {\n                    $this.find('.img_area').find('img').each(function () {\n                        var spuImagesObj = {};\n                        var imgSrc = $(this).attr('src');\n                        var imgSrcIndex = $(this).parents('li').index();\n                        if (imgSrc) {\n                            spuImagesObj.imagePath = imgSrc;\n                            spuImagesObj.imageIndex = imgSrcIndex + 1;\n                        }\n                        spuImages.push(spuImagesObj);\n\n                    });\n\n                    spuJson.images = spuImages;\n\n                }\n            });\n            //富文本编辑器内容\n            self.node.find('.nicEdit-main').each(function () {\n                var $this = $(this);\n                var spuVal = $this.html();\n                spuJson.pcDes = spuVal;\n            });\n\n            // console.log('spuJson:',spuJson);\n            return spuJson;\n        },\n        /**\n         * 拼装attr数据\n         * @returns {Array}\n         * @private\n         */\n        _attrData: function () {\n            var self = this;\n            //写入商品属性数据\n            var attrs = []; //商品属性\n\n            self.node.find('.spu_attrs').find('option:selected').each(function () {\n                var $this = $(this);\n                //经营范围单独获取，不在attrs字段里面\n                if ($this.val() != '' && !$this.parent().hasClass('range-name')) {\n                    var attrData = $this.data();\n                    attrs.push(attrData);\n                }\n            });\n            self.node.find('.spu_attrs').find('input').each(function () {\n                var $this = $(this);\n                var thisKey = $this.attr('name');\n                if ($this.val() != '' && typeof thisKey !== 'undefined') {\n                    var attrData = {};\n                    attrData[thisKey] = $this.val();\n                    attrData['attrKey'] = $this.data('attr-key');\n                    attrs.push(attrData);\n                }\n\n            });\n            //console.log('attrs:',attrs);\n\n            return attrs;\n        },\n        /**\n         * 拼装scope数据\n         * @returns {Array}\n         * @private\n         */\n        _scopeData: function () {\n            var parent = $('.range-result');\n            return {\n                scopeId: parent.find('.scopeId').val(),\n                scopeName: parent.find('.scopeName').val(),\n                warePoolId: parent.find('.warePoolId').val()\n            }\n        },\n        /**\n         * 数据提交\n         * @private\n         */\n        _commitData: function (scopeNeeded) {\n            var self = this;\n            var commitData = {};\n            var commitDataResult = {};\n            commitData.bWare = self._spuData();\n            commitData.attrs = self._attrData();\n            if (scopeNeeded) {\n                commitData.scopeVOs = self._scopeData();\n            }\n            commitData.skuList = self._getPropertysTableData();\n            commitData.priceList = self._getAddTableData();\n            commitData.qualifyList = self._getWareQualifiesData();\n            commitDataResult.products = JSON.stringify(commitData);\n            // console.log(commitDataResult);\n\n            return commitDataResult;\n        },\n        /**\n         * 重新加载\n         */\n        reload: function () {\n            this._init();\n        },\n        /**\n         * 根据经营名称获取经营范围列表\n         * scopesList由页面输出\n         * @returns\n         * @private\n         */\n        getScopeList: function (catId, keyword) {\n            var self = this;\n            if (typeof scopesList == 'undefined' || scopesList == null) return;\n            for (var i = 0; i < scopesList.length; i++) {\n                var scopeObj = scopesList[i];\n                if (scopeObj.categoryId == catId) {\n                    var scopeList = scopeObj.scopeVOs;\n                    var newScopeList = [];\n                    if (keyword.length) {\n                        newScopeList = scopeList.filter(function (scope) {\n                            return scope.scopeName.indexOf(keyword) !== -1 ? true : false;\n                        });\n                    } else {\n                        newScopeList = scopeList;\n                    }\n                    self.renderScopeList(newScopeList);\n                    break;\n                }\n            }\n        },\n        /**\n         * 渲染经营范围列表\n         * @returns\n         * @private\n         */\n        renderScopeList: function (scopeList) {\n            var scopeHtml = '';\n            for (var i = 0; i < scopeList.length; i++) {\n                var scopeItem = scopeList[i];\n                scopeHtml += '<label><input type=\"radio\" data-scope-id=\"' + scopeItem.scopeId + '\" data-scope-name=\"' + scopeItem.scopeName + '\" data-ware-pool-id=\"' + scopeItem.warePoolId + '\">' + scopeItem.scopeName + '</label>';\n            }\n            $('.range .range-content').html(scopeHtml);\n        }\n    });\n\n\n    /**\n     * 暴露全局变量\n     */\n    if (!w.addGoodsProperty) {\n        w.addGoodsProperty = function () {\n            new addGoodsProperty({\n                node: $('.add_goods_s2')\n            });\n        };\n    }\n\n    /**\n     * 商品推荐入口\n     */\n    $(function () {\n        w.addGoodsProperty();\n    });\n\n})(window, jQuery);\n/**\n * Created by cdxiaqing1 on 2015/12/17.\n */\n$(function () {\n    /**\n     * 渠道管理-经销商详情-tabCard切换\n     */\n    $('.sy_channel_detail').delegate('.tab_card ul li', 'click', function () {\n        var $this = $(this);\n        var $thisIndex = $this.index();\n        $('.detail_card').hide();\n        switch ($thisIndex) {\n            case 0:\n                $('.register_info').show();\n                break;\n            case 1:\n                $('.basic_info').show();\n                break;\n            case 2:\n                $('.qualify_info').show();\n                break;\n            case 3:\n                $('.address_info').show();\n                break;\n            case 4:\n                $('.invoice_info').show();\n                break;\n        }\n    });\n\n    /**\n     * 渠道管理-经销商详情-资质信息-查看缩略图\n     */\n    $('.sy_channel_detail').delegate('.qualify_img', 'click', function () {\n        var node = $(this).find('img');\n        var nodeName = $(this).find('p').text();\n        showBigImg(node, nodeName);\n    });\n\n    function showBigImg(node, nodeName) {\n        var src = node.attr('src');\n        var showPopupHtml = '<div class=\"popup_card freight_popup \">' +\n            '<div class=\"popup_close\"><div class=\"close_css\"></div></div>' +\n            '<div class=\"popup_sure\">' +\n            '<div class=\"popup_title\">' + nodeName + '</div>' +\n            '<div class=\"imgarea\"><img src=\"' + src + '\">' +\n            '</div>' +\n            '</div>' +\n            '</div>';\n        node.parents('body').find('.popup').html(showPopupHtml).show();\n    }\n});\n/**\n * Created by cdxiaqing1 on 2015/12/17.\n */\n$(function () {\n\n    if (!placeholderSupport()) {\n        $('[placeholder]').blur(function () {\n            var input = $(this);\n            if (input.val() == '' || input.val() == input.attr('placeholder')) {\n                input.addClass('title');\n                input.attr('title', input.attr('placeholder'));\n            }\n        }).blur();\n    }\n\n    function placeholderSupport() {\n        return 'placeholder' in document.createElement('input');\n    }\n\n    /*\n     $('[placeholder]').parents('form').submit(function() {\n     $(this).find('[placeholder]').each(function() {\n     var input = $(this);\n     if (input.val() == input.attr('placeholder')) {\n     input.val('');\n     }\n     })\n     });*/\n    /**\n     * 渠道管理-经销商详情-tabCard切换\n     */\n    $('.sy_vender_detail').delegate('.tab_card ul li', 'click', function () {\n        var $thisIndex = $(this).index();\n        $('.detail_card').eq($thisIndex).show().siblings().hide();\n    });\n});\n/**\n * Created by cdxiaqing1 on 2016/1/7.\n */\n/**\n * 新增商品协议价 start\n */\n\n$(function () {\n    //渲染li的mok数据\n    var mok = {\n        'result': true,\n        'messages': {\n            'wareList': [{\n                'wareId': 'spu222',\n                'wareName': 'test222',\n                'userPin': 'pin222'\n            }, {\n                'wareId': 'spu111',\n                'wareName': 'test111',\n                'userPin': 'pin111'\n            }]\n        }\n    };\n\n    /**\n     * 模糊搜索框的输入事件\n     */\n    $('.filter_item').delegate('input', 'click', function (e) {\n        var $this = $(this);\n        $this.siblings('.search_keyup_box').find('ul li').show();\n        e.stopPropagation();\n    });\n    $('.filter_item').delegate('input', 'keyup', function () {\n        var $this = $(this);\n        var thisVal = $this.val();\n        $this.siblings('.search_keyup_box').find('ul li').hide().filter(':contains(\"' + thisVal + '\")').show();\n    });\n    /**\n     * 选择公司后发请求拿到药品的数据（格式如mok）\n     */\n    $('.main_content').delegate('#filter_com_list li', 'click', function (e) {\n        var $this = $(this);\n        chooseLiFn($this);\n        var userJson = $this.data();\n        $this.packajax({\n            ajax_url: '/vender/b/product/wareList.htm',\n            user: userJson,\n            succ: renderLiFn\n        });\n        //renderLiFn(mok);\n        e.stopPropagation();\n    });\n    $('body').on('click', function () {\n        var $this = $(this);\n        $this.find('.search_keyup_box').find('ul li').hide();\n    });\n    $('.main_content').delegate('#filter_goods_list li', 'click', function () {\n        var $this = $(this);\n        chooseLiFn($this);\n    });\n\n    /**\n     * 搜索-渲染表格\n     */\n    $('.main_content').delegate('#choose_discount_search', 'click', function () {\n        var $this = $(this);\n        var comName = $.trim($('#discount_add_choose_com').val());\n        var goodsName = $.trim($('#goodsName').val());\n        if (comName != '' && goodsName != '') {\n            var userJson = $('#goodsName').data();\n            var nowTableTr = $('.area_price_list').find('tr');\n            var newDataWare = $('#goodsName').data('ware-id');\n            var newDataUser = $('#goodsName').data('user-pin');\n            var flag = true;\n            //console.log(newDataUser);\n            nowTableTr.each(function () {\n                var thisWareId = $(this).data('ware-id');\n                var thisUserPin = $(this).data('user-pin');\n                if (thisWareId) {\n                    if (thisWareId == newDataWare && thisUserPin == newDataUser) {\n                        flag = false;\n                    }\n                }\n            });\n            if (flag) {\n                $this.packajax({\n                    ajax_url: '/vender/b/product/newCreateWare.htm',\n                    user: userJson,\n                    succ: discountSearchCallback\n                });\n            } else {\n                alert('已经添加过该商品了')\n            }\n        } else {\n            alert('请选择公司及商品')\n        }\n\n\n    });\n    /**\n     * 录入\n     */\n    $('.main_content').delegate('#set_add_discount', 'click', function () {\n        var $this = $(this);\n        var userArray = [];\n        var eachTrJson = {};\n        var userJson = {};\n        var temHtml = '<div class=\"loading\"></div>';\n        $('.area_price_list').find('tr').each(function () {\n            var $thisTr = $(this);\n            eachTrJson = $thisTr.data();\n            $thisTr.find('input').each(function () {\n                var inputKey = $(this).attr('name');\n                var inputVal = $(this).val();\n                if (inputKey) {\n                    eachTrJson[inputKey] = inputVal;\n                }\n            });\n            if (!$.isEmptyObject(eachTrJson)) {\n                userArray.push(eachTrJson);\n            }\n        });\n        userJson['discountList'] = JSON.stringify(userArray);\n        $('body').append(temHtml);\n        $this.packajax({\n            ajax_url: '/vender/b/product/save.htm',\n            user: userJson,\n            succ: showPopupCallback\n        });\n    });\n    /**\n     * 删除商品\n     */\n    $('.main_content').delegate('.dis_del_btn', 'click', function () {\n        var nowRow = $(this).parents('.shop_table_list').find('tr').size() - 1;\n        var thisRow = parseInt($(this).parents('td').attr('rowspan'));\n        for (var i = 0; i < thisRow - 1; i++) {\n            $(this).parents('tr').next().remove();\n        }\n        if (thisRow == nowRow) {\n            $(this).parents('.shop_table_list').addClass('hide');\n        }\n        $(this).parents('tr').remove();\n\n\n    });\n    /**\n     * 选择列表中的值\n     * @param node\n     */\n    var chooseLiFn = function (node) {\n        var thisVal = node.text();\n        var thisData = node.data();\n        node.parents('.search_keyup_box').siblings('input').val(thisVal).data(thisData);\n        node.parents('.search_keyup_box').find('li').hide();\n    };\n    /**\n     * 渲染药品列表\n     * @param data\n     */\n    var renderLiFn = function (data) {\n        if (data.result) {\n            var list = data.messages.wareList;\n            var listLen = list.length;\n            var listHtml = '';\n            for (var i = 0; i < listLen; i++) {\n                var eachlist = list[i];\n                listHtml += '<li title=\"' + eachlist.wareName + '\"data-ware-id=\"' + eachlist.wareId + '\" data-user-pin=\"' + eachlist.userPin + '\">' + eachlist.wareName + '</li>'\n            }\n            $('#filter_goods_list').html(listHtml);\n\n        }\n    };\n\n    /**\n     * 搜索回调\n     * @param data\n     */\n    var discountSearchCallback = function (data) {\n        var tableBox = $('.data-return').find('.area_price_list');\n        tableBox.removeClass('hide');\n        tableBox.find('tbody').append(data);\n    };\n    /**\n     * 弹窗回调\n     */\n    var showPopupCallback = function (data) {\n        $('.popup').html(data.messages.popup).show();\n        $('.loading').remove();\n    };\n\n    /**\n     * 有效期-只能勾选今天以后的日期\n     * <input class=\"laydate-icon fromNow\" name=\"\">\n     */\n    $('.main_content').delegate('.fromNow', 'click', function (event) {\n        laydate(fromNow);\n\n    });\n\n    var fromNow = {\n        min: laydate.now()\n    };\n});\n\n/**\n * 新增商品协议价 end\n */\n/**\n * Created by cdxiaqing1 on 2015/12/29.\n */\n\n$(function () {\n\n    /**\n     * 经销商列表-修改地区逻辑 start\n     */\n\n    $('.wrapper').delegate('.choose_area', 'click', function () {\n        var self = $(this);\n        var trData = self.parents('tr').data();\n        self.parents('tr').attr('data-now', 'now');\n\n        var isEdit = self.val();\n        $('.popup').find('input[type=checkbox]:not(\":disabled\")').prop('checked', false);\n        $('.popup').data(trData);\n        if (isEdit == '') {\n\n        } else {\n            freightEditCity(self);\n        }\n        $('.special_freight_info').parents('.popup').show();\n    });\n\n    //勾选一级类目时： 1可选子集全选逻辑；2可选被选子集勾选数量\n    $('.popup').delegate('.special_freight_info input[type=checkbox]:not(\".area_city\")', 'change', function () {\n        var $this = $(this);\n        var beCheckedLength = null;\n        var $thisName = $this.attr('data-name');\n        var newName = [];\n        var check_all_list = $this.siblings('.freight_city').find('input[type=checkbox]:not(\":disabled\")');\n\n        $('.freight_city').hide();\n        //$this.siblings('.freight_city').show();\n\n        if ($this.prop('checked')) {\n            check_all_list.prop('checked', true);\n        } else {\n            check_all_list.prop('checked', false);\n        }\n\n        //beCheckedLength = $this.siblings('.freight_city').find('input[type=checkbox]:not(\":disabled\"):checked').length;\n        //$this.siblings('.freight_city').find('input[type=checkbox]:not(\":disabled\"):checked').each(function(){\n        //    var shopName = $(this).attr('data-name');\n        //    var eachName = $thisName + shopName;\n        //    newName.push(eachName);\n        //});\n        //if(beCheckedLength > 0){\n        //    $this.siblings('.ad_num').text('('+beCheckedLength+')');\n        //    $this.data('name',newName);\n        //}else{\n        //    $this.siblings('.ad_num').text('');\n        //}\n    });\n\n\n    //二级勾选框逻辑：二级地区的个数显示在一级地区旁\n    //$('.popup').delegate('.freight_city input[type=checkbox]','change',function(){\n    //    var $this = $(this);\n    //    var $thisParent = $this.parents('.freight_city').siblings('.ad_num').siblings(':checkbox');\n    //    var $thisName = $thisParent.attr('data-name');\n    //    var beCheckedLength = $this.parents('.freight_city').find('input[type=checkbox]:not(\":disabled\"):checked').length;\n    //    var newName = [];\n    //    $this.parents('.freight_city').find('input[type=checkbox]:not(\":disabled\"):checked').each(function(){\n    //        var shopName = $(this).attr('data-name');\n    //        var eachName = $thisName + shopName;\n    //        newName.push(eachName);\n    //    });\n    //    $this.parents('.freight_city').siblings('.ad_num').text('('+beCheckedLength+')');\n    //    $thisParent.data('name',newName);\n    //    if ($this.prop('checked')) {\n    //        $thisParent.prop('checked',true);\n    //    }\n    //});\n\n    //弹窗确认按钮\n    $('.popup').delegate('.set_site_btn', 'click', function () {\n        var $this = $(this);\n        var area = '';\n        var areaList = [];\n        var cityId = null;\n        var shopIdList = [];\n        var shopIdObj = {};\n        var nowTr = $('.main_content').find('.shop_table_list').find('tr[data-now]');\n        var trData = $this.parents('.popup').data();\n        var shopIdJson = {};\n        var userJson = {};\n        $this.parents('.popup').find('.special_freight_info input[type=checkbox]:not(\".area_city\"):not(\":disabled\"):checked').each(function () {\n            $that = $(this);\n            shopIdList = [];\n            areaList.push($that.data('name'));\n            cityId = $that.data('area-id');\n            $that.siblings('.freight_city').find('input.area_city:not(\":disabled\"):checked').each(function () {\n                shopIdList.push($(this).data('sale-type'));\n            });\n            shopIdObj[cityId] = shopIdList;\n            $that.siblings('.ad_num').text('');\n        });\n        //参数合并\n        shopIdJson['shopChecked'] = JSON.stringify(shopIdObj);\n        userJson['areaCatDTOString'] = JSON.stringify($.extend({}, trData, shopIdJson));\n\n        //console.log(userJson);\n        $this.packajax({\n            ajax_url: '/vender/b/product/editAreaCat.htm',\n            user: userJson,\n            succ: function (data) {\n                if (data.result) {\n                    $('.popup').html(data.messages.popup).show();\n                    //area = areaList.join(',');\n                    //$that.parents('.popup').hide();\n                    //$that.removeAttr('checked');\n                    //$that.parents('.popup').find('.freight_city').hide();\n                    //nowTr.find('.choose_area').val(area).attr('title',area);\n                    //nowTr.find('.choose_area').data('checked',shopIdObj);\n                    //nowTr.removeAttr('data-now');\n                }\n            }\n        });\n\n    });\n\n    //关闭二级地区浮层\n    $('.popup').delegate('i.city_close', 'click', function () {\n        $(this).parents('.freight_city').hide();\n    });\n    //关闭弹窗-移除data-now\n    $('.popup').delegate('popup_close', 'click', function () {\n        var nowTr = $('.main_content').find('.shop_table_list').find('tr[data-now]');\n        nowTr.removeAttr('data-now');\n    });\n\n\n    //编辑“选择城市”\n    function freightEditCity(node) {\n        var nowShopId = node.data('checked');\n        for (var areaId in nowShopId) {\n            var shopIdList = nowShopId[areaId];\n            $('.popup').find('input[type=checkbox]:not(\".area_city\")[data-area-id=' + areaId + ']').removeAttr('disabled').prop('checked', true);\n            //$('.popup').find('input[type=checkbox]:not(\".area_city\")[data-area-id='+areaId+']').siblings('.ad_num').text('('+ shopIdList.length +')');\n            for (var i = 0; i < shopIdList.length; i++) {\n                $('.popup').find('input[type=checkbox]:not(\".area_city\")[data-area-id=' + areaId + ']').siblings('.freight_city').find('input[type=checkbox][data-sale-type=' + shopIdList[i] + ']').prop('checked', true);\n            }\n\n        }\n    }\n\n    /**\n     * 经销商列表-修改地区逻辑 end\n     */\n\n\n\n});\n/**\n * Created by cdxiaqing1 on 2016/01/08.\n */\n\n(function (w, $) {\n    function splitOrder(opts) {\n        /**\n         * 默认参数配置\n         * @type {{node: null}}\n         */\n        var defaultOpts = {\n            node: null\n        };\n        /**\n         * 属性选择容器\n         */\n        this.node = opts.node;\n\n\n\n        /**\n         * 参数合并\n         */\n        this.opts = $.extend(opts);\n\n        this._init();\n    }\n\n\n    $.extend(splitOrder.prototype, {\n        /**\n         * 初始化入口\n         * @private\n         */\n        _init: function () {\n            var self = this;\n\n            self.btnBox = self.node.find('.btnarea');\n            self.splitActiveBtn = self.btnBox.find('#split_order_active');\n            self.splitDoneBtn = self.btnBox.find('#split_order_done');\n            self.orderTable = self.node.find('.order_goods_split');\n            self._render();\n            self._addEvent();\n        },\n        /**\n         * 渲染\n         * @private\n         */\n        _render: function () {\n            var self = this;\n            var totalNum = 0;\n            var unitPrice = 0;\n            self.orderTable.find('.price').each(function () {\n                var $this = $(this);\n                totalNum = parseInt($this.parents('tr').find('.total_num').html());\n                unitPrice = Number($(this).parents('tr').find('.unit').html());\n                $this.html((totalNum * unitPrice).toFixed(2));\n            });\n        },\n\n        /**\n         * 事件绑定\n         * @private\n         */\n        _addEvent: function () {\n            var self = this;\n            self.splitActiveBtn.on('click', function () {\n                self._splitActiveFn();\n            });\n            self.splitDoneBtn.on('click', function () {\n                self._splitDoneFn();\n            });\n            self.orderTable.delegate('input[type=checkbox]', 'change', function () {\n                var $this = $(this);\n                self._changeCheckFn($this);\n            });\n            self.orderTable.delegate('.spilt_num', 'blur', function () {\n                var $this = $(this);\n            });\n            self.node.parents('body').find('.popup').delegate('#order_add_goods', 'click', function () {\n                var $this = $(this);\n                var userArray = self._pageDataFn($this);\n                var userJson = {};\n                var ids = userArray.join(',');\n                userJson = $this.data();\n                userJson['skuIds'] = ids;\n                if (ids) {\n                    $this.packajax({\n                        ajax_url: '/vender/b/purchase/remote/addPurchaseSku.htm',\n                        user: userJson,\n                        succ: self._showPopupCallback\n                    });\n                } else {\n                    alert('请至少选择一条');\n                }\n\n            });\n\n        },\n        /**\n         * 改变勾选状态时的fn\n         * @param node\n         * @private\n         */\n        _changeCheckFn: function (node) {\n            if (node.is(':checked')) {\n                node.parents('tr').find('.spilt_num').removeAttr('disabled');\n            } else {\n                node.parents('tr').find('.spilt_num').attr('disabled', 'disabled')\n            }\n\n        },\n        _changeNumFn: function (node, totalNum) {\n            var spilt_num = parseInt(node.val());\n            var newTotalNum = totalNum - spilt_num; //新的总数\n            if (newTotalNum >= 0) {\n                node.parents('tr').find('.total_num').html(newTotalNum);\n                node.val(newTotalNum);\n            } else {\n                alert('订单中没有这么多商品哦。')\n            }\n        },\n        /**\n         * 点击拆分按钮时执行的操作\n         * @private\n         */\n        _splitActiveFn: function () {\n            var self = this;\n            var orderIndex = self.node.find('.shop_table_list').size();\n            var nowSize = self.orderTable.find('tr').size() - 1;\n            var checkedHtml = null; //被选中的tr的html\n            var nowHtml = ''; //过滤掉checkbox及输入框后的新的html\n            var spiltNumDom = null; //拆分数量输入框的dom\n            var spiltNum = 0; //拆分数量的值\n            var spiltNumStr = ''; //拆分数量dom的html字符串\n            var unitTotalPrice = 0; //新拆分数量乘以单价后的新总价\n            var totalNum = 0; //原有订单中的商品总数\n            var thisSize = self.orderTable.find('input[type=checkbox]:checked').length; //被选中的数量\n            var checkedDom = self.orderTable.find('input[type=checkbox]:checked').parents('tr'); //被选中的dom\n            if (thisSize > 0) {\n                if (self._checkOrder(checkedDom)) {\n                    self.node.append(self._newOrderTable(orderIndex));\n                    self.orderTable.find('input[type=checkbox]:checked').each(function (i) {\n                        totalNum = parseInt($(this).parents('tr').find('.total_num').html());\n\n                        checkedHtml = $(this).parents('tr').prop('outerHTML');\n                        spiltNumDom = $(this).parents('tr').find('.spilt_num');\n                        spiltNum = spiltNumDom.val();\n\n                        unitTotalPrice = (Number(spiltNum) * Number($(this).parents('tr').find('.unit').html())).toFixed(2);\n                        spiltNumStr = spiltNumDom.parents('td').prop('outerHTML');\n                        nowHtml = checkedHtml.replace('<td><input type=\"checkbox\"></td>', '').replace(spiltNumStr, '');\n\n                        self._divideNewOrder(nowHtml, orderIndex, spiltNum, unitTotalPrice, i);\n\n                        if (nowSize > thisSize) {\n                            if (spiltNum == totalNum) {\n                                self._changeNumFn(spiltNumDom, totalNum);\n                                $(this).parents('tr').remove();\n                            } else {\n                                $(this).parents('tr').find('input[type=checkbox]').prop('checked', false);\n                                $(this).parents('tr').find('input[type=number]').attr('disabled', 'disabled');\n                                self._changeNumFn(spiltNumDom, totalNum);\n                            }\n                        } else {\n                            if (spiltNum == totalNum) {\n                                self._changeNumFn(spiltNumDom, totalNum);\n                                $(this).parents('tr').remove();\n                                if (self.orderTable.find('tr').size() - 1 == 0) {\n                                    self.orderTable.html('<p>没有可以拆分的订单了</p>');\n                                }\n                            } else {\n                                $(this).parents('tr').find('input[type=checkbox]').prop('checked', false);\n                                $(this).parents('tr').find('input[type=number]').attr('disabled', 'disabled');\n                                self._changeNumFn(spiltNumDom, totalNum);\n                            }\n\n                        }\n\n                    });\n\n                };\n            } else {\n                alert('请至少选择一条')\n            }\n            self._render();\n\n        },\n        /**\n         * 点击提交审核按钮时的事件\n         * @private\n         */\n        _splitDoneFn: function () {\n            var self = this;\n            var leftSize = self.orderTable.find('tr').size();\n            if (leftSize > 0) {\n                alert('该采购单中还存在未拆分的商品，请继续拆单。');\n            } else {\n                self._commitData();\n            }\n        },\n        /**\n         * 检查子订单的合法性：\n         * 1，账期是否一致；\n         * 2，多个sku总价是否超过100W\n         * @param checkedDom\n         * @returns {boolean}\n         * @private\n         */\n        _checkOrder: function (checkedDom) {\n            var checkeDays = []; //检查账期\n            var checkePrice = 0; //检查总价\n            var inputNum = 0; //拆单数量\n            var totalNum = 0; //原有订单中的商品总数\n            var flag = true;\n            checkedDom.each(function () {\n                var $this = $(this);\n                checkeDays.push($this.find('.days').html());\n                inputNum = $this.find('.spilt_num').val();\n                totalNum = parseInt($this.find('.total_num').html());\n                var unitTotalPrice = Number($this.find('.spilt_num').val()) * Number($this.find('.unit').html());\n                checkePrice += unitTotalPrice;\n                if (inputNum == 0) {\n                    alert('拆单数量不能为0');\n                    flag = false;\n                } else if (inputNum > totalNum) {\n                    alert('拆单数量不能大于订单数量');\n                    flag = false;\n                }\n            });\n            if (checkePrice > 1000000) {\n                alert('子订单的总金额不能大于100万，请重新选择商品进行拆单。');\n                flag = false;\n            }\n            for (var i = 0, ilen = checkeDays.length; i < ilen; i++) {\n                for (var j = i + 1; j < ilen; j++) {\n                    if (checkeDays[i] != checkeDays[j]) {\n                        alert('该子订单中所选商品账期不一致，请重新选择账期相同的商品进行拆单。');\n                        flag = false;\n                    }\n                }\n            }\n            return flag;\n        },\n        /**\n         * 生成新的子订单的box-dom\n         * @param orderIndex\n         * @returns {string}\n         * @private\n         * payType为2时为账期支付，为1时为在线支付\n         */\n        _newOrderTable: function (orderIndex) {\n            var self = this;\n            var temHtml = '';\n            var payType = self.node.find('.pay_type').data('pay-type');\n            if (payType == 2) {\n                temHtml = '<div class=\"shop_table_list order' + orderIndex + '\"data-index=' + orderIndex + '>' +\n                    '<div class=\"table_title\">子订单' + orderIndex + '</div>' +\n                    '<table><tbody>' +\n                    '<tr><th>商品名称</th><th>商品SKU</th><th>数量</th><th>单价</th><th>采购价</th><th>总价格</th><th>购买方式</th><th>账期</th></tr>' +\n                    '</tbody></table>' +\n                    '<div>';\n            } else if (payType == 1) {\n                temHtml = '<div class=\"shop_table_list order' + orderIndex + '\"data-index=' + orderIndex + '>' +\n                    '<div class=\"table_title\">子订单' + orderIndex + '</div>' +\n                    '<table><tbody>' +\n                    '<tr><th>商品名称</th><th>商品SKU</th><th>数量</th><th>单价</th><th>采购价</th><th>总价格</th><th>购买方式</th></tr>' +\n                    '</tbody></table>' +\n                    '<div>';\n            }\n\n            return temHtml\n        },\n        /**\n         * 生成新的子订单的tr-dom\n         * @param strHtml\n         * @param orderIndex\n         * @private\n         */\n        _divideNewOrder: function (strHtml, orderIndex, totalNum, unitTotalPrice, index) {\n            var newClass = '.order' + orderIndex;\n            $(newClass).find('table').append(strHtml);\n            $(newClass).find('.total_num').eq(index).html(totalNum).attr('title', totalNum);\n            $(newClass).find('.price').eq(index).html(unitTotalPrice).attr('title', unitTotalPrice);\n        },\n        /**\n         * 弹窗上的批量添加传参\n         * @param node\n         * @returns {Array}\n         * @private\n         */\n        _pageDataFn: function (node) {\n            var userJson;\n            var userArray = [];\n            var beChecked = node.parents('.popup').find('.shop_table_list').find('input[type=checkbox]:checked');\n            $.each(beChecked, function (i) {\n                userJson = beChecked.eq(i).parents('tr').data('ids');\n                if (userJson) {\n                    userArray.push(userJson);\n                }\n            });\n            return userArray;\n        },\n        /**\n         * 添加到表格上的回调\n         * @param data\n         * @private\n         */\n        _renderTable: function (data) {\n            var tableBox = $('.data-return').find('.shop_table_list');\n            $('.popup').hide();\n            tableBox.removeClass('hide');\n            tableBox.find('tbody').append(data);\n        },\n        /**\n         * 弹窗回调\n         * @param data\n         * @private\n         */\n\n        _showPopupCallback: function (data) {\n            $('.popup').html(data.messages.popup).show();\n        },\n\n        /**\n         * 数据提交 格式如下\n         * {\n                \"purchaseId\":10000,\n                \"group\":[\n                    {\n                        \"orderNo\":1,\n                        \"skuInfos\":[\n                            {\n                                \"skuId\":100000,\n                                \"skuNum\":111\n                            },\n                            {\n                                \"skuId\":1000001,\n                                \"skuNum\":111\n                            }\n                        ]\n                    },\n                    {\n                        \"orderNo\":2,\n                        \"skuInfos\":[\n                            {\n                                \"skuId\":100000,\n                                \"skuNum\":44\n                            }\n                        ]\n                    }\n                ]\n            }\n         * @private\n         */\n        _commitData: function () {\n            var self = this;\n            var userJsonStr = '';\n            var eachUserJson = {};\n            var userJson = {};\n            var group = [];\n            var temHtml = '<div class=\"loading\"></div>';\n            eachUserJson = self.node.find('.order_detail_part').data();\n            $('.shop_table_list:not(\".order_goods_split\")').each(function () {\n                var eachOrder = {};\n                var skuIdList = [];\n                eachOrder['orderNo'] = $(this).data('index');\n                $(this).find('tr').each(function () {\n\n                    if ($(this).data('sku-id')) {\n                        var eachSku = {};\n                        eachSku['skuId'] = $(this).data('sku-id');\n                        eachSku['skuNum'] = $(this).find('.total_num').html();\n                        skuIdList.push(eachSku);\n\n                    }\n\n                });\n                eachOrder['skuInfos'] = skuIdList;\n\n                group.push(eachOrder);\n            });\n            eachUserJson['group'] = group;\n            userJsonStr = JSON.stringify(eachUserJson);\n            userJson['splitContent'] = userJsonStr;\n            $('body').append(temHtml);\n            $(this).packajax({\n                ajax_url: '/vender/b/purchase/remote/splitAudit.htm',\n                user: userJson,\n                succ: self._showPopupCallback\n            });\n\n        },\n        /**\n         * 弹窗回调\n         */\n        _showPopupCallback: function (data) {\n            $('.popup').html(data.messages.popup).show();\n            $('.loading').remove();\n        },\n        /**\n         * 重新加载\n         */\n        reload: function () {\n            this._init();\n        }\n    });\n\n\n    /**\n     * 暴露全局变量\n     */\n    if (!w.splitOrder) {\n        w.splitOrder = function () {\n            new splitOrder({\n                node: $('.main_content')\n            });\n        };\n    }\n\n    /**\n     * 商品推荐入口\n     */\n    $(function () {\n        w.splitOrder();\n    });\n\n})(window, jQuery);\n/***\n * jiangsonglin 2016-07-11\n */\n(function (w, $) {\n    function yaoOrderDeliver(opts) {\n        /**\n         * 默认参数配置\n         * @type {{node: null}}\n         */\n        var defaultOpts = {\n            node: null\n        };\n        /**\n         * 属性选择容器\n         */\n        this.node = opts.node;\n\n        /**\n         * 参数合并\n         */\n        this.opts = $.extend(opts);\n\n        this._init();\n    }\n\n    $.extend(yaoOrderDeliver.prototype, {\n        /**\n         * 初始化入口\n         * @private\n         */\n        _init: function () {\n            var self = this;\n\n            self.shipmentTypeSelect = $('#yao_order_deliver_shipment_select');\n            self.deliverBtn = $('#yao_order_deliver_btn');\n\n            if (self.shipmentTypeSelect.find('option:selected').length && self.shipmentTypeSelect.find('option:selected').val().length) {\n                self._selectShipmentType();\n            }\n\n            self._addEvent();\n        },\n\n        _errorClass: 'border: 2px solid #E13B41!important',\n\n        _needOrNot: function (type, obj) {\n            if (type == false) {\n                if (obj[0].tagName == 'INPUT') {\n                    obj.removeClass('error');\n                } else {\n                    obj.attr('style', '');\n                }\n            } else {\n                if (obj[0].tagName == 'INPUT') {\n                    obj.addClass('error');\n                } else {\n                    obj.attr('style', yaoOrderDeliver.prototype._errorClass);\n                }\n            }\n        },\n\n        _getExpressSelectHtml: function (expressList) {\n            var html = '<option selected=\"\" disabled=\"\" value=\"\" class=\"hide\">选择物流公司</option>';\n            for (var i = 0; i < expressList.length; i++) {\n                companyInfo = expressList[i];\n                var companyId = companyInfo['logisticsId'];\n                var companyName = companyInfo['logisticsName'];\n                html += '<option value=\"' + companyId + '\">' + companyName + '</option>';\n            }\n            return html;\n        },\n        /**\n         * 事件绑定\n         * @private\n         */\n        _addEvent: function () {\n            var self = this;\n\n            self.shipmentTypeSelect.on('change', function () {\n                self._selectShipmentType();\n            });\n\n            self.deliverBtn.on('click', function () {\n                self._deliver();\n            })\n\n            $('body').delegate('#yao_order_deliver_expressCompany_select', 'change', function () {\n                self._expressCompanySelect();\n            });\n\n        },\n\n        // 配送方式select选择\n        _selectShipmentType: function () {\n            var expressNumberInput = $('input[name=\"expressNumber\"]');\n            //var customerCodeInput = $('input[name=\"customerCode\"]');\n            var shipmentTypeSelect = $('#yao_order_deliver_shipment_select');\n            var expressCompanySelect = $('#yao_order_deliver_expressCompany_select');\n\n            var shipmentType = shipmentTypeSelect.find('option:selected').val();\n            //var customerCode = $.trim(customerCodeInput.val());\n            // 去掉配送方式select上的红框\n            yaoOrderDeliver.prototype._needOrNot(false, shipmentTypeSelect);\n            yaoOrderDeliver.prototype._needOrNot(false, expressNumberInput);\n            // 京配\n            if (shipmentType == 1) {\n                expressCompanySelect.hide();\n                //if (!customerCode) {\n                //    yaoOrderDeliver.prototype._needOrNot(true, customerCodeInput);\n                //    //shipmentTypeSelect.val('');\n                //    customerCodeInput.show();\n                //}\n                //else {\n                $.ajax({\n                    type: 'POST',\n                    cache: false,\n                    url: '/vender/b/pop_purchase_ajax/queryDeliverId',\n                    //data    : {\n                    //    customerCode: customerCode\n                    //},\n                    dataType: 'json',\n                    success: function (data) {\n                        if (data['deliverId']) {\n                            expressNumberInput.val(data['deliverId']);\n                            //expressCompanySelect.hide();\n                            expressNumberInput.attr('disabled', true);\n                            //customerCodeInput.attr(\"disabled\", true);\n                            //customerCodeInput.show();\n                        } else {\n                            alert('京配运单号获取失败');\n                        }\n                    },\n                    error: function () {\n                        alert('京配运单号获取失败');\n                    }\n                });\n                //yaoOrderDeliver.prototype._needOrNot(false, customerCodeInput);\n                //}\n            }\n            // 第三方快递\n            else if (shipmentType == 3) {\n                //customerCodeInput.hide();\n                //yaoOrderDeliver.prototype._needOrNot(false, customerCodeInput);\n                $.ajax({\n                    type: 'POST',\n                    cache: false,\n                    url: '/vender/b/pop_purchase_ajax/queryExpress',\n                    data: {},\n                    dataType: 'json',\n                    success: function (data) {\n                        if (data['expressList']) {\n                            var html = yaoOrderDeliver.prototype._getExpressSelectHtml(data['expressList']);\n                            expressCompanySelect.html(html);\n                            expressCompanySelect.show();\n                            expressNumberInput.val('');\n                            //customerCodeInput.val('');\n                            expressNumberInput.attr('disabled', false);\n                            //customerCodeInput.attr(\"disabled\", false);\n                        } else {\n                            alert('快递公司获取失败');\n                        }\n                    },\n                    error: function () {\n                        alert('快递公司获取失败');\n                    }\n                });\n            }\n        },\n\n        _expressCompanySelect: function () {\n            var expressCompanySelect = $('#yao_order_deliver_expressCompany_select');\n            yaoOrderDeliver.prototype._needOrNot(false, expressCompanySelect);\n            //var customerCodeInput = $('input[name=\"customerCode\"]');\n            //customerCodeInput.hide();\n            expressCompanySelect.show();\n        },\n\n        _deliver: function () {\n            var expressNumberInput = $('input[name=\"expressNumber\"]');\n            var customerCodeInput = $('input[name=\"customerCode\"]');\n            var shipmentTypeSelect = $('#yao_order_deliver_shipment_select');\n            var expressCompanySelect = $('#yao_order_deliver_expressCompany_select');\n\n            var shipmentType = shipmentTypeSelect.find('option:selected').val();\n            var customerCode = $.trim(customerCodeInput.val());\n            var expressNum = $.trim(expressNumberInput.val());\n            // 必须选择配送方式\n            if (!shipmentType) {\n                yaoOrderDeliver.prototype._needOrNot(true, shipmentTypeSelect);\n                return;\n            }\n            if (shipmentType == 3) {\n                var expressCompanyNum = expressCompanySelect.find('option:selected').val();\n                var expressCompanyName = expressCompanySelect.find('option:selected').text();\n                if (!expressCompanyNum || !expressCompanyName) {\n                    expressCompanySelect.attr('style', yaoOrderDeliver.prototype._errorClass).show();\n                    return;\n                }\n            }\n            if (!expressNum) {\n                yaoOrderDeliver.prototype._needOrNot(true, expressNumberInput);\n                return;\n            }\n            // 开始出库\n            $.ajax({\n                type: 'POST',\n                cache: false,\n                url: '/vender/b/pop_purchase_ajax/deliver',\n                data: {\n                    purchaseId: $.trim($('#yao_purchase_order_id').val()),\n                    shipmentType: shipmentType,\n                    expressCompanyNum: expressCompanyNum,\n                    expressCompanyName: expressCompanyName,\n                    customerCode: customerCode,\n                    expressNum: expressNum\n                },\n                dataType: 'json',\n                success: function (data) {\n                    if (data.success == true) {\n                        alert('出库成功');\n                        window.location.href = $.trim($('#orderListUrl').val());\n                    } else {\n                        alert('出库失败');\n                    }\n                },\n                error: function () {\n                    alert('出库失败');\n                }\n            });\n        },\n\n        reload: function () {\n            this._init();\n        }\n    });\n\n\n    /**\n     * 暴露全局变量\n     */\n    if (!w.yaoOrderDeliver) {\n        w.yaoOrderDeliver = function () {\n            new yaoOrderDeliver({\n                node: $('.main_content')\n            });\n        };\n    }\n\n    /**\n     * 商品推荐入口\n     */\n    $(function () {\n        w.yaoOrderDeliver();\n    });\n\n})(window, jQuery);\n/***\n * jiangsonglin 2016-07-11\n */\n\nvar yaoPurchaseDetailJS = {};\n\nyaoPurchaseDetailJS.wareSearchResultInfo = null;\nyaoPurchaseDetailJS.wareInfo = null;\n\n(function (w, $) {\n    function yaoPurchaseDetail(opts) {\n        /**\n         * 默认参数配置\n         * @type {{node: null}}\n         */\n        var defaultOpts = {\n            node: null\n        };\n        /**\n         * 属性选择容器\n         */\n        this.node = opts.node;\n\n        /**\n         * 参数合并\n         */\n        this.opts = $.extend(opts);\n\n        this._init();\n    }\n\n\n    $.extend(yaoPurchaseDetail.prototype, {\n        /**\n         * 初始化入口\n         * @private\n         */\n        _init: function () {\n            var self = this;\n\n            self.wareTable = $('#yao_purchase_edit_ware_table');\n            self.updateAndApproveBtn = $('#yao_purchase_order_update_approve_btn');\n            self.updateAndApproveBtn1 = $('#yao_purchase_order_update_approve_btn1');\n            self.auditApproveBtn = $('#yao_purchase_approve_btn');\n            self.auditRejectPopupBtn = $('#yao_purchase_reject_popup_btn');\n\n            yaoPurchaseDetailJS.wareInfo = self._getWarePriceInfo();\n\n            self._addEvent();\n        },\n\n        /**\n         * 事件绑定\n         * @private\n         */\n        _addEvent: function () {\n            var self = this;\n\n            self.wareTable.delegate('.yao_purchase_eidt_ware_btn', 'click', function () {\n                self._toEdit($(this));\n            });\n\n            self.wareTable.delegate('.yao_purchase_add_ware_btn', 'click', function () {\n                var purchaseId = $(this).attr('data-purchase-id');\n                purchaseId = typeof purchaseId == 'undefined' ? '' : purchaseId;\n                self._popAddWareWindow(purchaseId);\n            });\n\n            self.wareTable.delegate('.yao_purchase_del_selected_ware_btn', 'click', function () {\n                self._deleteSelectWare($('#yao_purchase_edit_ware_table'));\n            });\n\n            self.wareTable.delegate('.yao_purchase_del_ware_btn', 'click', function () {\n                self._deleteWare($(this));\n            });\n\n            self.wareTable.delegate('.yao_purchase_ware_eidt_save_btn', 'click', function () {\n                self._saveWarePriceAndNum($(this));\n            });\n\n            $('body').delegate('.yao_purchase_order_search_ware_btn', 'click', function () {\n                self._popupSearchWare();\n            });\n\n            $('body').delegate('#yao_add_ware_to_table_btn', 'click', function () {\n                self._addWareToPurcahseWareList();\n            });\n\n            self.updateAndApproveBtn.on('click', function () {\n                if ($('#hasCoupons').val() == 'true') {\n                    self._checkCoupons(function () {\n                        self._updateAndApprove(0)\n                    });\n                } else {\n                    self._updateAndApprove(0);\n                }\n            });\n            self.updateAndApproveBtn1.on('click', function () {\n                if ($('#hasCoupons').val() == 'true') {\n                    self._checkCoupons(function () {\n                        self._updateAndApprove(0);\n                    });\n                } else {\n                    self._updateAndApprove(0);\n                }\n            });\n\n            self.auditApproveBtn.on('click', function () {\n                self._auditApprove(0);\n            });\n\n            self.auditRejectPopupBtn.on('click', function () {\n                self._auditRejectPopup();\n            });\n\n            $('body').delegate('#yao_purchase_reject_btn', 'click', function () {\n                self._auditReject();\n            });\n        },\n\n        // 更新当前页面价格和商品的展示\n        _updateDisplay: function () {\n            var self = this;\n            var wareInfoList = yaoPurchaseDetailJS.wareInfo;\n            var html = '';\n            for (var i in wareInfoList) {\n                var wareInfo = wareInfoList[i];\n                if (wareInfo.skuName) {\n                    var editHtml = '';\n                    if (wareInfo.disabled) {\n                        editHtml = '<div class=\"btngray smallbtn inline\">编辑</div> ' +\n                            '<div class=\"btngray smallbtn inline\">删除</div>';\n                    } else {\n                        editHtml = '<div class=\"btnblue smallbtn yao_purchase_eidt_ware_btn inline\">编辑</div> ' +\n                            '<div class=\"btnblue smallbtn yao_purchase_del_ware_btn inline\">删除</div>';\n                    }\n                    html = html +\n                        '<tr class=\"' + (wareInfo.disabled ? 'disabled' : '') + '\">' +\n                        '<td><input type=\"checkbox\" name=\"edit_purchase_del_checkbox\"></td>' +\n                        '<td title=\"' + wareInfo.skuName + '\" name=\"skuName\">' + wareInfo.skuName +\n                        '<input type=\"text\" class=\"hide\" value=\"' + wareInfo.cat3Id + '\" name=\"cat3Id\">' +\n                        '<input type=\"text\" class=\"hide\" value=\"' + wareInfo.guid + '\" name=\"guid\">' +\n                        '<input type=\"text\" class=\"hide\" value=\"' + wareInfo.type + '\" name=\"type\">' +\n                        '<input type=\"text\" class=\"hide\" value=\"' + wareInfo.skuId + '\" name=\"skuId\">' +\n                        '<input type=\"text\" class=\"hide\" value=\"' + wareInfo.isLimitArea + '\" name=\"isLimitArea\">' +\n                        '<input type=\"text\" class=\"hide\" value=\"' + wareInfo.skuName + '\" name=\"skuName\">' +\n                        '</td>' +\n                        '<td title=\"' + wareInfo.skuPrice + '\" name=\"skuPrice\">' + wareInfo.skuPrice + '</td>' +\n                        '<td title=\"' + wareInfo.purchasePrice + '\" name=\"purchasePrice\" class=\"to_edit\">' + wareInfo.purchasePrice + '</td>' +\n                        '<td title=\"' + wareInfo.discount + '\" name=\"discount\">' + wareInfo.discount + '</td>' +\n                        '<td title=\"' + wareInfo.purchaseNum + '\" name=\"purchaseNum\" class=\"to_edit\">' + wareInfo.purchaseNum + '</td>' +\n                        '<td title=\"' + wareInfo.money + '\" name=\"shouldPay\">' + wareInfo.shouldPay + '</td>' +\n                        '<td>' +\n                        editHtml +'</td>' +\n                        '</tr>';\n                }\n            }\n            self.wareTable.find('tbody tr:not(:first)').remove();\n            self.wareTable.find('tbody').append(html);\n            $('#purchaseOrderTotalMoney').html(wareInfoList['totalMoney']);\n            //$(\"#purchaseOrderTotalMoney1\").html(wareInfoList[\"totalMoney\"]);\n            $('#purchaseOrderTotalDiscount').html(wareInfoList['totalDiscount']);\n            $('#purchaseOrderShouldPay').html(wareInfoList['shouldPay']);\n            $('#purchaseOrderShouldPay1').html(wareInfoList['shouldPay']);\n\n        },\n\n        // 删除商品\n        _deleteWare: function (node) {\n            var skuArray = this._getWareSkus();\n            if (skuArray.length <= 1) {\n                alert('至少保留一个商品!');\n                return false;\n            }\n            var trNode = node.parent().parent();\n            if (confirm('是否删除此商品!')) {\n                var skuId = trNode.find('input[name=\"skuId\"]').val();\n                var type = trNode.find('input[name=\"type\"]').val();\n                this._removeWareFromObj(skuId + '_' + type); // 从对象中删除商品\n                this._updateDisplay();\n            }\n        },\n        _deleteSelectWare: function (parentNode) {\n            var selectBoxes = $('input[name=\"edit_purchase_del_checkbox\"]:checked'),\n                trs = $('#yao_purchase_edit_ware_table tbody tr');\n            if (selectBoxes.length == trs.length - 1) {\n                alert('至少保留一个商品!');\n            } else {\n                if (selectBoxes.length && confirm('是否删除所选商品？')) {\n                    for (var i = 0; i < selectBoxes.length; i++) {\n                        var skuId = selectBoxes.eq(i).parents('tr').find('input[name=\"skuId\"]').val();\n                        var type = selectBoxes.eq(i).parents('tr').find('input[name=\"type\"]').val();\n                        this._removeWareFromObj(skuId + '_' + type); // 从对象中删除商品\n                    }\n                    this._updateDisplay();\n                }\n            }\n\n        },\n        // 添加商品\n        _addWare: function (wareInfoFromTable) {\n            var self = this;\n            var skuId = wareInfoFromTable['shopSkuId'];\n            var type = wareInfoFromTable['type'];\n            //如果该商品是不可编辑状态，返回\n            var skuItems = $('#yao_purchase_edit_ware_table').find('tr');\n            for (var i = 0; i < skuItems.length; i++) {\n                var skuItem = skuItems.eq(i);\n                if (skuItem.find('[name=\"skuId\"]').val() == skuId && skuItem.find('[name=\"type\"]').val() == type && skuItem.hasClass('disabled')) {\n                    return;\n                }\n            }\n            var wareForAdd = {\n                skuId: wareInfoFromTable['shopSkuId'],\n                purchasePrice: wareInfoFromTable['wholesalePrice'].toFixed(2),\n                skuPrice: wareInfoFromTable['wholesalePrice'].toFixed(2),\n                shouldPay: wareInfoFromTable['wholesalePrice'].toFixed(2),\n                discount: '0.00',\n                purchaseNum: 1,\n                skuName: wareInfoFromTable['spuName'],\n                cat3Id: wareInfoFromTable['cat3'],\n                guid: wareInfoFromTable['guid'],\n                type: wareInfoFromTable['type'],\n                disabled: wareInfoFromTable['disabled'],\n                isLimitArea: wareInfoFromTable['isLimitArea']\n            };\n            if (yaoPurchaseDetailJS.wareInfo[skuId + '_' + type]) {\n                yaoPurchaseDetail.prototype._removeWareFromObj(skuId + '_' + type);\n            }\n            yaoPurchaseDetailJS.wareInfo[skuId + '_' + type] = wareForAdd;\n\n            yaoPurchaseDetailJS.wareInfo['totalMoney'] = (yaoPurchaseDetailJS.wareInfo['totalMoney'] * 1 + wareForAdd['skuPrice'] * wareForAdd['purchaseNum']).toFixed(2);\n            yaoPurchaseDetailJS.wareInfo['shouldPay'] = (yaoPurchaseDetailJS.wareInfo['shouldPay'] * 1 + wareForAdd['purchasePrice'] * wareForAdd['purchaseNum']).toFixed(2);\n            yaoPurchaseDetailJS.wareInfo['totalDiscount'] = (yaoPurchaseDetailJS.wareInfo['totalMoney'] - yaoPurchaseDetailJS.wareInfo['shouldPay']).toFixed(2);\n        },\n\n        _removeWareFromObj: function (skuId) {\n            var self = this;\n            var deleteWareInfo = yaoPurchaseDetailJS.wareInfo[skuId];\n            delete(yaoPurchaseDetailJS.wareInfo[skuId]);\n            yaoPurchaseDetailJS.wareInfo['totalMoney'] = (yaoPurchaseDetailJS.wareInfo['totalMoney'] - deleteWareInfo['skuPrice'] * deleteWareInfo['purchaseNum']).toFixed(2);\n            yaoPurchaseDetailJS.wareInfo['shouldPay'] = (yaoPurchaseDetailJS.wareInfo['shouldPay'] - deleteWareInfo['purchasePrice'] * deleteWareInfo['purchaseNum']).toFixed(2);\n            yaoPurchaseDetailJS.wareInfo['totalDiscount'] = (yaoPurchaseDetailJS.wareInfo['totalMoney'] - yaoPurchaseDetailJS.wareInfo['shouldPay']).toFixed(2);\n        },\n\n        // 获取当前商品列表中存在的sku\n        _getWareSkus: function () {\n            var skuArray = [];\n            this.wareTable.find('[name=\"skuId\"]').each(function () {\n                skuArray.push($.trim($(this).val()));\n            });\n            return skuArray;\n        },\n\n        // 获取当前列表中商品价格和数量信息\n        _getWarePriceInfo: function () {\n            var wareInfoMap = {};\n            var skuId, skuPrice, purchasePrice, purchaseNum, cat3, guid, type, isLimitArea;\n            var totalMoney = 0;\n            var shouldPay = 0;\n            var trs = $('#yao_purchase_edit_ware_table').find('tbody tr');\n            trs.each(function () {\n                var shopSkuId = $.trim($(this).find('input[name=\"skuId\"]').val());\n                if (shopSkuId) {\n                    var wareInfo = {};\n                    skuId = shopSkuId;\n                    skuPrice = ($.trim($(this).find('[name=\"skuPrice\"]').text())) * 1;\n                    purchasePrice = ($.trim($(this).find('[name=\"purchasePrice\"]').text())) * 1;\n                    purchaseNum = ($.trim($(this).find('[name=\"purchaseNum\"]').text())) * 1;\n                    cat3 = $.trim($(this).find('[name=\"cat3Id\"]').val());\n                    guid = $.trim($(this).find('[name=\"guid\"]').val());\n                    type = $.trim($(this).find('[name=\"type\"]').val()); //type=0主商品,type=2赠品\n                    isLimitArea = $.trim($(this).find('[name=\"isLimitArea\"]').val());\n                    if (typeof type == 'undefined' || type == '') {\n                        type = 0;\n                    }\n\n                    wareInfo['skuId'] = shopSkuId;\n                    wareInfo['skuName'] = ($.trim($(this).find('[name=\"skuName\"]').text()));\n                    wareInfo['skuPrice'] = skuPrice.toFixed(2);\n                    wareInfo['purchasePrice'] = purchasePrice.toFixed(2);\n                    wareInfo['purchaseNum'] = purchaseNum;\n                    wareInfo['discount'] = (skuPrice - purchasePrice).toFixed(2);\n                    wareInfo['money'] = (skuPrice * purchaseNum).toFixed(2);\n                    wareInfo['shouldPay'] = (purchasePrice * purchaseNum).toFixed(2);\n                    wareInfo['cat3Id'] = cat3;\n                    wareInfo['guid'] = typeof guid == 'undefined' ? '' : guid;\n                    wareInfo['type'] = type;\n                    wareInfo['isLimitArea'] = isLimitArea;\n                    wareInfo['disabled'] = $(this).hasClass('disabled');\n\n                    totalMoney = totalMoney + parseFloat(wareInfo['money']);\n                    shouldPay = shouldPay + parseFloat(wareInfo['shouldPay']);\n\n                    wareInfoMap[skuId + '_' + type] = wareInfo;\n                }\n            });\n            wareInfoMap['totalMoney'] = totalMoney.toFixed(2);\n            wareInfoMap['totalDiscount'] = (totalMoney - shouldPay).toFixed(2);\n            wareInfoMap['shouldPay'] = shouldPay.toFixed(2);\n\n            return wareInfoMap;\n        },\n\n        // 将价格与数量变为可编辑状态\n        _toEdit: function (node) {\n            var editArea = node.parent().parent().find('.to_edit');\n            editArea.each(function () {\n                var $this = $(this);\n                var nowVal = null;\n                var editKind = 'input';\n                switch (editKind) {\n                    case 'input':\n                        nowVal = $this.text();\n                        $this.removeClass('to_edit').addClass('beEditing').html('<input type=\"text\" value=\"' + nowVal + '\">');\n                        break;\n                    default:\n                        break;\n                }\n            });\n            node.parent().html('<div class=\"btnblue smallbtn inline yao_purchase_ware_eidt_save_btn\">保存</div>');\n        },\n\n        // 保存当前的修改\n        _saveWarePriceAndNum: function (node) {\n            var _self = this;\n            var editArea = node.parent().parent().find('.beEditing');\n\n            var skuId = $.trim(node.parent().parent().find('[name=\"skuId\"]').val());\n            var price = $.trim(node.parent().parent().find('[name=\"purchasePrice\"]').children().val()) * 1;\n            var num = $.trim(node.parent().parent().find('[name=\"purchaseNum\"]').children().val()) * 1;\n\n            if (!yaoPurchaseDetail.prototype._isPositiveNum(num)) {\n                alert('数量输入不正确');\n                return false;\n            }\n            if (!yaoPurchaseDetail.prototype._jdmoney(price)) {\n                alert('价格输入不正确');\n                return false;\n            }\n            //使用优惠券时进行判断\n            if ($('#hasCoupons').val() == 'true') {\n                _self._checkCoupons(function () {\n                    editArea.each(function () {\n                        var $this = $(this);\n                        var nowShow = $.trim(($this.find('input').val())) * 1;\n                        var editKind = 'input';\n                        switch (editKind) {\n                            case 'input':\n                                $this.html(nowShow).removeClass('beEditing').addClass('to_edit');\n                                break;\n                            default:\n                                break;\n                        }\n                    });\n                    node.parent().html('<div class=\"btnblue smallbtn yao_purchase_eidt_ware_btn inline\">编辑</div> ' + '<div class=\"btnblue smallbtn yao_purchase_del_ware_btn inline\">删除</div>');\n                    yaoPurchaseDetail.prototype._updatePriceInfoAfterEdit();\n                });\n            } else {\n                editArea.each(function () {\n                    var $this = $(this);\n                    var nowShow = $.trim(($this.find('input').val())) * 1;\n                    var editKind = 'input';\n                    switch (editKind) {\n                        case 'input':\n                            $this.html(nowShow).removeClass('beEditing').addClass('to_edit');\n                            break;\n                        default:\n                            break;\n                    }\n                });\n                node.parent().html('<div class=\"btnblue smallbtn yao_purchase_eidt_ware_btn inline\">编辑</div> ' + '<div class=\"btnblue smallbtn yao_purchase_del_ware_btn inline\">删除</div>');\n                yaoPurchaseDetail.prototype._updatePriceInfoAfterEdit();\n            }\n        },\n\n        //是否为正整数\n        _isPositiveNum: function (s) {\n            var re = /^[0-9]*[1-9][0-9]*$/;\n            return re.test(s)\n        },\n        // 判断是否为正实数。\n        _jdmoney: function (money) {\n            var t = /^\\d+(\\.\\d+)?$/;\n            return t.test(money)\n        },\n\n        // 修改商品信息后, 更新价格信息\n        _updatePriceInfoAfterEdit: function () {\n            var warePriceInfo = yaoPurchaseDetail.prototype._getWarePriceInfo();\n            yaoPurchaseDetailJS.wareInfo = warePriceInfo;\n            // 更新商品table\n            var trs = $('#yao_purchase_edit_ware_table').find('tbody tr');\n            trs.each(function () {\n                var shopSkuId = $.trim($(this).find('input[name=\"skuId\"]').val());\n                var type = $.trim($(this).find('input[name=\"type\"]').val());\n                if (shopSkuId) {\n                    var warePrice = warePriceInfo[shopSkuId + '_' + type];\n                    $(this).find('td[name=\"purchasePrice\"]').html(warePrice['purchasePrice']);\n                    $(this).find('td[name=\"discount\"]').html(warePrice['discount']);\n                    $(this).find('td[name=\"shouldPay\"]').html(warePrice['shouldPay']);\n                }\n            });\n            // 更新采购单信息\n            $('#purchaseOrderTotalMoney').html(warePriceInfo['totalMoney']);\n            //$('#purchaseOrderTotalMoney1').html(warePriceInfo[\"totalMoney\"]);\n            $('#purchaseOrderTotalDiscount').html(warePriceInfo['totalDiscount']);\n            $('#purchaseOrderShouldPay').html(warePriceInfo['shouldPay']);\n            $('#purchaseOrderShouldPay1').html(warePriceInfo['shouldPay']);\n        },\n\n        // 弹出添加拒绝窗口\n        _auditRejectPopup: function () {\n            var popWindowHtml = $('#yao_purchase_order_reject_html').html();\n            $('.popup').html(popWindowHtml).show();\n        },\n        // 弹出添加商品的窗口\n        _popAddWareWindow: function (purchaseId) {\n            $.ajax({\n                type: 'POST',\n                cache: false,\n                url: '/vender/b/pop_purchase_ajax/popupAdd',\n                data: {\n                    purchaseId: purchaseId\n                },\n                dataType: 'html',\n                success: function (data) {\n                    $('.popup').html(data).show();\n                },\n                error: function () {\n                    alert('获取商品列表失败，请稍后再试');\n                }\n            });\n        },\n\n        // 弹出窗口翻页\n        _searchWare: function () {\n            $.ajax({\n                type: 'POST',\n                cache: false,\n                url: '/vender/b/pop_purchase_ajax/queryWare',\n                data: {},\n                dataType: 'html',\n                success: function (data) {\n                    $('.data-return-dup .clear').html(data);\n                },\n                error: function () {\n                    alert('queryWare失败，请稍后再试');\n                }\n            });\n        },\n\n        _getChooseWare: function () {\n            var chooseRadio = $('input[name=\"edit_purchase_add_radio\"]:checked');\n            if (chooseRadio) {\n                var skuId = $.trim(chooseRadio.val());\n                var price = $.trim(chooseRadio.parent().next().next().text());\n                var spuname = $.trim(chooseRadio.parent().next().text());\n                var cat3 = $.trim(chooseRadio.parent().find('input[name=\\'cid3\\']').val());\n                var guid = $.trim(chooseRadio.parent().find('input[name=\\'guid\\']').val());\n                var type = $.trim(chooseRadio.parent().find('input[name=\\'type\\']').val());\n                if (typeof type == 'undefined' || type == '') {\n                    type = 0;\n                }\n                var isLimitArea = chooseRadio.parent().find('input[name=\\'isLimitArea\\']').val();\n                var disabled = $('input[value=\"' + skuId + '\"]').parents('tr').hasClass('disabled'); //添加商品是否允许编辑\n                yaoPurchaseDetailJS.wareSearchResultInfo = {\n                    shopSkuId: skuId,\n                    wholesalePrice: price * 1,\n                    spuName: spuname,\n                    cat3: cat3,\n                    guid: typeof guid == 'undefined' ? '' : guid,\n                    type: type, //若无type，默认为主商品0\n                    disabled: disabled,\n                    isLimitArea: isLimitArea\n                };\n            }\n        },\n\n        // 将搜索结果加入到商品列表\n        _addWareToPurcahseWareList: function () {\n            var tbody = this.wareTable.find('tbody');\n            yaoPurchaseDetail.prototype._getChooseWare();\n            if (!yaoPurchaseDetailJS.wareSearchResultInfo) {\n                alert('请选择商品');\n                return;\n            }\n            if (yaoPurchaseDetailJS.wareSearchResultInfo['wholesalePrice'] <= 0) {\n                alert('商品价格错误');\n                return;\n            }\n            if (yaoPurchaseDetailJS.wareSearchResultInfo['isLimitArea'] == 'true') {\n                alert('超出卖家销售区域，请核实购买');\n                return;\n            }\n\n            this._addWare(yaoPurchaseDetailJS.wareSearchResultInfo);\n\n            this._updateDisplay();\n            $('.popup').hide();\n        },\n\n        //检查优惠券：编辑保存时没有callback，保存并审核执行callback\n        _checkCoupons: function (callback) {\n            var trs = this.wareTable.find('tbody tr');\n            var warePriceInfo = yaoPurchaseDetail.prototype._getWarePriceInfo();\n            var totalMoney = warePriceInfo['totalMoney'];\n            var totalDiscount = warePriceInfo['totalDiscount'];\n            var shouldPay = warePriceInfo['shouldPay'];\n            if (totalMoney * 1 >= 100000000.00 || totalDiscount * 1 >= 100000000.00 || shouldPay * 1 >= 100000000.00) {\n                alert('金额过高, 请修改商品信息后再试');\n                return false;\n            }\n\n            var purchaseWareArray = [];\n            trs.each(function () {\n                var shopSkuId = $(this).find('input[name=\"skuId\"]').val();\n                if (shopSkuId) {\n                    var purchaseWareInfo = {};\n                    var purchasePrice = $(this).find('[name=\"purchasePrice\"]').hasClass('beEditing') ? $(this).find('[name=\"purchasePrice\"]').children().val() : $(this).find('[name=\"purchasePrice\"]').text();\n                    var purchaseNum = $(this).find('[name=\"purchaseNum\"]').hasClass('beEditing') ? $(this).find('[name=\"purchaseNum\"]').children().val() : $(this).find('[name=\"purchaseNum\"]').text();\n                    var cat3Id = $(this).find('[name=\"cat3Id\"]').val();\n\n                    purchaseWareInfo['shopSkuId'] = shopSkuId;\n                    purchaseWareInfo['purchasePrice'] = purchasePrice;\n                    purchaseWareInfo['purchaseNum'] = purchaseNum;\n                    purchaseWareInfo['cat3Id'] = cat3Id;\n\n                    purchaseWareArray.push(purchaseWareInfo);\n                }\n            });\n\n            // 检查优惠券\n            var purchaseId = $.trim($('#edit_purchase_order_id').val());\n            $.ajax({\n                type: 'POST',\n                cache: false,\n                traditional: true,\n                //url        : '/vender/b/pop_purchase_ajax/updateAndApprove',\n                url: '/vender/b/pop_purchase_ajax/checkCoupon',\n                data: {\n                    purchaseId: purchaseId,\n                    wareInfos: JSON.stringify(purchaseWareArray)\n                },\n                dataType: 'json',\n                async: false,\n                success: function (data) {\n                    if (data.success == true) {\n                        //alert(\"审核成功\");\n                        //typeof callback !== \"undefined\" && callback &&\n                        callback();\n                        //window.location.reload();\n                    } else {\n                        alert(data.msg);\n                    }\n                },\n                error: function () {\n                    alert('checkCoupon失败，请稍后再试');\n                }\n            });\n\n        },\n\n\n\n        _updateAndApprove: function (confirmAgain) {\n            //confirm 0:接口校验包装单位完整性 1:跳过包装单位完整性校验\n            // 获取当前商品信息\n            var self = this;\n            //有商品正在编辑\n            if (self.wareTable.find('.yao_purchase_ware_eidt_save_btn').length) {\n                alert('请先保存正在编辑的商品再进行审核！');\n                return;\n            }\n            var trs = $('#yao_purchase_edit_ware_table').find('tbody tr');\n            var warePriceInfo = yaoPurchaseDetail.prototype._getWarePriceInfo();\n            var totalMoney = warePriceInfo['totalMoney'];\n            var totalDiscount = warePriceInfo['totalDiscount'];\n            var shouldPay = warePriceInfo['shouldPay'];\n            if (totalMoney * 1 >= 100000000.00 || totalDiscount * 1 >= 100000000.00 || shouldPay * 1 >= 100000000.00) {\n                alert('金额过高, 请修改商品信息后再试');\n                return;\n            }\n\n            var purchaseWareArray = [];\n            var limitAreaItems = [];\n            trs.each(function () {\n                var shopSkuId = $(this).find('input[name=\"skuId\"]').val();\n                if (shopSkuId) {\n                    var purchaseWareInfo = {};\n                    var purchasePrice = $(this).find('[name=\"purchasePrice\"]').text();\n                    var purchaseNum = $(this).find('[name=\"purchaseNum\"]').text();\n                    var cat3Id = $(this).find('[name=\"cat3Id\"]').val();\n                    var guId = $(this).find('[name=\"guid\"]').val();\n                    var type = $(this).find('[name=\"type\"]').val();\n                    var isLimitArea = $(this).find('[name=\"isLimitArea\"]').val();\n                    var skuName = $.trim($(this).find('input[name=\"skuName\"]').val());\n\n                    purchaseWareInfo['shopSkuId'] = shopSkuId;\n                    purchaseWareInfo['purchasePrice'] = purchasePrice;\n                    purchaseWareInfo['purchaseNum'] = purchaseNum;\n                    purchaseWareInfo['cat3Id'] = cat3Id;\n                    purchaseWareInfo['guid'] = guId;\n                    purchaseWareInfo['type'] = type;\n                    purchaseWareInfo['skuName'] = skuName;\n\n                    purchaseWareArray.push(purchaseWareInfo);\n\n                    if (isLimitArea == 'true') {\n                        limitAreaItems.push(skuName);\n                    }\n                }\n            });\n\n            if (limitAreaItems.length) {\n                alert(limitAreaItems.join('、') + '超出卖家销售区域，请核实后购买。');\n                return;\n            }\n\n            var purchaseId = $.trim($('#edit_purchase_order_id').val());\n            $.ajax({\n                type: 'POST',\n                cache: false,\n                traditional: true,\n                url: '/vender/b/pop_purchase_ajax/updateAndApprove',\n                data: {\n                    purchaseId: purchaseId,\n                    wareInfos: JSON.stringify(purchaseWareArray),\n                    confirm: confirmAgain\n                },\n                dataType: 'json',\n                success: function (data) {\n                    if (data.success == true) {\n                        alert('审核成功');\n                        window.location.reload();\n                    } else {\n                        if (typeof data.packageFailed !== 'undefined' && data.packageFailed) {\n                            var r = confirm(data.msg);\n                            if (r) {\n                                self._updateAndApprove(1);\n                            }\n                        } else {\n                            alert(data.msg);\n                        }\n                    }\n                },\n                error: function (r) {\n                    alert('审核失败，请稍后再试');\n                }\n            });\n\n        },\n\n        // 直接审核通过\n        _auditApprove: function (confirmAgain) {\n            //confirm 0:接口校验包装单位完整性 1:跳过包装单位完整性校验\n            var self = this;\n            var purchaseId = $.trim($('#yao_purchase_order_id').val());\n\n            $.ajax({\n                type: 'POST',\n                cache: false,\n                traditional: true,\n                url: '/vender/b/pop_purchase_ajax/auditApprove',\n                data: {\n                    purchaseId: purchaseId,\n                    confirm: confirmAgain\n                },\n                dataType: 'json',\n                success: function (data) {\n                    if (data.success == true) {\n                        alert('审核成功');\n                        window.location.reload();\n                    } else {\n                        if (typeof data.packageFailed !== 'undefined' && data.packageFailed) {\n                            var r = confirm('审核失败.' + data.msg);\n                            if (r) {\n                                self._auditApprove(1);\n                            }\n                        } else {\n                            alert('审核失败.' + data.msg);\n                        }\n                    }\n                },\n                error: function () {\n                    alert('审核失败，请稍后再试');\n                }\n            });\n        },\n\n        _auditReject: function () {\n            var textArea = $('.popup').find('textarea[name=\"checkContent\"]');\n            var comment = $.trim(textArea.val());\n            if (comment.length == 0) {\n                textArea.addClass('error');\n                return;\n            }\n            var purchaseId = $.trim($('#yao_purchase_reject_btn').attr('data-purchase-id'));\n            $.ajax({\n                type: 'POST',\n                cache: false,\n                traditional: true,\n                url: '/vender/b/pop_purchase_ajax/auditReject',\n                data: {\n                    purchaseId: purchaseId,\n                    comment: comment\n                },\n                dataType: 'json',\n                success: function (data) {\n                    if (data.success == true) {\n                        alert('驳回成功');\n                        window.location.reload();\n                    } else {\n                        alert('驳回失败.');\n                    }\n                },\n                error: function () {\n                    alert('驳回失败，请稍后再试');\n                }\n            });\n        },\n\n        reload: function () {\n            this._init();\n        }\n    });\n\n\n    /**\n     * 暴露全局变量\n     */\n    if (!w.yaoPurchaseDetail) {\n        w.yaoPurchaseDetail = function () {\n            new yaoPurchaseDetail({\n                node: $('.main_content')\n            });\n        };\n    }\n\n    /**\n     * 商品推荐入口\n     */\n    $(function () {\n        w.yaoPurchaseDetail();\n    });\n\n})(window, jQuery);\n\n/***\n * jiangsonglin 2016-07-11\n */\n(function (w, $) {\n    function yaoPurchaseList(opts) {\n        /**\n         * 默认参数配置\n         * @type {{node: null}}\n         */\n        var defaultOpts = {\n            node: null\n        };\n        /**\n         * 属性选择容器\n         */\n        this.node = opts.node;\n\n        /**\n         * 参数合并\n         */\n        this.opts = $.extend(opts);\n\n        this._init();\n    }\n\n\n    $.extend(yaoPurchaseList.prototype, {\n        /**\n         * 初始化入口\n         * @private\n         */\n        _init: function () {\n            var self = this;\n\n            self.searchBtn = $('#yao_purchase_list_search_btn');\n            self.searchOrderBtn = $('#yao_order_list_search_btn');\n            self.exportBtn = $('#yao_order_list_export_btn');\n\n            self._addEvent();\n        },\n\n        /**\n         * 事件绑定\n         * @private\n         */\n        _addEvent: function () {\n            var self = this;\n\n            self.searchBtn.on('click', function () {\n                self._searchPurchaseList();\n            });\n            self.searchOrderBtn.on('click', function () {\n                self._searchOrderList();\n            });\n            self.exportBtn.on('click', function () {\n                self._exportOrderList();\n            });\n\n        },\n        // 采购单列表\n        _searchPurchaseList: function () {\n            var param = yaoPurchaseList.prototype._getSearchParam();\n            $.ajax({\n                type: 'POST',\n                cache: false,\n                url: '/vender/b/pop_purchase/query.htm',\n                data: param,\n                dataType: 'html',\n                success: function (data) {\n                    if (data) {\n                        $('#purchase_order_list_table').html(data);\n                    }\n                },\n                error: function () {\n                    alert('获取采购单列表失败，请稍后再试');\n                }\n            });\n        },\n        // 订单列表\n        _searchOrderList: function () {\n            var param = yaoPurchaseList.prototype._getSearchParam();\n            $.ajax({\n                type: 'POST',\n                cache: false,\n                url: '/vender/b/pop_purchase/orderQuery.htm',\n                data: param,\n                dataType: 'html',\n                success: function (data) {\n                    if (data) {\n                        $('#order_list_table').html(data);\n                    }\n                },\n                error: function () {\n                    alert('获取订单列表失败，请稍后再试');\n                }\n            });\n        },\n\n        _getSearchParam: function () {\n            var searchItem = $('div .filter_search_info');\n            var userJson = {};\n            //写入input数据\n            searchItem.find('input').each(function () {\n                var self = $(this);\n                if (self.val()) {\n                    var searchKey = self.attr('name');\n                    var searchVal = $.trim(self.val());\n                    userJson[searchKey] = searchVal;\n                }\n            });\n            //写入selcet数据\n            searchItem.find('select').each(function () {\n                var select = $(this);\n                var searchKey = select.attr('name');\n                select.find('option:selected').each(function () {\n                    var self = $(this);\n                    if (self.val()) {\n                        userJson[searchKey] = self.val();\n                    }\n                });\n            });\n            return userJson;\n        },\n\n        // 导出数据\n        _exportOrderList: function () {\n            var param = yaoPurchaseList.prototype._getSearchParam();\n            param['type'] = this.exportBtn.attr('type');\n\n            var form = $('<form>'); //定义一个form表单\n\n            form.attr('style', 'display:none');\n            form.attr('target', '');\n            form.attr('method', 'post');\n            form.attr('action', '/vender/b/pop_purchase_ajax/exportOrder');\n            // 参数\n            for (var attrName in param) {\n                if (!param.hasOwnProperty(i)) {\n                    var input = $('<input>');\n                    input.attr('type', 'hidden');\n                    input.attr('name', attrName);\n                    input.attr('value', param[attrName]);\n                    form.append(input);\n                }\n            }\n\n            $('body').append(form); //将表单放置在web中\n            form.submit(); //表单提交\n        },\n\n        reload: function () {\n            this._init();\n        }\n    });\n\n\n    /**\n     * 暴露全局变量\n     */\n    if (!w.yaoPurchaseList) {\n        w.yaoPurchaseList = function () {\n            new yaoPurchaseList({\n                node: $('.main_content')\n            });\n        };\n    }\n\n    /**\n     * 商品推荐入口\n     */\n    $(function () {\n        w.yaoPurchaseList();\n    });\n\n})(window, jQuery);\n"]}